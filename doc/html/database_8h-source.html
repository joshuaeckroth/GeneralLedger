<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>General Ledger: database.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>database.h</h1><a href="database_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="preprocessor">#ifndef DATABASE_H</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define DATABASE_H</span>
00003 <span class="preprocessor"></span>
00004 <span class="preprocessor">#include &lt;qobject.h&gt;</span>
00005 <span class="preprocessor">#include &lt;qptrlist.h&gt;</span>
00006 
00007 <span class="keyword">class </span>QString;
00008 <span class="keyword">class </span>QStringList;
00009 <span class="keyword">class </span>QSqlDatabase;
00010 
00011 <span class="keyword">class </span><a class="code" href="classEditorElement.html">EditorElement</a>;
00012 <span class="keyword">class </span><a class="code" href="classSettings.html">Settings</a>;
00013 
<a name="l00014"></a><a class="code" href="classDatabase.html">00014</a> <span class="keyword">class </span><a class="code" href="classDatabase.html">Database</a> : <span class="keyword">public</span> QObject
00015 {
00016     Q_OBJECT
00017     <span class="keyword">public</span>:
00018         <span class="keyword">static</span> <a class="code" href="classDatabase.html">Database</a>* <a class="code" href="classDatabase.html#e0">instance</a>();
00019 
00020         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#a0">destroy</a>();
00021 
00022         <span class="keywordtype">bool</span> <a class="code" href="classDatabase.html#a1">openNew</a>(QString file, QString password);
00023         <span class="keywordtype">bool</span> <a class="code" href="classDatabase.html#a2">createNew</a>(QString name, QString yearEnd);
00024         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#a3">closeDb</a>();
00025         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#a4">copyDb</a>(QString file) <span class="keyword">const</span>;
00026         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#a5">encryptDb</a>(QString password);
00027         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#a6">decryptDb</a>();
00028         <span class="keywordtype">bool</span> <a class="code" href="classDatabase.html#a7">isEncrypted</a>() <span class="keyword">const</span>;
00029         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#a8">importDb</a>(QString file) <span class="keyword">const</span>;
00030         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#a9">editName</a>(QString name);
00031         QString <a class="code" href="classDatabase.html#a10">getCurDb</a>() <span class="keyword">const</span>;
00032         QString <a class="code" href="classDatabase.html#a11">getCurClient</a>() <span class="keyword">const</span>;
00033         <span class="keywordtype">bool</span> <a class="code" href="classDatabase.html#a12">curClientExists</a>() <span class="keyword">const</span>;
00034         QStringList <a class="code" href="classDatabase.html#a13">getClientList</a>() <span class="keyword">const</span>;
00035         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#a14">exportCSV</a>(QString table, QString file) <span class="keyword">const</span>;
00036         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#a15">importCSV</a>(QString table, QString file);
00037         QStringList <a class="code" href="classDatabase.html#a16">getPeriodBegin</a>() <span class="keyword">const</span>;
00038         QStringList <a class="code" href="classDatabase.html#a17">getPeriodEnd</a>() <span class="keyword">const</span>;
00039   
<a name="l00040"></a><a class="code" href="classDatabase.html#w8">00040</a>         <span class="keyword">enum</span> <a class="code" href="classDatabase.html#w8">editorCategories</a> {<a class="code" href="classDatabase.html#w8w0">balanceAssets</a>, <a class="code" href="classDatabase.html#w8w1">balanceLiabilities</a>, <a class="code" href="classDatabase.html#w8w2">balanceEquities</a>,
00041                                <a class="code" href="classDatabase.html#w8w3">incomeSvcIncome</a>, <a class="code" href="classDatabase.html#w8w4">incomeSvcExpenses</a>,
00042                                <a class="code" href="classDatabase.html#w8w5">incomeRetailIncome</a>, <a class="code" href="classDatabase.html#w8w6">incomeRetailCOS</a>, <a class="code" href="classDatabase.html#w8w7">incomeRetailExpenses</a>};
00043   
00044         QPtrList&lt;EditorElement&gt; <a class="code" href="classDatabase.html#a18">getElements</a>(editorCategories category);
00045   
00046         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#a19">createElement</a>(editorCategories category, QString type, QString desc, QString accountBegin,
00047                            QString accountEnd = <span class="stringliteral">""</span>);
00048         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#a20">removeElement</a>(editorCategories category, QString key);
00049         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#a21">moveElement</a>(editorCategories category, QString key, <span class="keywordtype">bool</span> up);
00050   
00051         <a class="code" href="classDatabase.html">Database</a>* <a class="code" href="classDatabase.html#a22">getGeneralDetail</a>(QString periodBegin, QString periodEnd, QString accountBegin, QString accountEnd);
00052         <a class="code" href="classDatabase.html">Database</a>* <a class="code" href="classDatabase.html#a23">getGeneralTrialBalance</a>(QString periodEnd, QString accountBegin, QString accountEnd);
00053         <a class="code" href="classDatabase.html">Database</a>* <a class="code" href="classDatabase.html#a24">getBalanceReport</a>(QString periodEnd);
00054         <a class="code" href="classDatabase.html">Database</a>* <a class="code" href="classDatabase.html#a25">getChartAccounts</a>();
00055         <a class="code" href="classDatabase.html">Database</a>* <a class="code" href="classDatabase.html#a26">getJournalTmpReport</a>();
00056         <a class="code" href="classDatabase.html">Database</a>* <a class="code" href="classDatabase.html#a27">getIncomeSvcReport</a>(QString periodEnd);
00057         <a class="code" href="classDatabase.html">Database</a>* <a class="code" href="classDatabase.html#a28">getIncomeRetailReport</a>(QString periodEnd);
00058   
00059         QString&amp; <a class="code" href="classDatabase.html#a29">reportHeader</a>();
00060         QString&amp; <a class="code" href="classDatabase.html#a30">reportData</a>();
00061 
00062         QString&amp; <a class="code" href="classDatabase.html#a31">reportString</a>();
00063         QString&amp; <a class="code" href="classDatabase.html#a32">reportCSV</a>();
00064         QString&amp; <a class="code" href="classDatabase.html#a33">reportHTML</a>();
00065 
00066         QString&amp; <a class="code" href="classDatabase.html#a34">journalTmpReportHeader</a>();
00067         QString&amp; <a class="code" href="classDatabase.html#a35">journalTmpReportData</a>();
00068   
00069         QStringList&amp; <a class="code" href="classDatabase.html#a36">getAccountsList</a>();
00070         QPtrList&lt;QStringList&gt;* <a class="code" href="classDatabase.html#a37">getAccountsData</a>();
00071         QPtrList&lt;QStringList&gt;* <a class="code" href="classDatabase.html#a38">getJournalTmpData</a>();
00072   
00073         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#a39">updateAccount</a>(QString key, QString <span class="keywordtype">id</span>, QString desc);
00074         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#a40">deleteAccount</a>(QString key);
00075         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#a41">updateJournalTmp</a>(QString key, QString date, QString account,
00076                               QString reference, QString desc, QString debit, QString credit);
00077         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#a42">deleteJournalTmp</a>(QString key);
00078   
00079         QString <a class="code" href="classDatabase.html#a43">journalTmpDebit</a>();
00080         QString <a class="code" href="classDatabase.html#a44">journalTmpCredit</a>();
00081         QString <a class="code" href="classDatabase.html#a45">journalTmpBalance</a>();
00082 
00083         QString <a class="code" href="classDatabase.html#a46">addCurrency</a>(QString base, QString add) <span class="keyword">const</span>;
00084         QString <a class="code" href="classDatabase.html#a47">negCurrency</a>(QString currency) <span class="keyword">const</span>;
00085         QString <a class="code" href="classDatabase.html#a48">addCommas</a>(QString currency) <span class="keyword">const</span>;
00086         QString <a class="code" href="classDatabase.html#a49">formatCurrency</a>(QString currency) <span class="keyword">const</span>;
00087   
00088         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#a50">commitJournalTmp</a>();
00089 
00090         <span class="keywordtype">bool</span> <a class="code" href="classDatabase.html#a51">journalTmpEmpty</a>();
00091   
00092         QString <a class="code" href="classDatabase.html#a52">nextAccountKey</a>();
00093         QString <a class="code" href="classDatabase.html#a53">nextJournalTmpKey</a>();
00094 
00095         QString <a class="code" href="classDatabase.html#a54">getAccountDesc</a>(QString account);
00096         <span class="keywordtype">bool</span> <a class="code" href="classDatabase.html#a55">accountExists</a>(QString account);
00097         <span class="keywordtype">bool</span> <a class="code" href="classDatabase.html#a56">accountHasEntries</a>(QString account);
00098   
00099     signals:
00100         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#l0">accountsChanged</a>();
00101         <span class="keywordtype">void</span> <a class="code" href="classDatabase.html#l1">journalTmpChanged</a>();
00102 
00103     <span class="keyword">private</span>:
00104         <a class="code" href="classDatabase.html#d0">Database</a>();
00105         <a class="code" href="classDatabase.html#d1">~Database</a>();
00106   
00107         <span class="keyword">static</span> <a class="code" href="classDatabase.html">Database</a> *db;
00108 
<a name="l00109"></a><a class="code" href="classDatabase.html#r0">00109</a>         <a class="code" href="classSettings.html">Settings</a> *<a class="code" href="classDatabase.html#r0">settings</a>;
00110 
<a name="l00111"></a><a class="code" href="classDatabase.html#r1">00111</a>         QString <a class="code" href="classDatabase.html#r1">clientPath</a>;
00112      
<a name="l00113"></a><a class="code" href="classDatabase.html#r2">00113</a>         QSqlDatabase *<a class="code" href="classDatabase.html#r2">connection</a>;
<a name="l00114"></a><a class="code" href="classDatabase.html#r3">00114</a>         QString <a class="code" href="classDatabase.html#r3">curClient</a>;
<a name="l00115"></a><a class="code" href="classDatabase.html#r4">00115</a>         QString <a class="code" href="classDatabase.html#r4">curDb</a>;
00116   
<a name="l00117"></a><a class="code" href="structDatabase_1_1ReportStruct.html">00117</a>         <span class="keyword">struct </span><a class="code" href="structDatabase_1_1ReportStruct.html">ReportStruct</a> {
<a name="l00118"></a><a class="code" href="structDatabase_1_1ReportStruct.html#o0">00118</a>             QString <a class="code" href="structDatabase_1_1ReportStruct.html#o0">header</a>;
<a name="l00119"></a><a class="code" href="structDatabase_1_1ReportStruct.html#o1">00119</a>             QString <a class="code" href="structDatabase_1_1ReportStruct.html#o1">data</a>;
<a name="l00120"></a><a class="code" href="structDatabase_1_1ReportStruct.html#o2">00120</a>             QString <a class="code" href="structDatabase_1_1ReportStruct.html#o2">string</a>;
<a name="l00121"></a><a class="code" href="structDatabase_1_1ReportStruct.html#o3">00121</a>             QString <a class="code" href="structDatabase_1_1ReportStruct.html#o3">csv</a>;
<a name="l00122"></a><a class="code" href="structDatabase_1_1ReportStruct.html#o4">00122</a>             QString <a class="code" href="structDatabase_1_1ReportStruct.html#o4">html</a>;
00123         };
<a name="l00124"></a><a class="code" href="classDatabase.html#r5">00124</a>         <a class="code" href="structDatabase_1_1ReportStruct.html">ReportStruct</a> *<a class="code" href="classDatabase.html#r5">report</a>;
00125 
<a name="l00126"></a><a class="code" href="structDatabase_1_1JournalTmpReport.html">00126</a>         <span class="keyword">struct </span><a class="code" href="structDatabase_1_1JournalTmpReport.html">JournalTmpReport</a> {
<a name="l00127"></a><a class="code" href="structDatabase_1_1JournalTmpReport.html#o0">00127</a>             QString <a class="code" href="structDatabase_1_1JournalTmpReport.html#o0">header</a>;
<a name="l00128"></a><a class="code" href="structDatabase_1_1JournalTmpReport.html#o1">00128</a>             QString <a class="code" href="structDatabase_1_1JournalTmpReport.html#o1">data</a>;
00129         };
<a name="l00130"></a><a class="code" href="classDatabase.html#r6">00130</a>         <a class="code" href="structDatabase_1_1JournalTmpReport.html">JournalTmpReport</a> *<a class="code" href="classDatabase.html#r6">journalTmpReport</a>;
00131   
<a name="l00132"></a><a class="code" href="classDatabase.html#r7">00132</a>         QStringList *<a class="code" href="classDatabase.html#r7">accountsList</a>;
00133   
00134 };
00135 
00136 <span class="preprocessor">#endif</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Fri Sep 17 18:11:39 2004 for General Ledger by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.8 </small></address>
</body>
</html>
