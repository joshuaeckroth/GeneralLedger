<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>General Ledger: Printer Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>Printer Class Reference</h1><code>#include &lt;<a class="el" href="printer_8h-source.html">printer.h</a>&gt;</code>
<p>
Collaboration diagram for Printer:<p><center><img src="classPrinter__coll__graph.png" border="0" usemap="#Printer__coll__map" alt="Collaboration graph"></center>
<map name="Printer__coll__map">
<area href="classSettings.html" shape="rect" coords="8,9,77,33" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classPrinter-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPrinter.html#a0">destroy</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPrinter.html#a1">printReport</a> (const QString &amp;header, const QString &amp;data)</td></tr>

<tr><td colspan=2><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classPrinter.html">Printer</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPrinter.html#e0">instance</a> ()</td></tr>

<tr><td colspan=2><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPrinter.html#d0">Printer</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPrinter.html#d1">~Printer</a> ()</td></tr>

<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classSettings.html">Settings</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPrinter.html#r0">settings</a></td></tr>

<tr><td colspan=2><br><h2>Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classPrinter.html">Printer</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPrinter.html#v0">printer</a> = 0</td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="d0" doxytag="Printer::Printer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> Printer::Printer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Definition at line <a class="el" href="printer_8cpp-source.html#l00017">17</a> of file <a class="el" href="printer_8cpp-source.html">printer.cpp</a>.
<p>
References <a class="el" href="settings_8cpp-source.html#l00281">Settings::getPrinterColorMode()</a>, <a class="el" href="settings_8cpp-source.html#l00251">Settings::getPrinterOrientation()</a>, <a class="el" href="settings_8cpp-source.html#l00231">Settings::getPrinterOutputFileName()</a>, <a class="el" href="settings_8cpp-source.html#l00221">Settings::getPrinterOutputToFile()</a>, <a class="el" href="settings_8cpp-source.html#l00271">Settings::getPrinterPageOrder()</a>, <a class="el" href="settings_8cpp-source.html#l00261">Settings::getPrinterPageSize()</a>, <a class="el" href="settings_8cpp-source.html#l00291">Settings::getPrinterPaperSource()</a>, <a class="el" href="settings_8cpp-source.html#l00211">Settings::getPrinterPrinterName()</a>, <a class="el" href="settings_8cpp-source.html#l00241">Settings::getPrinterPrintProgram()</a>, <a class="el" href="settings_8cpp-source.html#l00108">Settings::instance()</a>, and <a class="el" href="printer_8h-source.html#l00023">settings</a>.<pre class="fragment"><div>00017                  : QPrinter(QPrinter::HighResolution)
00018 {
00019     <a class="code" href="classPrinter.html#r0">settings</a> = <a class="code" href="classSettings.html#e0">Settings::instance</a>();
00020     setPrinterName(<a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a19">getPrinterPrinterName</a>());
00021     setOutputToFile(<a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a21">getPrinterOutputToFile</a>());
00022     setOutputFileName(<a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a23">getPrinterOutputFileName</a>());
00023     setPrintProgram(<a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a25">getPrinterPrintProgram</a>());
00024     setOrientation(<a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a27">getPrinterOrientation</a>());
00025     setPageSize(<a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a29">getPrinterPageSize</a>());
00026     setPageOrder(<a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a31">getPrinterPageOrder</a>());
00027     setColorMode(<a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a33">getPrinterColorMode</a>());
00028     setPaperSource(<a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a35">getPrinterPaperSource</a>());
00029 }
</div></pre>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="Printer::~Printer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> Printer::~<a class="el" href="classPrinter.html">Printer</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Definition at line <a class="el" href="printer_8cpp-source.html#l00031">31</a> of file <a class="el" href="printer_8cpp-source.html">printer.cpp</a>.
<p>
References <a class="el" href="settings_8cpp-source.html#l00286">Settings::setPrinterColorMode()</a>, <a class="el" href="settings_8cpp-source.html#l00256">Settings::setPrinterOrientation()</a>, <a class="el" href="settings_8cpp-source.html#l00236">Settings::setPrinterOutputFileName()</a>, <a class="el" href="settings_8cpp-source.html#l00226">Settings::setPrinterOutputToFile()</a>, <a class="el" href="settings_8cpp-source.html#l00276">Settings::setPrinterPageOrder()</a>, <a class="el" href="settings_8cpp-source.html#l00266">Settings::setPrinterPageSize()</a>, <a class="el" href="settings_8cpp-source.html#l00296">Settings::setPrinterPaperSource()</a>, <a class="el" href="settings_8cpp-source.html#l00216">Settings::setPrinterPrinterName()</a>, <a class="el" href="settings_8cpp-source.html#l00246">Settings::setPrinterPrintProgram()</a>, and <a class="el" href="printer_8h-source.html#l00023">settings</a>.<pre class="fragment"><div>00032 {
00033     <a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a20">setPrinterPrinterName</a>(printerName());
00034     <a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a22">setPrinterOutputToFile</a>(outputToFile());
00035     <a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a24">setPrinterOutputFileName</a>(outputFileName());
00036     <a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a26">setPrinterPrintProgram</a>(printProgram());
00037     <a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a28">setPrinterOrientation</a>(orientation());
00038     <a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a30">setPrinterPageSize</a>(pageSize());
00039     <a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a32">setPrinterPageOrder</a>(pageOrder());
00040     <a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a34">setPrinterColorMode</a>(colorMode());
00041     <a class="code" href="classPrinter.html#r0">settings</a>-&gt;<a class="code" href="classSettings.html#a36">setPrinterPaperSource</a>(paperSource());
00042 }
</div></pre>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a0" doxytag="Printer::destroy" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void Printer::destroy           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Definition at line <a class="el" href="printer_8cpp-source.html#l00051">51</a> of file <a class="el" href="printer_8cpp-source.html">printer.cpp</a>.
<p>
References <a class="el" href="printer_8cpp-source.html#l00116">printer</a>.
<p>
Referenced by <a class="el" href="main_8cpp-source.html#l00008">main()</a>.<pre class="fragment"><div>00052 {
00053     <span class="keywordflow">if</span>(<a class="code" href="classPrinter.html#v0">printer</a> != 0)
00054         <span class="keyword">delete</span> <a class="code" href="classPrinter.html#v0">printer</a>;
00055 }
</div></pre>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e0" doxytag="Printer::instance" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classPrinter.html">Printer</a> * Printer::instance           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Definition at line <a class="el" href="printer_8cpp-source.html#l00044">44</a> of file <a class="el" href="printer_8cpp-source.html">printer.cpp</a>.
<p>
References <a class="el" href="printer_8cpp-source.html#l00116">printer</a>.
<p>
Referenced by <a class="el" href="journalStack_8cpp-source.html#l00020">JournalStack::JournalStack()</a>, <a class="el" href="main_8cpp-source.html#l00008">main()</a>, and <a class="el" href="reportStack_8cpp-source.html#l00037">ReportStack::ReportStack()</a>.<pre class="fragment"><div>00045 {
00046     <span class="keywordflow">if</span>(<a class="code" href="classPrinter.html#v0">printer</a> == 0)
00047         <a class="code" href="classPrinter.html#v0">printer</a> = <span class="keyword">new</span> <a class="code" href="classPrinter.html">Printer</a>;
00048     <span class="keywordflow">return</span> <a class="code" href="classPrinter.html#v0">printer</a>;
00049 }
</div></pre>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="Printer::printReport" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void Printer::printReport           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const QString &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>header</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const QString &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Definition at line <a class="el" href="printer_8cpp-source.html#l00057">57</a> of file <a class="el" href="printer_8cpp-source.html">printer.cpp</a>.
<p>
Referenced by <a class="el" href="journalStack_8cpp-source.html#l00245">JournalStack::printJournal()</a>.<pre class="fragment"><div>00058 {
00059     <span class="keywordflow">if</span>(setup(0))
00060     {
00061 
00062         QPainter painter(<span class="keyword">this</span>);
00063 
00064         QPaintDeviceMetrics metrics(<span class="keyword">this</span>);
00065         <span class="keywordtype">int</span> headerGap = metrics.logicalDpiY() / 4;  <span class="comment">// quarter inch</span>
00066 
00067         QFont headerFont(<span class="stringliteral">"Verdana"</span>, 8);
00068         QFont dataFont(<span class="stringliteral">"Verdana"</span>, 8);
00069     
00070         QSimpleRichText headerText(header, headerFont);
00071     
00072         headerText.setWidth(&amp;painter, painter.window().width());
00073 
00074         <span class="keywordtype">int</span> pageHeight = painter.window().height() - headerText.height() - headerGap;
00075 
00076         QSimpleRichText dataText(data, dataFont, <span class="stringliteral">""</span>, 0, 0, pageHeight);
00077         dataText.setWidth(&amp;painter, painter.window().width());
00078 
00079         <span class="keywordtype">int</span> numPages = (<span class="keywordtype">int</span>)ceil((<span class="keywordtype">double</span>)dataText.height() / pageHeight);
00080 
00081         <span class="keywordtype">int</span> index;
00082 
00083         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; (<span class="keywordtype">int</span>)numCopies(); ++i)
00084         {
00085             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; numPages; ++j)
00086             {
00087                 <span class="keywordflow">if</span>(i &gt; 0 || j &gt; 0)
00088                     newPage();
00089 
00090                 <span class="keywordflow">if</span>(pageOrder() == QPrinter::LastPageFirst)
00091                     index = numPages - j - 1;
00092                 <span class="keywordflow">else</span>
00093                     index = j;
00094 
00095                 QRect headerRect(0, 0, headerText.width(), headerText.height());
00096 
00097                 QRect dataRect(0, (index * pageHeight), dataText.width(), pageHeight);
00098             
00099 
00100                 headerText.draw(&amp;painter, 0, 0, headerRect, QColorGroup());
00101 
00102                 painter.save();
00103                 painter.translate(0, -dataRect.top() + headerText.height());
00104                 dataText.draw(&amp;painter, 0, 0, dataRect, QColorGroup());
00105                 painter.restore();
00106 
00107                 painter.setFont(dataFont);
00108                 painter.drawText(painter.window(), Qt::AlignHCenter | Qt::AlignBottom,
00109                                  QString(<span class="stringliteral">"Page "</span> + QString::number(j + 1) + <span class="stringliteral">" of "</span> + QString::number(numPages)));
00110 
00111             }
00112         }
00113     }
00114 }
</div></pre>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="v0" doxytag="Printer::printer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classPrinter.html">Printer</a> * <a class="el" href="classPrinter.html#v0">Printer::printer</a> = 0<code> [static, private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Definition at line <a class="el" href="printer_8cpp-source.html#l00116">116</a> of file <a class="el" href="printer_8cpp-source.html">printer.cpp</a>.
<p>
Referenced by <a class="el" href="printer_8cpp-source.html#l00051">destroy()</a>, and <a class="el" href="printer_8cpp-source.html#l00044">instance()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="Printer::settings" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classSettings.html">Settings</a>* <a class="el" href="classPrinter.html#r0">Printer::settings</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Definition at line <a class="el" href="printer_8h-source.html#l00023">23</a> of file <a class="el" href="printer_8h-source.html">printer.h</a>.
<p>
Referenced by <a class="el" href="printer_8cpp-source.html#l00017">Printer()</a>, and <a class="el" href="printer_8cpp-source.html#l00031">~Printer()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="printer_8h-source.html">printer.h</a><li><a class="el" href="printer_8cpp-source.html">printer.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Fri Sep 17 18:12:14 2004 for General Ledger by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.8 </small></address>
</body>
</html>
