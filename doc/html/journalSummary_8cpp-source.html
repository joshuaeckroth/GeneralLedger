<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>General Ledger: journalSummary.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>journalSummary.cpp</h1><a href="journalSummary_8cpp.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="preprocessor">#include &lt;qwidget.h&gt;</span>
00002 <span class="preprocessor">#include &lt;qlayout.h&gt;</span>
00003 <span class="preprocessor">#include &lt;qlabel.h&gt;</span>
00004 
00005 <span class="preprocessor">#include "<a class="code" href="database_8h.html">database.h</a>"</span>
00006 <span class="preprocessor">#include "<a class="code" href="journalSummary_8h.html">journalSummary.h</a>"</span>
00007 <span class="preprocessor">#include "<a class="code" href="journalTable_8h.html">journalTable.h</a>"</span>
00008 
<a name="l00009"></a><a class="code" href="classJournalSummary.html#a0">00009</a> <a class="code" href="classJournalSummary.html#a0">JournalSummary::JournalSummary</a>(QWidget *parent, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code" href="classJournalTable.html">JournalTable</a> *table)
00010     : QWidget(parent,name)
00011 {
00012     <a class="code" href="classJournalSummary.html#r0">db</a> = <a class="code" href="classDatabase.html#e0">Database::instance</a>();
00013     connect(<a class="code" href="classJournalSummary.html#r0">db</a>, SIGNAL(journalTmpChanged()), <span class="keyword">this</span>, SLOT(<a class="code" href="classJournalSummary.html#k0">updateSummary</a>()));
00014     
00015     <span class="keywordtype">int</span> debitColWidth = table-&gt;<a class="code" href="classJournalTable.html#a3">debitColWidth</a>();
00016     <span class="keywordtype">int</span> creditColWidth = table-&gt;<a class="code" href="classJournalTable.html#a4">creditColWidth</a>();
00017     <span class="keywordtype">int</span> scrollBarWidth = (table-&gt;verticalScrollBar()-&gt;width() + 5);
00018     
00019     <a class="code" href="classJournalSummary.html#r1">grid</a> = <span class="keyword">new</span> QGridLayout(<span class="keyword">this</span>, 3, 5);
00020     
00021     <a class="code" href="classJournalSummary.html#r2">debitLabel</a> = <span class="keyword">new</span> QLabel(<span class="stringliteral">"Debit:"</span>, <span class="keyword">this</span>);
00022     <a class="code" href="classJournalSummary.html#r2">debitLabel</a>-&gt;setAlignment(Qt::AlignRight);
00023     
00024     <a class="code" href="classJournalSummary.html#r3">debitValue</a> = <span class="keyword">new</span> QLabel(<span class="stringliteral">"&lt;tt&gt;"</span> + <a class="code" href="classJournalSummary.html#r0">db</a>-&gt;<a class="code" href="classDatabase.html#a43">journalTmpDebit</a>() + <span class="stringliteral">"&lt;/tt&gt;"</span>, <span class="keyword">this</span>);
00025     <a class="code" href="classJournalSummary.html#r3">debitValue</a>-&gt;setFixedWidth(debitColWidth);
00026     <a class="code" href="classJournalSummary.html#r3">debitValue</a>-&gt;setAlignment(Qt::AlignRight);
00027     
00028     <a class="code" href="classJournalSummary.html#r4">creditLabel</a> = <span class="keyword">new</span> QLabel(<span class="stringliteral">"Credit:"</span>, <span class="keyword">this</span>);
00029     <a class="code" href="classJournalSummary.html#r4">creditLabel</a>-&gt;setAlignment(Qt::AlignRight);
00030     
00031     <a class="code" href="classJournalSummary.html#r5">creditValue</a> = <span class="keyword">new</span> QLabel(<span class="stringliteral">"&lt;tt&gt;"</span> + <a class="code" href="classJournalSummary.html#r0">db</a>-&gt;<a class="code" href="classDatabase.html#a44">journalTmpCredit</a>() + <span class="stringliteral">"&lt;/tt&gt;"</span>, <span class="keyword">this</span>);
00032     <a class="code" href="classJournalSummary.html#r5">creditValue</a>-&gt;setFixedWidth(creditColWidth);
00033     <a class="code" href="classJournalSummary.html#r5">creditValue</a>-&gt;setAlignment(Qt::AlignRight);
00034     
00035     <a class="code" href="classJournalSummary.html#r6">balanceLabel</a> = <span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"&lt;b&gt;Balance:&lt;/b&gt;"</span>), <span class="keyword">this</span>);
00036     <a class="code" href="classJournalSummary.html#r6">balanceLabel</a>-&gt;setAlignment(Qt::AlignRight);
00037     
00038     <a class="code" href="classJournalSummary.html#r7">balanceValue</a> = <span class="keyword">new</span> QLabel(<span class="stringliteral">"&lt;b&gt;&lt;tt&gt;"</span> + <a class="code" href="classJournalSummary.html#r0">db</a>-&gt;<a class="code" href="classDatabase.html#a45">journalTmpBalance</a>() + <span class="stringliteral">"&lt;/tt&gt;&lt;/b&gt;"</span>, <span class="keyword">this</span>);
00039     <a class="code" href="classJournalSummary.html#r7">balanceValue</a>-&gt;setAlignment(Qt::AlignRight);
00040     
00041     <a class="code" href="classJournalSummary.html#r8">debitWidth</a> = <span class="keyword">new</span> QSpacerItem(debitColWidth, 1);
00042     <a class="code" href="classJournalSummary.html#r9">creditWidth</a> = <span class="keyword">new</span> QSpacerItem(creditColWidth, 1);
00043     <a class="code" href="classJournalSummary.html#r10">scrollWidth</a> = <span class="keyword">new</span> QSpacerItem(scrollBarWidth, 1);
00044     
00045     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;setColStretch(0, 1);
00046     
00047     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;addWidget(<a class="code" href="classJournalSummary.html#r2">debitLabel</a>, 0, 1);
00048     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;addWidget(<a class="code" href="classJournalSummary.html#r3">debitValue</a>, 0, 2);
00049     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;addItem(<a class="code" href="classJournalSummary.html#r9">creditWidth</a>, 0, 3);
00050     
00051     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;addItem(<a class="code" href="classJournalSummary.html#r10">scrollWidth</a>, 0, 4);
00052     
00053     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;addWidget(<a class="code" href="classJournalSummary.html#r4">creditLabel</a>, 1, 1);
00054     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;addItem(<a class="code" href="classJournalSummary.html#r8">debitWidth</a>, 1, 2);
00055     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;addWidget(<a class="code" href="classJournalSummary.html#r5">creditValue</a>, 1, 3);
00056     
00057     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;addWidget(<a class="code" href="classJournalSummary.html#r6">balanceLabel</a>, 2, 1);
00058     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;addItem(<a class="code" href="classJournalSummary.html#r8">debitWidth</a>, 2, 2);
00059     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;addWidget(<a class="code" href="classJournalSummary.html#r7">balanceValue</a>, 2, 3);
00060     
00061 }
00062 
<a name="l00063"></a><a class="code" href="classJournalSummary.html#a1">00063</a> <a class="code" href="classJournalSummary.html#a1">JournalSummary::~JournalSummary</a>()
00064 {
00065     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;removeItem(<a class="code" href="classJournalSummary.html#r10">scrollWidth</a>);
00066     <span class="keyword">delete</span> <a class="code" href="classJournalSummary.html#r10">scrollWidth</a>;
00067     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;removeItem(<a class="code" href="classJournalSummary.html#r9">creditWidth</a>);
00068     <span class="keyword">delete</span> <a class="code" href="classJournalSummary.html#r9">creditWidth</a>;
00069     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;removeItem(<a class="code" href="classJournalSummary.html#r8">debitWidth</a>);
00070     <span class="keyword">delete</span> <a class="code" href="classJournalSummary.html#r8">debitWidth</a>;
00071     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;remove(<a class="code" href="classJournalSummary.html#r7">balanceValue</a>);
00072     <span class="keyword">delete</span> <a class="code" href="classJournalSummary.html#r7">balanceValue</a>;
00073     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;remove(<a class="code" href="classJournalSummary.html#r6">balanceLabel</a>);
00074     <span class="keyword">delete</span> <a class="code" href="classJournalSummary.html#r6">balanceLabel</a>;
00075     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;remove(<a class="code" href="classJournalSummary.html#r5">creditValue</a>);
00076     <span class="keyword">delete</span> <a class="code" href="classJournalSummary.html#r5">creditValue</a>;
00077     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;remove(<a class="code" href="classJournalSummary.html#r4">creditLabel</a>);
00078     <span class="keyword">delete</span> <a class="code" href="classJournalSummary.html#r4">creditLabel</a>;
00079     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;remove(<a class="code" href="classJournalSummary.html#r3">debitValue</a>);
00080     <span class="keyword">delete</span> <a class="code" href="classJournalSummary.html#r3">debitValue</a>;
00081     <a class="code" href="classJournalSummary.html#r1">grid</a>-&gt;remove(<a class="code" href="classJournalSummary.html#r2">debitLabel</a>);
00082     <span class="keyword">delete</span> <a class="code" href="classJournalSummary.html#r2">debitLabel</a>;
00083     <span class="keyword">delete</span> <a class="code" href="classJournalSummary.html#r1">grid</a>;
00084 }
00085 
<a name="l00086"></a><a class="code" href="classJournalSummary.html#k0">00086</a> <span class="keywordtype">void</span> <a class="code" href="classJournalSummary.html#k0">JournalSummary::updateSummary</a>()
00087 {
00088     <a class="code" href="classJournalSummary.html#r3">debitValue</a>-&gt;setText(<span class="stringliteral">"&lt;tt&gt;"</span> + <a class="code" href="classJournalSummary.html#r0">db</a>-&gt;<a class="code" href="classDatabase.html#a43">journalTmpDebit</a>() + <span class="stringliteral">"&lt;/tt&gt;"</span>);
00089     <a class="code" href="classJournalSummary.html#r5">creditValue</a>-&gt;setText(<span class="stringliteral">"&lt;tt&gt;"</span> + <a class="code" href="classJournalSummary.html#r0">db</a>-&gt;<a class="code" href="classDatabase.html#a44">journalTmpCredit</a>() + <span class="stringliteral">"&lt;/tt&gt;"</span>);
00090     <a class="code" href="classJournalSummary.html#r7">balanceValue</a>-&gt;setText(<span class="stringliteral">"&lt;b&gt;&lt;tt&gt;"</span> + <a class="code" href="classJournalSummary.html#r0">db</a>-&gt;<a class="code" href="classDatabase.html#a45">journalTmpBalance</a>() + <span class="stringliteral">"&lt;/tt&gt;&lt;/b&gt;"</span>);
00091 }
00092 
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Fri Sep 17 18:11:40 2004 for General Ledger by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.8 </small></address>
</body>
</html>
