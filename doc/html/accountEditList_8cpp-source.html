<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>General Ledger: accountEditList.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>accountEditList.cpp</h1><a href="accountEditList_8cpp.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="preprocessor">#include &lt;qcombobox.h&gt;</span>
00002 <span class="preprocessor">#include &lt;qstringlist.h&gt;</span>
00003 <span class="preprocessor">#include &lt;qlineedit.h&gt;</span>
00004 <span class="preprocessor">#include &lt;qlistbox.h&gt;</span>
00005 <span class="preprocessor">#include &lt;qevent.h&gt;</span>
00006 
00007 <span class="preprocessor">#include "<a class="code" href="accountEditList_8h.html">accountEditList.h</a>"</span>
00008 
<a name="l00009"></a><a class="code" href="classAccountEditList.html#a0">00009</a> <a class="code" href="classAccountEditList.html#a0">AccountEditList::AccountEditList</a>(QWidget *parent, <span class="keyword">const</span> <span class="keywordtype">char</span> *name,
00010                                 <span class="keyword">const</span> QStringList &amp;newAccounts, <span class="keyword">const</span> QString &amp;newText)
00011     : QComboBox(TRUE, parent, name), accounts(newAccounts), curText(newText)
00012 {
00013     <a class="code" href="classAccountEditList.html#r2">list</a> = <span class="keyword">new</span> QListBox(<span class="keyword">this</span>);
00014     setListBox(<a class="code" href="classAccountEditList.html#r2">list</a>);
00015     <a class="code" href="classAccountEditList.html#r2">list</a>-&gt;setSelectionMode(QListBox::NoSelection);
00016     <a class="code" href="classAccountEditList.html#r2">list</a>-&gt;setEnabled(<span class="keyword">false</span>);
00017 
00018     <a class="code" href="classAccountEditList.html#r3">editor</a> = <span class="keyword">new</span> QLineEdit(<a class="code" href="classAccountEditList.html#r1">curText</a>, <span class="keyword">this</span>);
00019     setLineEdit(<a class="code" href="classAccountEditList.html#r3">editor</a>);
00020 
00021     setSizeLimit(10);
00022 
00023     insertStringList(<a class="code" href="classAccountEditList.html#r0">accounts</a>);    <span class="comment">// even though this is cleared on focusInEvent,</span>
00024                                    <span class="comment">// it's necessary to create a listbox that's the full size</span>
00025 
00026     <a class="code" href="classAccountEditList.html#r3">editor</a>-&gt;setText(<a class="code" href="classAccountEditList.html#r1">curText</a>);
00027     
00028     setInsertionPolicy(QComboBox::NoInsertion);
00029 
00030     connect(<a class="code" href="classAccountEditList.html#r3">editor</a>, SIGNAL(textChanged(<span class="keyword">const</span> QString&amp;)), <span class="keyword">this</span>, SLOT(<a class="code" href="classAccountEditList.html#k0">changed</a>(<span class="keyword">const</span> QString&amp;)));
00031     
00032 }
00033 
<a name="l00034"></a><a class="code" href="classAccountEditList.html#a2">00034</a> <span class="keywordtype">void</span> <a class="code" href="classAccountEditList.html#a2">AccountEditList::updateAccounts</a>(<span class="keyword">const</span> QStringList &amp;newAccounts)
00035 {
00036     <a class="code" href="classAccountEditList.html#r0">accounts</a> = newAccounts;
00037     <a class="code" href="classAccountEditList.html#r2">list</a>-&gt;clear();
00038     <a class="code" href="classAccountEditList.html#r2">list</a>-&gt;insertStringList(<a class="code" href="classAccountEditList.html#r0">accounts</a>);
00039 }
00040 
<a name="l00041"></a><a class="code" href="classAccountEditList.html#k0">00041</a> <span class="keywordtype">void</span> <a class="code" href="classAccountEditList.html#k0">AccountEditList::changed</a>(<span class="keyword">const</span> QString &amp;newText)
00042 {
00043     <a class="code" href="classAccountEditList.html#r1">curText</a> = newText;
00044 
00045     <a class="code" href="classAccountEditList.html#r2">list</a>-&gt;clear();
00046 
00047     <span class="keywordflow">for</span>(QStringList::Iterator it = <a class="code" href="classAccountEditList.html#r0">accounts</a>.begin(); it != <a class="code" href="classAccountEditList.html#r0">accounts</a>.end(); it++)
00048     {
00049         <span class="keywordflow">if</span>((*it).startsWith(<a class="code" href="classAccountEditList.html#r1">curText</a>))
00050             <a class="code" href="classAccountEditList.html#r2">list</a>-&gt;insertItem(*it);
00051     }
00052 
00053 }
00054 
<a name="l00055"></a><a class="code" href="classAccountEditList.html#a1">00055</a> QString <a class="code" href="classAccountEditList.html#a1">AccountEditList::currentText</a>()<span class="keyword"> const</span>
00056 <span class="keyword"></span>{
00057     <span class="keywordflow">return</span> <a class="code" href="classAccountEditList.html#r1">curText</a>;
00058 }
00059 
<a name="l00060"></a><a class="code" href="classAccountEditList.html#a3">00060</a> <span class="keywordtype">void</span> <a class="code" href="classAccountEditList.html#a3">AccountEditList::focusInEvent</a>(QFocusEvent *event)
00061 {
00062     QComboBox::focusInEvent(event);
00063     popup();
00064     <a class="code" href="classAccountEditList.html#k0">changed</a>(<a class="code" href="classAccountEditList.html#r1">curText</a>);
00065 }
00066 
<a name="l00067"></a><a class="code" href="classAccountEditList.html#a4">00067</a> <span class="keywordtype">void</span> <a class="code" href="classAccountEditList.html#a4">AccountEditList::focusOutEvent</a>(QFocusEvent *event)
00068 {
00069     QComboBox::focusOutEvent(event);
00070     <span class="keywordflow">if</span>(event-&gt;reason() == QFocusEvent::Mouse ||
00071        event-&gt;reason() == QFocusEvent::Tab ||
00072        event-&gt;reason() == QFocusEvent::Backtab)
00073         <a class="code" href="classAccountEditList.html#r2">list</a>-&gt;hide();
00074 }
00075 
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Fri Sep 17 18:11:38 2004 for General Ledger by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.8 </small></address>
</body>
</html>
