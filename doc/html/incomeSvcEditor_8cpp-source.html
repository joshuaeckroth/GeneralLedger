<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>General Ledger: incomeSvcEditor.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>incomeSvcEditor.cpp</h1><a href="incomeSvcEditor_8cpp.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="preprocessor">#include &lt;qscrollview.h&gt;</span>
00002 <span class="preprocessor">#include &lt;qlayout.h&gt;</span>
00003 <span class="preprocessor">#include &lt;qframe.h&gt;</span>
00004 <span class="preprocessor">#include &lt;qlabel.h&gt;</span>
00005 <span class="preprocessor">#include &lt;qpushbutton.h&gt;</span>
00006 <span class="preprocessor">#include &lt;qdialog.h&gt;</span>
00007 <span class="preprocessor">#include &lt;qlineedit.h&gt;</span>
00008 <span class="preprocessor">#include &lt;qradiobutton.h&gt;</span>
00009 <span class="preprocessor">#include &lt;qptrlist.h&gt;</span>
00010 <span class="preprocessor">#include &lt;qstringlist.h&gt;</span>
00011 
00012 <span class="preprocessor">#include "config.h"</span>
00013 <span class="preprocessor">#include "<a class="code" href="database_8h.html">database.h</a>"</span>
00014 <span class="preprocessor">#include "<a class="code" href="settings_8h.html">settings.h</a>"</span>
00015 <span class="preprocessor">#include "<a class="code" href="incomeSvcEditor_8h.html">incomeSvcEditor.h</a>"</span>
00016 <span class="preprocessor">#include "<a class="code" href="editorElement_8h.html">editorElement.h</a>"</span>
00017 <span class="preprocessor">#include "<a class="code" href="accountList_8h.html">accountList.h</a>"</span>
00018 
<a name="l00019"></a><a class="code" href="classIncomeSvcEditor.html#a0">00019</a> <a class="code" href="classIncomeSvcEditor.html#a0">IncomeSvcEditor::IncomeSvcEditor</a>(QWidget *parent, <span class="keyword">const</span> <span class="keywordtype">char</span> *name)
00020     : QScrollView(parent,name)
00021 {
00022     <a class="code" href="classIncomeSvcEditor.html#r0">db</a> = <a class="code" href="classDatabase.html#e0">Database::instance</a>();
00023     
00024     setResizePolicy(QScrollView::AutoOneFit);
00025     setMargins(5,5,5,5);
00026     
00027     connect(<a class="code" href="classIncomeSvcEditor.html#r0">db</a>, SIGNAL(accountsChanged()), <span class="keyword">this</span>, SLOT(<a class="code" href="classIncomeSvcEditor.html#k6">updateAccounts</a>()));
00028     <a class="code" href="classIncomeSvcEditor.html#r1">accounts</a> = <a class="code" href="classIncomeSvcEditor.html#r0">db</a>-&gt;<a class="code" href="classDatabase.html#a36">getAccountsList</a>();
00029    
00030     <a class="code" href="classIncomeSvcEditor.html#r2">frame</a> = <span class="keyword">new</span> QFrame(viewport());
00031     <a class="code" href="classIncomeSvcEditor.html#r3">vBoxLayout</a> = <span class="keyword">new</span> QVBoxLayout(<a class="code" href="classIncomeSvcEditor.html#r2">frame</a>);
00032     
00033     <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o0">topFrame</a> = <span class="keyword">new</span> QFrame(<a class="code" href="classIncomeSvcEditor.html#r2">frame</a>);
00034     <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o1">topHBoxLayout</a> = <span class="keyword">new</span> QHBoxLayout(<a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o0">topFrame</a>);
00035     
00036     
00037     <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o2">label</a> = <span class="keyword">new</span> QLabel(<span class="stringliteral">"&lt;b&gt;Income:&lt;/b&gt;"</span>, <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o0">topFrame</a>);
00038     <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o3">addButton</a> = <span class="keyword">new</span> QPushButton(
00039             QIconSet( QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/addElement.png"</span>) ),
00040             <span class="stringliteral">"Add to Income"</span>, <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o0">topFrame</a>);
00041     connect(<a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o3">addButton</a>, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classIncomeSvcEditor.html#k2">addIncome</a>()));
00042 
00043     <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o1">topHBoxLayout</a>-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o2">label</a>);
00044     <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o1">topHBoxLayout</a>-&gt;addStretch();
00045     <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o1">topHBoxLayout</a>-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o3">addButton</a>);
00046     
00047     <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o4">bottomFrame</a> = <span class="keyword">new</span> QFrame(<a class="code" href="classIncomeSvcEditor.html#r2">frame</a>);
00048     <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o5">bottomHBoxLayout</a> = <span class="keyword">new</span> QHBoxLayout(<a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o4">bottomFrame</a>);
00049     <a class="code" href="classIncomeSvcEditor.html#d0">listSection</a>(&amp;<a class="code" href="classIncomeSvcEditor.html#r4">income</a>);
00050     
00051     <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o5">bottomHBoxLayout</a>-&gt;addSpacing(5);
00052     <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o5">bottomHBoxLayout</a>-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o6">listView</a>);
00053     
00054     <a class="code" href="classIncomeSvcEditor.html#r3">vBoxLayout</a>-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o0">topFrame</a>);
00055     <a class="code" href="classIncomeSvcEditor.html#r3">vBoxLayout</a>-&gt;addSpacing(5);
00056 
00057     <a class="code" href="classIncomeSvcEditor.html#r3">vBoxLayout</a>-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o4">bottomFrame</a>);
00058     <a class="code" href="classIncomeSvcEditor.html#r3">vBoxLayout</a>-&gt;addSpacing(10);
00059    
00060 
00061     <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o0">topFrame</a> = <span class="keyword">new</span> QFrame(<a class="code" href="classIncomeSvcEditor.html#r2">frame</a>);
00062     <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o1">topHBoxLayout</a> = <span class="keyword">new</span> QHBoxLayout(<a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o0">topFrame</a>);
00063     
00064     <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o2">label</a> = <span class="keyword">new</span> QLabel(<span class="stringliteral">"&lt;b&gt;Expenses:&lt;/b&gt;"</span>, <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o0">topFrame</a>);
00065     <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o3">addButton</a> = <span class="keyword">new</span> QPushButton(
00066             QIconSet( QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/addElement.png"</span>) ),
00067             <span class="stringliteral">"Add to Expenses"</span>, <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o0">topFrame</a>);
00068     connect(<a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o3">addButton</a>, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classIncomeSvcEditor.html#k3">addExpenses</a>()));
00069     
00070     <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o1">topHBoxLayout</a>-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o2">label</a>);
00071     <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o1">topHBoxLayout</a>-&gt;addStretch();
00072     <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o1">topHBoxLayout</a>-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o3">addButton</a>);
00073     
00074     <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o4">bottomFrame</a> = <span class="keyword">new</span> QFrame(<a class="code" href="classIncomeSvcEditor.html#r2">frame</a>);
00075     <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o5">bottomHBoxLayout</a> = <span class="keyword">new</span> QHBoxLayout(<a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o4">bottomFrame</a>);
00076     <a class="code" href="classIncomeSvcEditor.html#d0">listSection</a>(&amp;<a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>);
00077     
00078     <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o5">bottomHBoxLayout</a>-&gt;addSpacing(5);
00079     <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o5">bottomHBoxLayout</a>-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o6">listView</a>);
00080     
00081     <a class="code" href="classIncomeSvcEditor.html#r3">vBoxLayout</a>-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o0">topFrame</a>);
00082     <a class="code" href="classIncomeSvcEditor.html#r3">vBoxLayout</a>-&gt;addSpacing(5);
00083     <a class="code" href="classIncomeSvcEditor.html#r3">vBoxLayout</a>-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o4">bottomFrame</a>);
00084     
00085     <a class="code" href="classIncomeSvcEditor.html#r3">vBoxLayout</a>-&gt;addStretch();
00086     
00087     addChild(<a class="code" href="classIncomeSvcEditor.html#r2">frame</a>);
00088 }
00089 
<a name="l00090"></a><a class="code" href="classIncomeSvcEditor.html#a1">00090</a> <a class="code" href="classIncomeSvcEditor.html#a1">IncomeSvcEditor::~IncomeSvcEditor</a>()
00091 {
00092     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o8">elements</a>.size(); i++)
00093         <span class="keyword">delete</span> <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o8">elements</a>[i];
00094     <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o8">elements</a>.clear();
00095     
00096     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o8">elements</a>.size(); i++)
00097         <span class="keyword">delete</span> <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o8">elements</a>[i];
00098     <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o8">elements</a>.clear();
00099 }
00100 
<a name="l00101"></a><a class="code" href="classIncomeSvcEditor.html#d0">00101</a> <span class="keywordtype">void</span> <a class="code" href="classIncomeSvcEditor.html#d0">IncomeSvcEditor::listSection</a>(<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html">ElementSection</a> *section)
00102 {
00103     QPtrList&lt;EditorElement&gt; list;
00104     <span class="keywordflow">if</span>(section == &amp;<a class="code" href="classIncomeSvcEditor.html#r4">income</a>)
00105         list = <a class="code" href="classIncomeSvcEditor.html#r0">db</a>-&gt;<a class="code" href="classDatabase.html#a18">getElements</a>(Database::incomeSvcIncome);
00106     <span class="keywordflow">if</span>(section == &amp;<a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>)
00107         list = <a class="code" href="classIncomeSvcEditor.html#r0">db</a>-&gt;<a class="code" href="classDatabase.html#a18">getElements</a>(Database::incomeSvcExpenses);
00108     
00109     <span class="keywordflow">if</span>(!list.isEmpty())
00110     {
00111         section-&gt;<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o6">listView</a> = <span class="keyword">new</span> QFrame(section-&gt;<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o4">bottomFrame</a>);
00112         section-&gt;<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o7">vBoxLayout</a> = <span class="keyword">new</span> QVBoxLayout(section-&gt;<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o6">listView</a>);
00113         
00114         <a class="code" href="classEditorElement.html">EditorElement</a> *element;
00115         
00116         <span class="keywordflow">for</span>(element = list.first(); element; element = list.next())
00117         {
00118             connect(element, SIGNAL(changed(<span class="keywordtype">void</span>*)), <span class="keyword">this</span>, SLOT(<a class="code" href="classIncomeSvcEditor.html#k0">updateSection</a>(<span class="keywordtype">void</span>*)));
00119             section-&gt;<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o8">elements</a>.push_back(element);
00120             section-&gt;<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o7">vBoxLayout</a>-&gt;addWidget(element-&gt;<a class="code" href="classEditorElement.html#a2">getFrame</a>(section-&gt;<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o6">listView</a>, (<span class="keywordtype">void</span>*)section));
00121         }
00122     }
00123     <span class="keywordflow">else</span>
00124         section-&gt;<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o6">listView</a> = <span class="keyword">new</span> QLabel(<span class="stringliteral">"No Entries"</span>, section-&gt;<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o4">bottomFrame</a>);
00125     
00126 }
00127 
<a name="l00128"></a><a class="code" href="classIncomeSvcEditor.html#d1">00128</a> <span class="keywordtype">void</span> <a class="code" href="classIncomeSvcEditor.html#d1">IncomeSvcEditor::deleteSection</a>(<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html">ElementSection</a> *section)
00129 {
00130     <span class="keywordflow">if</span>(section-&gt;<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o8">elements</a>.size())
00131     {
00132         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; section-&gt;<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o8">elements</a>.size(); i++)
00133             <span class="keyword">delete</span> section-&gt;<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o8">elements</a>[i];
00134         section-&gt;<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o8">elements</a>.clear();
00135         <span class="keyword">delete</span> section-&gt;<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o7">vBoxLayout</a>;
00136     }
00137     <span class="keyword">delete</span> section-&gt;<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o6">listView</a>;
00138 }
00139 
<a name="l00140"></a><a class="code" href="classIncomeSvcEditor.html#k0">00140</a> <span class="keywordtype">void</span> <a class="code" href="classIncomeSvcEditor.html#k0">IncomeSvcEditor::updateSection</a>(<span class="keywordtype">void</span> *newSection)
00141 {
00142     <a class="code" href="structIncomeSvcEditor_1_1ElementSection.html">ElementSection</a> *section = (<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html">ElementSection</a>*)newSection;
00143     <a class="code" href="classIncomeSvcEditor.html#d1">deleteSection</a>(section);
00144     <a class="code" href="classIncomeSvcEditor.html#d0">listSection</a>(section);
00145     
00146     <span class="keywordflow">if</span>(section == &amp;<a class="code" href="classIncomeSvcEditor.html#r4">income</a>) 
00147     {
00148         <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o5">bottomHBoxLayout</a>-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o6">listView</a>);
00149         <a class="code" href="classIncomeSvcEditor.html#r4">income</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o6">listView</a>-&gt;show();
00150     }
00151     <span class="keywordflow">if</span>(section == &amp;<a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>) 
00152     {
00153         <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o5">bottomHBoxLayout</a>-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o6">listView</a>);
00154         <a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>.<a class="code" href="structIncomeSvcEditor_1_1ElementSection.html#o6">listView</a>-&gt;show();
00155     }
00156 }
00157 
<a name="l00158"></a><a class="code" href="classIncomeSvcEditor.html#k1">00158</a> <span class="keywordtype">void</span> <a class="code" href="classIncomeSvcEditor.html#k1">IncomeSvcEditor::addElement</a>(<span class="keywordtype">int</span> category)
00159 {
00160     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.main = <span class="keyword">new</span> QDialog;
00161     <span class="keywordflow">switch</span>((Database::editorCategories)category)
00162     {
00163         <span class="keywordflow">case</span> Database::incomeSvcIncome:
00164             <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.main-&gt;setCaption(<span class="stringliteral">"Add to Income"</span>);
00165             <span class="keywordflow">break</span>;
00166         <span class="keywordflow">case</span> Database::incomeSvcExpenses:
00167             <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.main-&gt;setCaption(<span class="stringliteral">"Add to Expenses"</span>);
00168             <span class="keywordflow">break</span>;
00169         <span class="keywordflow">default</span>:
00170             <span class="keywordflow">break</span>;
00171     }
00172     
00173     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.vBoxLayout = <span class="keyword">new</span> QVBoxLayout(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.main);
00174     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.vBoxLayout-&gt;setMargin(5);
00175     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.vBoxLayout-&gt;setSpacing(5);
00176     
00177     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccount = <span class="keyword">new</span> QRadioButton(<span class="stringliteral">"One Account"</span>, <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.main);
00178     connect(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccount, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classIncomeSvcEditor.html#k4">oneAccountToggled</a>()));
00179         
00180     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountFrame = <span class="keyword">new</span> QFrame(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.main);
00181     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountHBoxLayout = <span class="keyword">new</span> QHBoxLayout(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountFrame);
00182     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountHBoxLayout-&gt;setSpacing(5);
00183     
00184     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountHBoxLayout-&gt;addSpacing(5);
00185     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountLabel = <span class="keyword">new</span> QLabel(<span class="stringliteral">"Account:"</span>, <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountFrame);
00186     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountHBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountLabel);
00187     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountEdit = <span class="keyword">new</span> <a class="code" href="classAccountList.html">AccountList</a>(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountFrame, 0, <a class="code" href="classIncomeSvcEditor.html#r1">accounts</a>);
00188     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountHBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountEdit);
00189     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountHBoxLayout-&gt;addStretch();
00190        
00191     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccount = <span class="keyword">new</span> QRadioButton(<span class="stringliteral">"Range of Accounts"</span>, <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.main);
00192     connect(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccount, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classIncomeSvcEditor.html#k5">rangeAccountToggled</a>()));
00193        
00194     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccountFrame = <span class="keyword">new</span> QFrame(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.main, <span class="stringliteral">"rangeAccountFrame"</span>);
00195     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccountHBoxLayout = <span class="keyword">new</span> QHBoxLayout(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccountFrame);
00196     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccountHBoxLayout-&gt;addSpacing(5);
00197     
00198     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccountFrameList = <span class="keyword">new</span> QFrame(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccountFrame);
00199     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccountFrameListVBoxLayout = <span class="keyword">new</span> QVBoxLayout(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccountFrameList);
00200     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccountFrameListVBoxLayout-&gt;setSpacing(5);
00201     
00202     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEndFrame = <span class="keyword">new</span> QFrame(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccountFrameList);
00203     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEndHBoxLayout = <span class="keyword">new</span> QHBoxLayout(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEndFrame);
00204     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEndHBoxLayout-&gt;setSpacing(5);
00205     
00206     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBegin = <span class="keyword">new</span> QLabel(<span class="stringliteral">"Begin:"</span>, <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEndFrame);
00207     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEndHBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBegin);
00208     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEdit = <span class="keyword">new</span> <a class="code" href="classAccountList.html">AccountList</a>(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEndFrame, 0, <a class="code" href="classIncomeSvcEditor.html#r1">accounts</a>);
00209     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEndHBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEdit);
00210     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBetween = <span class="keyword">new</span> QLabel(<span class="stringliteral">"to"</span>, <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEndFrame);
00211     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEndHBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBetween);
00212     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeEndEdit = <span class="keyword">new</span> <a class="code" href="classAccountList.html">AccountList</a>(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEndFrame, 0, <a class="code" href="classIncomeSvcEditor.html#r1">accounts</a>);
00213     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEndHBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeEndEdit);
00214     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEndHBoxLayout-&gt;addStretch();
00215     
00216     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDescFrame = <span class="keyword">new</span> QFrame(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccountFrameList);
00217     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDescFrameHBoxLayout = <span class="keyword">new</span> QHBoxLayout(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDescFrame);
00218     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDescFrameHBoxLayout-&gt;setSpacing(5);
00219     
00220     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDesc = <span class="keyword">new</span> QLabel(<span class="stringliteral">"Description:"</span>, <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDescFrame);
00221     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDescFrameHBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDesc);
00222     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDescEdit = <span class="keyword">new</span> QLineEdit(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDescFrame);
00223     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDescFrameHBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDescEdit);
00224     
00225     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccountFrameListVBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEndFrame);
00226     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccountFrameListVBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDescFrame);
00227     
00228     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccountHBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccountFrameList);
00229     
00230         
00231     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.buttonFrame = <span class="keyword">new</span> QFrame(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.main);
00232     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.buttonFrameHBoxLayout = <span class="keyword">new</span> QHBoxLayout(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.buttonFrame);
00233     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.buttonFrameHBoxLayout-&gt;setSpacing(5);
00234     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.buttonFrameHBoxLayout-&gt;addStretch();
00235     
00236     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.ok = <span class="keyword">new</span> QPushButton(QIconSet(QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/addElement.png"</span>)),
00237             <span class="stringliteral">"Add"</span>, <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.buttonFrame);
00238     connect(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.ok, SIGNAL(clicked()), <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.main, SLOT(accept()));
00239     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.buttonFrameHBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.ok);
00240     
00241     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.cancel = <span class="keyword">new</span> QPushButton(QIconSet(QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/cancelButton.png"</span>)),
00242             <span class="stringliteral">"Cancel"</span>, <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.buttonFrame);
00243     connect(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.cancel, SIGNAL(clicked()), <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.main, SLOT(reject()));
00244     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.buttonFrameHBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.cancel);
00245     
00246     
00247     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.vBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccount);
00248     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.vBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountFrame);
00249     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.vBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccount);
00250     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.vBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccountFrame);
00251     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.vBoxLayout-&gt;addSpacing(10);
00252     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.vBoxLayout-&gt;addWidget(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.buttonFrame);
00253     
00254     <a class="code" href="classIncomeSvcEditor.html#k4">oneAccountToggled</a>();
00255     
00256     <span class="keywordflow">if</span>(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.main-&gt;exec())
00257     {
00258         <span class="keywordflow">if</span>(<a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccount-&gt;isChecked())
00259             <a class="code" href="classIncomeSvcEditor.html#r0">db</a>-&gt;<a class="code" href="classDatabase.html#a19">createElement</a>((Database::editorCategories)category,
00260                                       <span class="stringliteral">"0"</span>, <span class="stringliteral">""</span>, <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountEdit-&gt;accountNumber(), <span class="stringliteral">""</span>);
00261         <span class="keywordflow">else</span>
00262             <a class="code" href="classIncomeSvcEditor.html#r0">db</a>-&gt;<a class="code" href="classDatabase.html#a19">createElement</a>((Database::editorCategories)category,
00263                                       <span class="stringliteral">"1"</span>, <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDescEdit-&gt;text(),
00264                                       <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEdit-&gt;accountNumber(), <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeEndEdit-&gt;accountNumber());
00265     }
00266     
00267     <span class="keyword">delete</span> <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.main;
00268 }
00269 
<a name="l00270"></a><a class="code" href="classIncomeSvcEditor.html#k4">00270</a> <span class="keywordtype">void</span> <a class="code" href="classIncomeSvcEditor.html#k4">IncomeSvcEditor::oneAccountToggled</a>()
00271 {
00272     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccount-&gt;setChecked(<span class="keyword">true</span>);
00273     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccount-&gt;setChecked(<span class="keyword">false</span>);
00274     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountLabel-&gt;setEnabled(<span class="keyword">true</span>);
00275     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountEdit-&gt;setEnabled(<span class="keyword">true</span>);
00276     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBegin-&gt;setEnabled(<span class="keyword">false</span>);
00277     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEdit-&gt;setEnabled(<span class="keyword">false</span>);
00278     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBetween-&gt;setEnabled(<span class="keyword">false</span>);
00279     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeEndEdit-&gt;setEnabled(<span class="keyword">false</span>);
00280     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDesc-&gt;setEnabled(<span class="keyword">false</span>);
00281     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDescEdit-&gt;setEnabled(<span class="keyword">false</span>);
00282 }
00283 
<a name="l00284"></a><a class="code" href="classIncomeSvcEditor.html#k5">00284</a> <span class="keywordtype">void</span> <a class="code" href="classIncomeSvcEditor.html#k5">IncomeSvcEditor::rangeAccountToggled</a>()
00285 {
00286     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeAccount-&gt;setChecked(<span class="keyword">true</span>);
00287     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccount-&gt;setChecked(<span class="keyword">false</span>);
00288     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountLabel-&gt;setEnabled(<span class="keyword">false</span>);
00289     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.oneAccountEdit-&gt;setEnabled(<span class="keyword">false</span>);
00290     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBegin-&gt;setEnabled(<span class="keyword">true</span>);
00291     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBeginEdit-&gt;setEnabled(<span class="keyword">true</span>);
00292     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeBetween-&gt;setEnabled(<span class="keyword">true</span>);
00293     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeEndEdit-&gt;setEnabled(<span class="keyword">true</span>);
00294     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDesc-&gt;setEnabled(<span class="keyword">true</span>);
00295     <a class="code" href="classIncomeSvcEditor.html#r32">dialog</a>.rangeDescEdit-&gt;setEnabled(<span class="keyword">true</span>);
00296 }
00297 
<a name="l00298"></a><a class="code" href="classIncomeSvcEditor.html#k2">00298</a> <span class="keywordtype">void</span> <a class="code" href="classIncomeSvcEditor.html#k2">IncomeSvcEditor::addIncome</a>()
00299 {
00300     <a class="code" href="classIncomeSvcEditor.html#k1">addElement</a>((<span class="keywordtype">int</span>)Database::incomeSvcIncome);
00301     <a class="code" href="classIncomeSvcEditor.html#k0">updateSection</a>(&amp;<a class="code" href="classIncomeSvcEditor.html#r4">income</a>);
00302 }
00303 
<a name="l00304"></a><a class="code" href="classIncomeSvcEditor.html#k3">00304</a> <span class="keywordtype">void</span> <a class="code" href="classIncomeSvcEditor.html#k3">IncomeSvcEditor::addExpenses</a>()
00305 {
00306     <a class="code" href="classIncomeSvcEditor.html#k1">addElement</a>((<span class="keywordtype">int</span>)Database::incomeSvcExpenses);
00307     <a class="code" href="classIncomeSvcEditor.html#k0">updateSection</a>(&amp;<a class="code" href="classIncomeSvcEditor.html#r5">expenses</a>);
00308 }
00309 
<a name="l00310"></a><a class="code" href="classIncomeSvcEditor.html#k6">00310</a> <span class="keywordtype">void</span> <a class="code" href="classIncomeSvcEditor.html#k6">IncomeSvcEditor::updateAccounts</a>()
00311 {
00312     <a class="code" href="classIncomeSvcEditor.html#r1">accounts</a> = <a class="code" href="classIncomeSvcEditor.html#r0">db</a>-&gt;<a class="code" href="classDatabase.html#a36">getAccountsList</a>();
00313 }
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Fri Sep 17 18:11:39 2004 for General Ledger by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.8 </small></address>
</body>
</html>
