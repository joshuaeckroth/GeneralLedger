<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>General Ledger: reportsEditorEntityWidget.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>reportsEditorEntityWidget.cpp</h1><a href="reportsEditorEntityWidget_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/* General Ledger, Copyright (C) 2004  Joshua Eckroth &lt;josh@eckroth.net&gt;</span>
00002 <span class="comment"> * http://www.eckroth.net/software/genledg</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
00005 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
00006 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
00007 <span class="comment"> * (at your option) any later version.</span>
00008 <span class="comment"> * </span>
00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00012 <span class="comment"> * GNU General Public License for more details.</span>
00013 <span class="comment"> * </span>
00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
00015 <span class="comment"> * along with this program; if not, write to the Free Software</span>
00016 <span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  US</span>
00017 <span class="comment">*/</span>
00018 
00019 <span class="preprocessor">#include &lt;vector&gt;</span>
00020 <span class="keyword">using</span> std::vector;
00021 
00022 <span class="preprocessor">#include &lt;qwidget.h&gt;</span>
00023 <span class="preprocessor">#include &lt;qlayout.h&gt;</span>
00024 <span class="preprocessor">#include &lt;qlabel.h&gt;</span>
00025 <span class="preprocessor">#include &lt;qpushbutton.h&gt;</span>
00026 
00027 <span class="preprocessor">#include "<a class="code" href="reportsEditorEntityWidget_8h.html">reportsEditorEntityWidget.h</a>"</span>
00028 <span class="preprocessor">#include "<a class="code" href="reportsEditor_8h.html">reportsEditor.h</a>"</span>
00029 <span class="preprocessor">#include "config.h"</span>
00030 
<a name="l00031"></a><a class="code" href="classReportsEditorEntityWidget.html#a0">00031</a> <a class="code" href="classReportsEditorEntityWidget.html#a0">ReportsEditorEntityWidget::ReportsEditorEntityWidget</a>(
00032                 <a class="codeRef" doxygen="doxy-qt.tag:" href="qwidget.html">QWidget</a> *parent, <span class="keyword">const</span> <span class="keywordtype">char</span> *name,
00033                 <a class="code" href="structReportsEditor_1_1Entity.html">ReportsEditor::Entity</a> *newData)
00034     : <a class="codeRef" doxygen="doxy-qt.tag:" href="qwidget.html">QWidget</a>(parent,name), data(newData)
00035 {
00036     reportsEditor = <a class="code" href="classReportsEditor.html#e0">ReportsEditor::instance</a>();
00037 
00038 
00039     hBoxLayout = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qhboxlayout.html">QHBoxLayout</a>(<span class="keyword">this</span>, 0, 2,
00040                     <span class="stringliteral">"reportsEditorEntityWidget::hBoxLayout"</span>);
00041 
00042     <a class="code" href="classReportsEditorEntityWidget.html#r3">descLabel</a> = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qlabel.html">QLabel</a>(<a class="code" href="classReportsEditorEntityWidget.html#r1">data</a>-&gt;<a class="code" href="structReportsEditor_1_1Entity.html#o5">desc</a>, <span class="keyword">this</span>,
00043                     <span class="stringliteral">"reportsEditorEntityWidget::descLabel"</span>);
00044 
00045     <span class="keywordflow">if</span>(<a class="code" href="classReportsEditorEntityWidget.html#r1">data</a>-&gt;<a class="code" href="structReportsEditor_1_1Entity.html#o4">accountEnd</a> == <span class="stringliteral">""</span>)
00046     {
00047         <a class="code" href="classReportsEditorEntityWidget.html#r4">accountsLabel</a> = <span class="keyword">new</span> QLabel(<a class="code" href="classReportsEditorEntityWidget.html#r1">data</a>-&gt;<a class="code" href="structReportsEditor_1_1Entity.html#o3">accountBegin</a>, <span class="keyword">this</span>,
00048                         <span class="stringliteral">"reportsEditorEntityWidget::accountsLabel"</span>);
00049     }
00050     <span class="keywordflow">else</span>
00051     {
00052         <a class="code" href="classReportsEditorEntityWidget.html#r4">accountsLabel</a> = <span class="keyword">new</span> QLabel(<a class="code" href="classReportsEditorEntityWidget.html#r1">data</a>-&gt;<a class="code" href="structReportsEditor_1_1Entity.html#o3">accountBegin</a> + <span class="stringliteral">" - "</span> + <a class="code" href="classReportsEditorEntityWidget.html#r1">data</a>-&gt;<a class="code" href="structReportsEditor_1_1Entity.html#o4">accountEnd</a>,
00053                         <span class="keyword">this</span>, <span class="stringliteral">"reportsEditorEntityWidget::accountsLabel"</span>);
00054     }
00055 
00056     <a class="code" href="classReportsEditorEntityWidget.html#r5">upButton</a> = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(<a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>(
00057                     QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/entityUp.png"</span>)),
00058                     <span class="stringliteral">""</span>, <span class="keyword">this</span>, <span class="stringliteral">"reportsEditorEntityWidget::upButton"</span>);
00059     <a class="code" href="classReportsEditorEntityWidget.html#r5">upButton</a>-&gt;setFixedSize(28, 28);
00060     connect(<a class="code" href="classReportsEditorEntityWidget.html#r5">upButton</a>, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classReportsEditorEntityWidget.html#k0">moveUp</a>()));
00061 
00062     Q_UINT16 firstIndex = reportsEditor-&gt;<a class="code" href="classReportsEditor.html#a9">getFirstIndex</a>(
00063                             (ReportsEditor::Editor)(<a class="code" href="classReportsEditorEntityWidget.html#r1">data</a>-&gt;<a class="code" href="structReportsEditor_1_1Entity.html#o0">editor</a>),
00064                             (ReportsEditor::Section)(<a class="code" href="classReportsEditorEntityWidget.html#r1">data</a>-&gt;<a class="code" href="structReportsEditor_1_1Entity.html#o1">section</a>));
00065     <span class="keywordflow">if</span>(firstIndex == 0 || <a class="code" href="classReportsEditorEntityWidget.html#r1">data</a>-&gt;<a class="code" href="structReportsEditor_1_1Entity.html#o2">index</a> == firstIndex)
00066     {
00067         <a class="code" href="classReportsEditorEntityWidget.html#r5">upButton</a>-&gt;setEnabled(<span class="keyword">false</span>);
00068     }
00069 
00070     <a class="code" href="classReportsEditorEntityWidget.html#r6">downButton</a> = <span class="keyword">new</span> QPushButton(<a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>(
00071                     QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/entityDown.png"</span>)),
00072                     <span class="stringliteral">""</span>, <span class="keyword">this</span>, <span class="stringliteral">"reportsEditorEntityWidget::downButton"</span>);
00073     <a class="code" href="classReportsEditorEntityWidget.html#r6">downButton</a>-&gt;setFixedSize(28, 28);
00074     connect(<a class="code" href="classReportsEditorEntityWidget.html#r6">downButton</a>, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classReportsEditorEntityWidget.html#k1">moveDown</a>()));
00075 
00076     <span class="keywordflow">if</span>(<a class="code" href="classReportsEditorEntityWidget.html#r1">data</a>-&gt;<a class="code" href="structReportsEditor_1_1Entity.html#o2">index</a> == reportsEditor-&gt;<a class="code" href="classReportsEditor.html#a10">getLastIndex</a>(
00077                             (ReportsEditor::Editor)(<a class="code" href="classReportsEditorEntityWidget.html#r1">data</a>-&gt;<a class="code" href="structReportsEditor_1_1Entity.html#o0">editor</a>),
00078                             (ReportsEditor::Section)(<a class="code" href="classReportsEditorEntityWidget.html#r1">data</a>-&gt;<a class="code" href="structReportsEditor_1_1Entity.html#o1">section</a>)))
00079     {
00080         <a class="code" href="classReportsEditorEntityWidget.html#r6">downButton</a>-&gt;setEnabled(<span class="keyword">false</span>);
00081     }
00082 
00083     <a class="code" href="classReportsEditorEntityWidget.html#r7">removeButton</a> = <span class="keyword">new</span> QPushButton(<a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>(
00084                     QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/entityRemove.png"</span>)),
00085                     <span class="stringliteral">""</span>, <span class="keyword">this</span>, <span class="stringliteral">"reportsEditorEntityWidget::removeButton"</span>);
00086     <a class="code" href="classReportsEditorEntityWidget.html#r7">removeButton</a>-&gt;setFixedSize(28, 28);
00087     connect(<a class="code" href="classReportsEditorEntityWidget.html#r7">removeButton</a>, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classReportsEditorEntityWidget.html#k2">remove</a>()));
00088 
00089     hBoxLayout-&gt;addWidget(<a class="code" href="classReportsEditorEntityWidget.html#r3">descLabel</a>);
00090     hBoxLayout-&gt;addWidget(<a class="code" href="classReportsEditorEntityWidget.html#r4">accountsLabel</a>);
00091     hBoxLayout-&gt;addWidget(<a class="code" href="classReportsEditorEntityWidget.html#r5">upButton</a>);
00092     hBoxLayout-&gt;addWidget(<a class="code" href="classReportsEditorEntityWidget.html#r6">downButton</a>);
00093     hBoxLayout-&gt;addWidget(<a class="code" href="classReportsEditorEntityWidget.html#r7">removeButton</a>);
00094 }
00095 
<a name="l00096"></a><a class="code" href="classReportsEditorEntityWidget.html#k0">00096</a> <span class="keywordtype">void</span> <a class="code" href="classReportsEditorEntityWidget.html#k0">ReportsEditorEntityWidget::moveUp</a>()
00097 {
00098     reportsEditor-&gt;<a class="code" href="classReportsEditor.html#a12">moveEntityUp</a>(<a class="code" href="classReportsEditorEntityWidget.html#r1">data</a>);
00099     emit <a class="code" href="classReportsEditorEntityWidget.html#l0">changed</a>();
00100 }
00101 
<a name="l00102"></a><a class="code" href="classReportsEditorEntityWidget.html#k1">00102</a> <span class="keywordtype">void</span> <a class="code" href="classReportsEditorEntityWidget.html#k1">ReportsEditorEntityWidget::moveDown</a>()
00103 {
00104     reportsEditor-&gt;<a class="code" href="classReportsEditor.html#a13">moveEntityDown</a>(<a class="code" href="classReportsEditorEntityWidget.html#r1">data</a>);
00105     emit <a class="code" href="classReportsEditorEntityWidget.html#l0">changed</a>();
00106 }
00107 
<a name="l00108"></a><a class="code" href="classReportsEditorEntityWidget.html#k2">00108</a> <span class="keywordtype">void</span> <a class="code" href="classReportsEditorEntityWidget.html#k2">ReportsEditorEntityWidget::remove</a>()
00109 {
00110     reportsEditor-&gt;<a class="code" href="classReportsEditor.html#a15">removeEntity</a>(<a class="code" href="classReportsEditorEntityWidget.html#r1">data</a>);
00111     emit <a class="code" href="classReportsEditorEntityWidget.html#l0">changed</a>();
00112 }
00113 
00114 
00115 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Jan 16 16:23:28 2005 for General Ledger by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
