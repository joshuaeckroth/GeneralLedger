<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>General Ledger: JournalData class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>JournalData Class Reference</h1>Interface to Journal Entry data.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="journalData_8h-source.html">journalData.h</a>&gt;</code>
<p>
Inherits <a class="elRef" doxygen="doxy-qt.tag:" href="qobject.html">QObject</a>.
<p>
<a href="classJournalData-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#w2">SortField</a> { <a class="el" href="classJournalData.html#w2w0">NoSort</a>, 
<a class="el" href="classJournalData.html#w2w1">SortDate</a>
 }</td></tr>

<tr><td colspan=2><br><h2>Signals</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#l0">journalTmpChanged</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#l1">saveToDisk</a> ()</td></tr>

<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a0">destroy</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a1">initiate</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a2">readStream</a> (<a class="elRef" doxygen="doxy-qt.tag:" href="qiodevice.html">QIODevice</a> *device, Q_UINT16 journalTmpCount, Q_UINT32 journalCount)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a3">writeStream</a> (<a class="elRef" doxygen="doxy-qt.tag:" href="qiodevice.html">QIODevice</a> *device)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a4">clearData</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>std::vector&lt; <a class="el" href="structJournalData_1_1JournalRecord.html">JournalRecord</a> * &gt;&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a5">getJournalTmpRecords</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>std::vector&lt; <a class="el" href="structJournalData_1_1JournalRecord.html">JournalRecord</a> * &gt;&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a6">getJournalRecords</a> (<a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> accountBegin="", <a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> accountEnd="", <a class="elRef" doxygen="doxy-qt.tag:" href="qdate.html">QDate</a> periodBegin=<a class="elRef" doxygen="doxy-qt.tag:" href="qdate.html">QDate</a>(), <a class="elRef" doxygen="doxy-qt.tag:" href="qdate.html">QDate</a> periodEnd=<a class="elRef" doxygen="doxy-qt.tag:" href="qdate.html">QDate</a>(), <a class="el" href="classJournalData.html#w2">SortField</a>=NoSort) const </td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a7">updateTmpRecord</a> (const Q_UINT16 key, const <a class="elRef" doxygen="doxy-qt.tag:" href="qdate.html">QDate</a> date, const <a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> account, const <a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> reference, const <a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> desc, const Q_INT64 amount)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a8">deleteTmpRecord</a> (const Q_UINT16 key)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>Q_UINT16&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a9">getNextTmpRecordKey</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a10">saveAndClear</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a11">journalTmpDebit</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a12">journalTmpCredit</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a13">journalTmpBalance</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a14">journalTmpEmpty</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a15">convertCurrency</a> (const Q_INT64 amount) const </td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a16">accountHasEntries</a> (const <a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> id) const </td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>Q_UINT16&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a17">getJournalTmpCount</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>Q_UINT32&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a18">getJournalCount</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a19">importCSV</a> (<a class="elRef" doxygen="doxy-qt.tag:" href="qtextstream.html">QTextStream</a> &amp;in)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#a20">exportCSV</a> (<a class="elRef" doxygen="doxy-qt.tag:" href="qtextstream.html">QTextStream</a> &amp;out)</td></tr>

<tr><td colspan=2><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classJournalData.html">JournalData</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#e0">instance</a> ()</td></tr>

<tr><td colspan=2><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#d0">JournalData</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#d1">~JournalData</a> ()</td></tr>

<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>std::vector&lt; <a class="el" href="structJournalData_1_1JournalRecord.html">JournalRecord</a> * &gt;&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#r0">journalTmpVec</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>std::vector&lt; <a class="el" href="structJournalData_1_1JournalRecord.html">JournalRecord</a> * &gt;&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#r1">journalVec</a></td></tr>

<tr><td colspan=2><br><h2>Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classJournalData.html">JournalData</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classJournalData.html#v0">thisInstance</a> = 0</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Interface to Journal Entry data. 
<p>
<dl compact><dt><b>Note:</b></dt><dd>In this class, "journalTmp" data is accessed, which is the unsaved data in the Journal Entry tab. The other data, that of saved journal entries, is accessed only by <a class="el" href="classReportsGenerator.html">ReportsGenerator</a>, except for the function in this class that saves journalTmp data to the journal (<a class="el" href="classJournalData.html#a10">JournalData::saveAndClear()</a>). </dd></dl>

<p>

<p>
Definition at line <a class="el" href="journalData_8h-source.html#l00039">39</a> of file <a class="el" href="journalData_8h-source.html">journalData.h</a>.<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="w2" doxytag="JournalData::SortField" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="classJournalData.html#w2">JournalData::SortField</a>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sorting types for <a class="el" href="classJournalData.html#a6">getJournalRecords()</a>. 
<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="w2w0" doxytag="NoSort" ></a>NoSort</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="w2w1" doxytag="SortDate" ></a>SortDate</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="journalData_8h-source.html#l00058">58</a> of file <a class="el" href="journalData_8h-source.html">journalData.h</a>.
<p>
<div class="fragment"><pre>00058                        {
00059             <a class="code" href="classJournalData.html#w2w0">NoSort</a>,
00060             <a class="code" href="classJournalData.html#w2w1">SortDate</a>
00061         };
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="d0" doxytag="JournalData::JournalData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> JournalData::JournalData </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00466">466</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
<div class="fragment"><pre>00466                          : <a class="codeRef" doxygen="doxy-qt.tag:" href="qobject.html">QObject</a>(0, <span class="stringliteral">"JournalData"</span>)
00467 {}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="JournalData::~JournalData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> JournalData::~<a class="el" href="classJournalData.html">JournalData</a> </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00469">469</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
<div class="fragment"><pre>00470 {}
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="e0" doxytag="JournalData::instance" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classJournalData.html">JournalData</a> * JournalData::instance </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve the single instance of this class. 
<p>
<a class="el" href="classClient.html">Client</a> should start this instance, and use <a class="el" href="classJournalData.html#a0">JournalData::destroy()</a> inside its destructor. 
<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00037">37</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="journalData_8cpp-source.html#l00035">thisInstance</a>.
<p>
Referenced by <a class="el" href="importExport_8cpp-source.html#l00188">ImportExport::exportCSV()</a>, <a class="el" href="homeTab_8cpp-source.html#l00044">HomeTab::HomeTab()</a>, <a class="el" href="importExport_8cpp-source.html#l00044">ImportExport::importCSV()</a>, <a class="el" href="client_8cpp-source.html#l00048">Client::initiate()</a>, <a class="el" href="accountsData_8cpp-source.html#l00048">AccountsData::initiate()</a>, <a class="el" href="journalEditCurrency_8cpp-source.html#l00027">JournalEditCurrency::JournalEditCurrency()</a>, <a class="el" href="journalSummary_8cpp-source.html#l00028">JournalSummary::JournalSummary()</a>, <a class="el" href="journalTab_8cpp-source.html#l00039">JournalTab::JournalTab()</a>, <a class="el" href="journalTable_8cpp-source.html#l00046">JournalTable::JournalTable()</a>, <a class="el" href="main_8cpp-source.html#l00067">main()</a>, and <a class="el" href="reportsGenerator_8cpp-source.html#l00802">ReportsGenerator::ReportsGenerator()</a>.
<p>
<div class="fragment"><pre>00038 {
00039     <span class="keywordflow">if</span>(<a class="code" href="classJournalData.html#v0">thisInstance</a> == 0)
00040         <a class="code" href="classJournalData.html#v0">thisInstance</a> = <span class="keyword">new</span> <a class="code" href="classJournalData.html">JournalData</a>;
00041     <span class="keywordflow">return</span> <a class="code" href="classJournalData.html#v0">thisInstance</a>;
00042 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="JournalData::destroy" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void JournalData::destroy </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destroy the single instance of this class. 
<p>
Should only be used by <a class="el" href="classClient.html">Client</a>. 
<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00044">44</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="journalData_8cpp-source.html#l00035">thisInstance</a>.
<p>
Referenced by <a class="el" href="main_8cpp-source.html#l00067">main()</a>.
<p>
<div class="fragment"><pre>00045 {
00046     <span class="keywordflow">if</span>(<a class="code" href="classJournalData.html#v0">thisInstance</a> != 0)
00047         <span class="keyword">delete</span> <a class="code" href="classJournalData.html#v0">thisInstance</a>;
00048 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="JournalData::initiate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void JournalData::initiate </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initiate the class. 
<p>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00050">50</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
Referenced by <a class="el" href="main_8cpp-source.html#l00067">main()</a>.
<p>
<div class="fragment"><pre>00051 {}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="JournalData::readStream" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void JournalData::readStream </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="doxy-qt.tag:" href="qiodevice.html">QIODevice</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>device</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>Q_UINT16&nbsp;</td>
          <td class="mdname" nowrap> <em>journalTmpCount</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>Q_UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>journalCount</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00053">53</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="journalData_8h-source.html#l00048">JournalData::JournalRecord::account</a>, <a class="el" href="journalData_8h-source.html#l00054">JournalData::JournalRecord::amount</a>, <a class="el" href="journalData_8h-source.html#l00046">JournalData::JournalRecord::date</a>, <a class="el" href="journalData_8h-source.html#l00052">JournalData::JournalRecord::desc</a>, <a class="el" href="journalData_8h-source.html#l00158">journalTmpVec</a>, <a class="el" href="journalData_8h-source.html#l00159">journalVec</a>, and <a class="el" href="journalData_8h-source.html#l00050">JournalData::JournalRecord::reference</a>.
<p>
Referenced by <a class="el" href="client_8cpp-source.html#l00122">Client::open()</a>.
<p>
<div class="fragment"><pre>00055 {
00056     <a class="codeRef" doxygen="doxy-qt.tag:" href="qdatastream.html">QDataStream</a> in(device);
00057 
00058     Q_UINT16 i = 0;
00059     <span class="keywordflow">while</span>(i++ != journalTmpCount)
00060     {
00061         JournalRecord *journalTmpRecord = <span class="keyword">new</span> JournalRecord;
00062         in &gt;&gt; journalTmpRecord-&gt;date
00063            &gt;&gt; journalTmpRecord-&gt;account
00064            &gt;&gt; journalTmpRecord-&gt;reference
00065            &gt;&gt; journalTmpRecord-&gt;desc
00066            &gt;&gt; journalTmpRecord-&gt;amount;
00067         <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.push_back(journalTmpRecord);
00068     }
00069 
00070     Q_UINT32 j = 0;
00071     <span class="keywordflow">while</span>(j++ != journalCount)
00072     {
00073         JournalRecord *journalRecord = <span class="keyword">new</span> JournalRecord;
00074         in &gt;&gt; journalRecord-&gt;date
00075            &gt;&gt; journalRecord-&gt;account
00076            &gt;&gt; journalRecord-&gt;reference
00077            &gt;&gt; journalRecord-&gt;desc
00078            &gt;&gt; journalRecord-&gt;amount;
00079         <a class="code" href="classJournalData.html#r1">journalVec</a>.push_back(journalRecord);
00080     }
00081 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="JournalData::writeStream" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void JournalData::writeStream </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="doxy-qt.tag:" href="qiodevice.html">QIODevice</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>device</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00083">83</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="journalData_8h-source.html#l00158">journalTmpVec</a>, and <a class="el" href="journalData_8h-source.html#l00159">journalVec</a>.
<p>
Referenced by <a class="el" href="client_8cpp-source.html#l00198">Client::saveToDisk()</a>.
<p>
<div class="fragment"><pre>00084 {
00085     <a class="codeRef" doxygen="doxy-qt.tag:" href="qdatastream.html">QDataStream</a> out(device);
00086 
00087     <span class="keywordflow">for</span>(vector&lt;JournalRecord*&gt;::const_iterator it = <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.begin();
00088                     it != <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.end(); ++it)
00089     {
00090         <span class="keywordflow">if</span>((*it) != 0)
00091         {
00092             out &lt;&lt; (*it)-&gt;date
00093                 &lt;&lt; (*it)-&gt;account
00094                 &lt;&lt; (*it)-&gt;reference
00095                 &lt;&lt; (*it)-&gt;desc
00096                 &lt;&lt; (*it)-&gt;amount;
00097         }
00098     }
00099 
00100     <span class="keywordflow">for</span>(vector&lt;JournalRecord*&gt;::const_iterator it = <a class="code" href="classJournalData.html#r1">journalVec</a>.begin();
00101                     it != <a class="code" href="classJournalData.html#r1">journalVec</a>.end(); ++it)
00102     {
00103         <span class="keywordflow">if</span>((*it) != 0)
00104         {
00105             out &lt;&lt; (*it)-&gt;date
00106                 &lt;&lt; (*it)-&gt;account
00107                 &lt;&lt; (*it)-&gt;reference
00108                 &lt;&lt; (*it)-&gt;desc
00109                 &lt;&lt; (*it)-&gt;amount;
00110         }
00111     }
00112 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="JournalData::clearData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void JournalData::clearData </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00114">114</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="journalData_8h-source.html#l00158">journalTmpVec</a>, and <a class="el" href="journalData_8h-source.html#l00159">journalVec</a>.
<p>
Referenced by <a class="el" href="client_8cpp-source.html#l00182">Client::close()</a>.
<p>
<div class="fragment"><pre>00115 {
00116     <span class="keywordflow">for</span>(vector&lt;JournalRecord*&gt;::iterator it = <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.begin();
00117         it != <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.end(); ++it)
00118     {
00119         <span class="keywordflow">if</span>((*it) != 0)
00120             <span class="keyword">delete</span> (*it);
00121     }
00122 
00123     <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.clear();
00124 
00125     <span class="keywordflow">for</span>(vector&lt;JournalRecord*&gt;::iterator it = <a class="code" href="classJournalData.html#r1">journalVec</a>.begin();
00126         it != <a class="code" href="classJournalData.html#r1">journalVec</a>.end(); ++it)
00127     {
00128         <span class="keywordflow">if</span>((*it) != 0)
00129             <span class="keyword">delete</span> (*it);
00130     }
00131 
00132     <a class="code" href="classJournalData.html#r1">journalVec</a>.clear();
00133 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="JournalData::getJournalTmpRecords" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> vector&lt; <a class="el" href="structJournalData_1_1JournalRecord.html">JournalData::JournalRecord</a> * &gt; JournalData::getJournalTmpRecords </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve all data for all tmp records. 
<p>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00163">163</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="journalData_8h-source.html#l00158">journalTmpVec</a>.
<p>
Referenced by <a class="el" href="journalTable_8cpp-source.html#l00077">JournalTable::populate()</a>, and <a class="el" href="reportsGenerator_8cpp-source.html#l00646">ReportsGenerator::printJournalEntryReport()</a>.
<p>
<div class="fragment"><pre>00164 {
00165     <span class="keywordflow">return</span> <a class="code" href="classJournalData.html#r0">journalTmpVec</a>;
00166 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="JournalData::getJournalRecords" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> vector&lt; <a class="el" href="structJournalData_1_1JournalRecord.html">JournalData::JournalRecord</a> * &gt; JournalData::getJournalRecords </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>accountBegin</em> = "", </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>accountEnd</em> = "", </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="elRef" doxygen="doxy-qt.tag:" href="qdate.html">QDate</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>periodBegin</em> = <a class="elRef" doxygen="doxy-qt.tag:" href="qdate.html">QDate</a>(), </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="elRef" doxygen="doxy-qt.tag:" href="qdate.html">QDate</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>periodEnd</em> = <a class="elRef" doxygen="doxy-qt.tag:" href="qdate.html">QDate</a>(), </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classJournalData.html#w2">SortField</a>&nbsp;</td>
          <td class="mdname" nowrap> = NoSort</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve all data for all journal records. 
<p>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00168">168</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="journalData_8h-source.html#l00159">journalVec</a>, <a class="el" href="classJournalData.html#w2w0">NoSort</a>, and <a class="el" href="classJournalData.html#w2w1">SortDate</a>.
<p>
Referenced by <a class="el" href="reportsGenerator_8cpp-source.html#l00380">ReportsGenerator::genBalanceSheetReport()</a>, <a class="el" href="reportsGenerator_8cpp-source.html#l00051">ReportsGenerator::genGeneralDetailReport()</a>, <a class="el" href="reportsGenerator_8cpp-source.html#l00269">ReportsGenerator::genGeneralTrialReport()</a>, and <a class="el" href="reportsGenerator_8cpp-source.html#l00482">ReportsGenerator::genIncomeSvcReport()</a>.
<p>
<div class="fragment"><pre>00171 {
00172     vector&lt;JournalData::JournalRecord*&gt; journal;
00173 
00174     <span class="keywordflow">for</span>(vector&lt;JournalData::JournalRecord*&gt;::const_iterator it = <a class="code" href="classJournalData.html#r1">journalVec</a>.begin();
00175                     it != <a class="code" href="classJournalData.html#r1">journalVec</a>.end(); ++it)
00176     {
00177         <span class="keywordflow">if</span>(accountBegin != <span class="stringliteral">""</span> &amp;&amp; QString::localeAwareCompare(
00178             (*it)-&gt;account, accountBegin) &lt; 0)
00179             <span class="keywordflow">continue</span>;
00180         <span class="keywordflow">if</span>(accountEnd != <span class="stringliteral">""</span> &amp;&amp; QString::localeAwareCompare(
00181             (*it)-&gt;account, accountEnd) &gt; 0)
00182             <span class="keywordflow">continue</span>;
00183         <span class="keywordflow">if</span>(periodBegin.isValid() &amp;&amp; (*it)-&gt;date &lt; periodBegin)
00184             <span class="keywordflow">continue</span>;
00185         <span class="keywordflow">if</span>(periodEnd.isValid() &amp;&amp; (*it)-&gt;date &gt; periodEnd)
00186             <span class="keywordflow">continue</span>;
00187         
00188         <span class="keywordflow">if</span>(sort == <a class="code" href="classJournalData.html#w2w1">SortDate</a>)
00189         {
00190             <span class="keywordtype">bool</span> inserted = <span class="keyword">false</span>;
00191 
00192             <span class="keywordflow">for</span>(vector&lt;JournalData::JournalRecord*&gt;::iterator innerIt = journal.begin();
00193                             innerIt != journal.end(); ++innerIt)
00194             {
00195                 <span class="keywordflow">if</span>((*it)-&gt;date &lt; (*innerIt)-&gt;date)
00196                 {
00197                     journal.insert(innerIt, *it);
00198                     
00199                     inserted = <span class="keyword">true</span>;
00200                     <span class="keywordflow">break</span>;
00201                 }
00202             }
00203 
00204             <span class="keywordflow">if</span>(!inserted)
00205                 journal.push_back(*it);
00206         }
00207         <span class="keywordflow">if</span>(sort == <a class="code" href="classJournalData.html#w2w0">NoSort</a>)
00208             journal.push_back(*it);
00209     }
00210 
00211     <span class="keywordflow">return</span> journal;
00212 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="JournalData::updateTmpRecord" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void JournalData::updateTmpRecord </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const Q_UINT16&nbsp;</td>
          <td class="mdname" nowrap> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="elRef" doxygen="doxy-qt.tag:" href="qdate.html">QDate</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>date</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>account</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>reference</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const Q_INT64&nbsp;</td>
          <td class="mdname" nowrap> <em>amount</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Update a record. 
<p>
This function updates an existing record or inserts a new record if the "key" is not found in the database. Requires an identifying key, and the new data. 
<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00215">215</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="journalData_8h-source.html#l00048">JournalData::JournalRecord::account</a>, <a class="el" href="journalData_8h-source.html#l00054">JournalData::JournalRecord::amount</a>, <a class="el" href="journalData_8h-source.html#l00046">JournalData::JournalRecord::date</a>, <a class="el" href="journalData_8h-source.html#l00052">JournalData::JournalRecord::desc</a>, <a class="el" href="classJournalData.html#l0">journalTmpChanged()</a>, <a class="el" href="journalData_8h-source.html#l00158">journalTmpVec</a>, <a class="el" href="journalData_8h-source.html#l00050">JournalData::JournalRecord::reference</a>, and <a class="el" href="classJournalData.html#l1">saveToDisk()</a>.
<p>
Referenced by <a class="el" href="journalTable_8cpp-source.html#l00207">JournalTable::updateDb()</a>.
<p>
<div class="fragment"><pre>00218 {
00219     <span class="keywordflow">if</span>((Q_UINT16)<a class="code" href="classJournalData.html#r0">journalTmpVec</a>.size() &lt; key)  <span class="comment">// add a new entry</span>
00220     {
00221         JournalRecord *journalTmpRecord = <span class="keyword">new</span> JournalRecord;
00222         journalTmpRecord-&gt;date = date;
00223         journalTmpRecord-&gt;account = account;
00224         journalTmpRecord-&gt;reference = reference;
00225         journalTmpRecord-&gt;desc = desc;
00226         journalTmpRecord-&gt;amount = amount;
00227         <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.push_back(journalTmpRecord);
00228     }
00229     <span class="keywordflow">else</span>  <span class="comment">// update existing entry</span>
00230     {
00231         JournalRecord *journalTmpRecord = <a class="code" href="classJournalData.html#r0">journalTmpVec</a>[key-1];
00232         journalTmpRecord-&gt;date = date;
00233         journalTmpRecord-&gt;account = account;
00234         journalTmpRecord-&gt;reference = reference;
00235         journalTmpRecord-&gt;desc = desc;
00236         journalTmpRecord-&gt;amount = amount;
00237     }
00238 
00239     emit <a class="code" href="classJournalData.html#l1">saveToDisk</a>();
00240 
00241     emit <a class="code" href="classJournalData.html#l0">journalTmpChanged</a>();
00242 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="JournalData::deleteTmpRecord" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void JournalData::deleteTmpRecord </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const Q_UINT16&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Delete a record. 
<p>
Requires an identifying key 
<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00244">244</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="classJournalData.html#l0">journalTmpChanged()</a>, <a class="el" href="journalData_8h-source.html#l00158">journalTmpVec</a>, and <a class="el" href="classJournalData.html#l1">saveToDisk()</a>.
<p>
Referenced by <a class="el" href="journalTable_8cpp-source.html#l00160">JournalTable::remove()</a>.
<p>
<div class="fragment"><pre>00245 {
00246     <span class="keyword">delete</span> <a class="code" href="classJournalData.html#r0">journalTmpVec</a>[key-1];
00247     <a class="code" href="classJournalData.html#r0">journalTmpVec</a>[key-1] = 0;
00248 
00249     emit <a class="code" href="classJournalData.html#l1">saveToDisk</a>();
00250 
00251     emit <a class="code" href="classJournalData.html#l0">journalTmpChanged</a>();
00252 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="JournalData::getNextTmpRecordKey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> Q_UINT16 JournalData::getNextTmpRecordKey </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve a new record key. 
<p>
To create a new record, grab this key, then use it in an update. 
<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00254">254</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="journalData_8h-source.html#l00158">journalTmpVec</a>.
<p>
Referenced by <a class="el" href="journalTable_8cpp-source.html#l00126">JournalTable::insert()</a>.
<p>
<div class="fragment"><pre>00255 {
00256     <span class="keywordflow">return</span> (<a class="code" href="classJournalData.html#r0">journalTmpVec</a>.size() + 1);
00257 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="JournalData::saveAndClear" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void JournalData::saveAndClear </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Save and Clear all records to the "journal" database. 
<p>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00259">259</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="classJournalData.html#l0">journalTmpChanged()</a>, <a class="el" href="journalData_8h-source.html#l00158">journalTmpVec</a>, <a class="el" href="journalData_8h-source.html#l00159">journalVec</a>, and <a class="el" href="classJournalData.html#l1">saveToDisk()</a>.
<p>
Referenced by <a class="el" href="homeTab_8cpp-source.html#l00601">HomeTab::closeClient()</a>.
<p>
<div class="fragment"><pre>00260 {
00261     <span class="keywordflow">for</span>(vector&lt;JournalRecord*&gt;::const_iterator it = <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.begin();
00262                     it != <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.end(); ++it)
00263     {
00264         <span class="keywordflow">if</span>((*it) != 0)
00265             <a class="code" href="classJournalData.html#r1">journalVec</a>.push_back(*it);
00266     }
00267 
00268     <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.clear();
00269 
00270     emit <a class="code" href="classJournalData.html#l1">saveToDisk</a>();
00271 
00272     emit <a class="code" href="classJournalData.html#l0">journalTmpChanged</a>();
00273 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="JournalData::journalTmpDebit" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> JournalData::journalTmpDebit </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve the total debit of the journal records. 
<p>
<dl compact><dt><b>Note:</b></dt><dd>This is mostly for <a class="el" href="classJournalSummary.html">JournalSummary</a> </dd></dl>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00297">297</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="journalData_8cpp-source.html#l00275">convertCurrency()</a>, and <a class="el" href="journalData_8h-source.html#l00158">journalTmpVec</a>.
<p>
Referenced by <a class="el" href="journalSummary_8cpp-source.html#l00112">JournalSummary::updateSummary()</a>.
<p>
<div class="fragment"><pre>00298 {
00299     Q_INT64 sum = 0;
00300     <span class="keywordflow">for</span>(vector&lt;JournalRecord*&gt;::const_iterator it = <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.begin();
00301                     it != <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.end(); ++it)
00302     {
00303         <span class="keywordflow">if</span>((*it) != 0)
00304         {
00305             <span class="keywordflow">if</span>((*it)-&gt;amount &gt; 0)
00306                 sum += (*it)-&gt;amount;
00307         }
00308     }
00309     
00310     <span class="keywordflow">return</span> <a class="code" href="classJournalData.html#a15">convertCurrency</a>(sum);
00311 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="JournalData::journalTmpCredit" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> JournalData::journalTmpCredit </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve the total credit of the journal records. 
<p>
<dl compact><dt><b>Note:</b></dt><dd>This is mostly for <a class="el" href="classJournalSummary.html">JournalSummary</a> </dd></dl>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00313">313</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="journalData_8cpp-source.html#l00275">convertCurrency()</a>, and <a class="el" href="journalData_8h-source.html#l00158">journalTmpVec</a>.
<p>
Referenced by <a class="el" href="journalSummary_8cpp-source.html#l00112">JournalSummary::updateSummary()</a>.
<p>
<div class="fragment"><pre>00314 {
00315     Q_INT64 sum = 0;
00316     <span class="keywordflow">for</span>(vector&lt;JournalRecord*&gt;::const_iterator it = <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.begin();
00317                     it != <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.end(); ++it)
00318     {
00319         <span class="keywordflow">if</span>((*it) != 0)
00320         {
00321             <span class="keywordflow">if</span>((*it)-&gt;amount &lt; 0)
00322                 sum += abs((*it)-&gt;amount);
00323         }
00324     }
00325 
00326     <span class="keywordflow">return</span> <a class="code" href="classJournalData.html#a15">convertCurrency</a>(sum);
00327 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="JournalData::journalTmpBalance" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> JournalData::journalTmpBalance </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve the total balance of the journal records. 
<p>
<dl compact><dt><b>Note:</b></dt><dd>This is mostly for <a class="el" href="classJournalSummary.html">JournalSummary</a> </dd></dl>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00329">329</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="journalData_8cpp-source.html#l00275">convertCurrency()</a>, and <a class="el" href="journalData_8h-source.html#l00158">journalTmpVec</a>.
<p>
Referenced by <a class="el" href="journalSummary_8cpp-source.html#l00112">JournalSummary::updateSummary()</a>.
<p>
<div class="fragment"><pre>00330 {
00331     Q_INT64 sum = 0;
00332     <span class="keywordflow">for</span>(vector&lt;JournalRecord*&gt;::const_iterator it = <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.begin(); it != <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.end(); ++it)
00333     {
00334         <span class="keywordflow">if</span>((*it) != 0)
00335             sum += (*it)-&gt;amount;
00336     }
00337 
00338     <span class="keywordflow">return</span> <a class="code" href="classJournalData.html#a15">convertCurrency</a>(sum);
00339 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="JournalData::journalTmpEmpty" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool JournalData::journalTmpEmpty </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Check if the journalTmp table is empty. 
<p>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00341">341</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="journalData_8h-source.html#l00158">journalTmpVec</a>.
<p>
Referenced by <a class="el" href="homeTab_8cpp-source.html#l00601">HomeTab::closeClient()</a>, <a class="el" href="journalTab_8cpp-source.html#l00131">JournalTab::exportCSV()</a>, and <a class="el" href="journalTab_8cpp-source.html#l00201">JournalTab::printJournal()</a>.
<p>
<div class="fragment"><pre>00342 {
00343     <span class="keywordtype">bool</span> empty = <span class="keyword">true</span>;
00344     <span class="keywordflow">for</span>(vector&lt;JournalRecord*&gt;::const_iterator it = <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.begin(); it != <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.end(); ++it)
00345     {
00346         <span class="keywordflow">if</span>((*it) != 0)
00347         {
00348             empty = <span class="keyword">false</span>;
00349             <span class="keywordflow">break</span>;
00350         }
00351     }
00352 
00353     <span class="keywordflow">return</span> empty;
00354 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="JournalData::convertCurrency" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> JournalData::convertCurrency </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const Q_INT64&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>amount</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00275">275</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
Referenced by <a class="el" href="journalEditCurrency_8cpp-source.html#l00027">JournalEditCurrency::JournalEditCurrency()</a>, <a class="el" href="journalData_8cpp-source.html#l00329">journalTmpBalance()</a>, <a class="el" href="journalData_8cpp-source.html#l00313">journalTmpCredit()</a>, and <a class="el" href="journalData_8cpp-source.html#l00297">journalTmpDebit()</a>.
<p>
<div class="fragment"><pre>00276 {
00277     <span class="keywordtype">bool</span> neg = <span class="keyword">false</span>;
00278     <span class="keywordflow">if</span>(amount &lt; 0)
00279     neg = <span class="keyword">true</span>;
00280 
00281     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> sumString = QString::number(std::abs(amount));
00282     <span class="keywordtype">int</span> length = sumString.length();
00283 
00284     <span class="keywordflow">if</span>(length == 1)
00285         sumString = sumString.insert(0, <span class="stringliteral">"0.0"</span>);
00286     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(length == 2)
00287         sumString = sumString.insert(0, <span class="stringliteral">"0."</span>);
00288     <span class="keywordflow">else</span>
00289         sumString = sumString.insert(length - 2, <span class="charliteral">'.'</span>);
00290 
00291     <span class="keywordflow">if</span>(neg)
00292     sumString = sumString.insert(0, <span class="stringliteral">"-"</span>);
00293 
00294     <span class="keywordflow">return</span> sumString;
00295 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="JournalData::accountHasEntries" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool JournalData::accountHasEntries </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="elRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>id</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00356">356</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="journalData_8h-source.html#l00159">journalVec</a>.
<p>
Referenced by <a class="el" href="accountsData_8cpp-source.html#l00179">AccountsData::accountHasEntries()</a>.
<p>
<div class="fragment"><pre>00357 {
00358     <span class="comment">// decision: only check journal records, not journalTmp</span>
00359 
00360     <span class="keywordtype">bool</span> hasEntries = <span class="keyword">false</span>;
00361     <span class="keywordflow">for</span>(vector&lt;JournalRecord*&gt;::const_iterator it = <a class="code" href="classJournalData.html#r1">journalVec</a>.begin(); it != <a class="code" href="classJournalData.html#r1">journalVec</a>.end(); ++it)
00362     {
00363         <span class="keywordflow">if</span>((*it) != 0)
00364         {
00365             <span class="keywordflow">if</span>((*it)-&gt;account == <span class="keywordtype">id</span>)
00366             {
00367                 hasEntries = <span class="keyword">true</span>;
00368                 <span class="keywordflow">break</span>;
00369             }
00370         }
00371     }
00372 
00373     <span class="keywordflow">return</span> hasEntries;
00374 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="JournalData::getJournalTmpCount" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> Q_UINT16 JournalData::getJournalTmpCount </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00135">135</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="journalData_8h-source.html#l00158">journalTmpVec</a>.
<p>
Referenced by <a class="el" href="client_8cpp-source.html#l00198">Client::saveToDisk()</a>.
<p>
<div class="fragment"><pre>00136 {
00137     Q_UINT16 count = 0;
00138 
00139     <span class="keywordflow">for</span>(vector&lt;JournalRecord*&gt;::const_iterator it = <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.begin();
00140                     it != <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.end(); ++it)
00141     {
00142         <span class="keywordflow">if</span>((*it) != 0)
00143             count++;
00144     }
00145 
00146     <span class="keywordflow">return</span> count;
00147 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="JournalData::getJournalCount" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> Q_UINT32 JournalData::getJournalCount </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00149">149</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="journalData_8h-source.html#l00159">journalVec</a>.
<p>
Referenced by <a class="el" href="client_8cpp-source.html#l00198">Client::saveToDisk()</a>.
<p>
<div class="fragment"><pre>00150 {
00151     Q_UINT32 count = 0;
00152 
00153     <span class="keywordflow">for</span>(vector&lt;JournalRecord*&gt;::const_iterator it = <a class="code" href="classJournalData.html#r1">journalVec</a>.begin();
00154                     it != <a class="code" href="classJournalData.html#r1">journalVec</a>.end(); ++it)
00155     {
00156         <span class="keywordflow">if</span>((*it) != 0)
00157             count++;
00158     }
00159 
00160     <span class="keywordflow">return</span> count;
00161 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="JournalData::importCSV" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void JournalData::importCSV </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="doxy-qt.tag:" href="qtextstream.html">QTextStream</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>in</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00376">376</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="journalData_8h-source.html#l00048">JournalData::JournalRecord::account</a>, <a class="el" href="journalData_8h-source.html#l00054">JournalData::JournalRecord::amount</a>, <a class="el" href="journalData_8h-source.html#l00046">JournalData::JournalRecord::date</a>, <a class="el" href="journalData_8h-source.html#l00052">JournalData::JournalRecord::desc</a>, <a class="el" href="classJournalData.html#l0">journalTmpChanged()</a>, <a class="el" href="journalData_8h-source.html#l00158">journalTmpVec</a>, <a class="el" href="journalData_8h-source.html#l00050">JournalData::JournalRecord::reference</a>, and <a class="el" href="classJournalData.html#l1">saveToDisk()</a>.
<p>
Referenced by <a class="el" href="importExport_8cpp-source.html#l00044">ImportExport::importCSV()</a>.
<p>
<div class="fragment"><pre>00377 {
00378     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> line;
00379     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> dateString;
00380     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> account;
00381     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> reference;
00382     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> desc;
00383     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> debit;
00384     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> credit;
00385 
00386     <a class="codeRef" doxygen="doxy-qt.tag:" href="qregexp.html">QRegExp</a> regExp(<span class="stringliteral">"^\"?(\\d\\d\\d\\d-\\d\\d-\\d\\d)\"?,"</span>
00387                    <span class="stringliteral">"\"?(?\\d+-?\\d*)\"?,\"?(.*)\"?,\"?(.*)\"?,"</span>
00388                    <span class="stringliteral">"\"?(\\(?-?\\d*\\.?\\d?\\d?\\)?)\"?,"</span>
00389                    <span class="stringliteral">"\"?(\\(?-?\\d*\\.?\\d?\\d?\\)?)\"?"</span>);
00390 
00391     <span class="keywordflow">while</span>(line = in.readLine())
00392     {
00393         <span class="keywordflow">if</span>(regExp.search(line) == -1)
00394             <span class="keywordflow">continue</span>;
00395 
00396         dateString = regExp.cap(1);
00397         account = regExp.cap(2);
00398         reference = regExp.cap(3);
00399         desc = regExp.cap(4);
00400         debit = regExp.cap(5);
00401         credit = regExp.cap(6);
00402 
00403         <a class="codeRef" doxygen="doxy-qt.tag:" href="qdate.html">QDate</a> date = QDate::fromString(dateString, Qt::ISODate);
00404 
00405         Q_INT64 amount = 0;
00406 
00407         <a class="codeRef" doxygen="doxy-qt.tag:" href="qregexp.html">QRegExp</a> creditRegExp(<span class="stringliteral">"^\\(?-?(\\d*)\\.?(\\d?\\d?)\\)?$"</span>);
00408         creditRegExp.search(credit);
00409 
00410         amount = 0 - (creditRegExp.cap(1) + creditRegExp.cap(2)).toULongLong();
00411 
00412         <a class="codeRef" doxygen="doxy-qt.tag:" href="qregexp.html">QRegExp</a> debitRegExp(<span class="stringliteral">"^(\\d+)\\.?(\\d?\\d?)$"</span>);
00413         debitRegExp.search(debit);
00414 
00415         amount += (debitRegExp.cap(1) + debitRegExp.cap(2)).toULongLong();
00416 
00417  
00418         JournalRecord *journalRecord = <span class="keyword">new</span> JournalRecord;
00419 
00420         journalRecord-&gt;date = date;
00421         journalRecord-&gt;account = account;
00422         journalRecord-&gt;reference = reference;
00423         journalRecord-&gt;desc = desc;
00424         journalRecord-&gt;amount = amount;
00425 
00426         <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.push_back(journalRecord);
00427     }
00428 
00429     emit <a class="code" href="classJournalData.html#l1">saveToDisk</a>();
00430 
00431     emit <a class="code" href="classJournalData.html#l0">journalTmpChanged</a>();
00432 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="JournalData::exportCSV" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void JournalData::exportCSV </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="doxy-qt.tag:" href="qtextstream.html">QTextStream</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>out</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00434">434</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
References <a class="el" href="main_8cpp-source.html#l00034">formatCurrency()</a>, and <a class="el" href="journalData_8h-source.html#l00158">journalTmpVec</a>.
<p>
Referenced by <a class="el" href="importExport_8cpp-source.html#l00188">ImportExport::exportCSV()</a>.
<p>
<div class="fragment"><pre>00435 {
00436     out &lt;&lt; <span class="stringliteral">"\"Date\",\"Account\",\"Reference\","</span>
00437            <span class="stringliteral">"\"Description\",\"Debit\",\"Credit\"\n"</span>;
00438 
00439     <span class="keywordflow">for</span>(vector&lt;JournalRecord*&gt;::const_iterator it = <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.begin();
00440         it != <a class="code" href="classJournalData.html#r0">journalTmpVec</a>.end(); ++it)
00441     {
00442         out &lt;&lt; <span class="stringliteral">"\""</span> &lt;&lt; (*it)-&gt;date.toString(Qt::ISODate) &lt;&lt; <span class="stringliteral">"\",\""</span>
00443             &lt;&lt; (*it)-&gt;account &lt;&lt; <span class="stringliteral">"\",\""</span> &lt;&lt; (*it)-&gt;reference &lt;&lt; <span class="stringliteral">"\",\""</span>
00444             &lt;&lt; (*it)-&gt;desc &lt;&lt; <span class="stringliteral">"\","</span>;
00445 
00446         <span class="keywordflow">if</span>((*it)-&gt;amount &lt; 0)
00447         {
00448             out &lt;&lt; <span class="stringliteral">"0.00,"</span>
00449                 &lt;&lt; <a class="code" href="main_8h.html#a0">formatCurrency</a>((*it)-&gt;amount, <span class="keyword">false</span>);
00450         }
00451         <span class="keywordflow">else</span> <span class="keywordflow">if</span>((*it)-&gt;amount &gt; 0)
00452         {
00453             out &lt;&lt; <a class="code" href="main_8h.html#a0">formatCurrency</a>((*it)-&gt;amount, <span class="keyword">false</span>)
00454                 &lt;&lt; <span class="stringliteral">",0.00"</span>;
00455         }
00456         <span class="keywordflow">else</span>
00457         {
00458             out &lt;&lt; <span class="stringliteral">"0.00,0.00"</span>;
00459         }
00460         out &lt;&lt; <span class="stringliteral">"\n"</span>;
00461     }
00462 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="l0" doxytag="JournalData::journalTmpChanged" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void JournalData::journalTmpChanged </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [signal]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Emitted when something in the journalTmp table has been changed. 
<p>

<p>
Referenced by <a class="el" href="journalData_8cpp-source.html#l00244">deleteTmpRecord()</a>, <a class="el" href="journalData_8cpp-source.html#l00376">importCSV()</a>, <a class="el" href="journalData_8cpp-source.html#l00259">saveAndClear()</a>, and <a class="el" href="journalData_8cpp-source.html#l00215">updateTmpRecord()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="l1" doxytag="JournalData::saveToDisk" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void JournalData::saveToDisk </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [signal]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="journalData_8cpp-source.html#l00244">deleteTmpRecord()</a>, <a class="el" href="journalData_8cpp-source.html#l00376">importCSV()</a>, <a class="el" href="journalData_8cpp-source.html#l00259">saveAndClear()</a>, and <a class="el" href="journalData_8cpp-source.html#l00215">updateTmpRecord()</a>.    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="v0" doxytag="JournalData::thisInstance" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classJournalData.html">JournalData</a> * <a class="el" href="classJournalData.html#v0">JournalData::thisInstance</a> = 0<code> [static, private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="journalData_8cpp-source.html#l00035">35</a> of file <a class="el" href="journalData_8cpp-source.html">journalData.cpp</a>.
<p>
Referenced by <a class="el" href="journalData_8cpp-source.html#l00044">destroy()</a>, and <a class="el" href="journalData_8cpp-source.html#l00037">instance()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="JournalData::journalTmpVec" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> std::vector&lt;<a class="el" href="structJournalData_1_1JournalRecord.html">JournalRecord</a>*&gt; <a class="el" href="classJournalData.html#r0">JournalData::journalTmpVec</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="journalData_8h-source.html#l00158">158</a> of file <a class="el" href="journalData_8h-source.html">journalData.h</a>.
<p>
Referenced by <a class="el" href="journalData_8cpp-source.html#l00114">clearData()</a>, <a class="el" href="journalData_8cpp-source.html#l00244">deleteTmpRecord()</a>, <a class="el" href="journalData_8cpp-source.html#l00434">exportCSV()</a>, <a class="el" href="journalData_8cpp-source.html#l00135">getJournalTmpCount()</a>, <a class="el" href="journalData_8cpp-source.html#l00163">getJournalTmpRecords()</a>, <a class="el" href="journalData_8cpp-source.html#l00254">getNextTmpRecordKey()</a>, <a class="el" href="journalData_8cpp-source.html#l00376">importCSV()</a>, <a class="el" href="journalData_8cpp-source.html#l00329">journalTmpBalance()</a>, <a class="el" href="journalData_8cpp-source.html#l00313">journalTmpCredit()</a>, <a class="el" href="journalData_8cpp-source.html#l00297">journalTmpDebit()</a>, <a class="el" href="journalData_8cpp-source.html#l00341">journalTmpEmpty()</a>, <a class="el" href="journalData_8cpp-source.html#l00053">readStream()</a>, <a class="el" href="journalData_8cpp-source.html#l00259">saveAndClear()</a>, <a class="el" href="journalData_8cpp-source.html#l00215">updateTmpRecord()</a>, and <a class="el" href="journalData_8cpp-source.html#l00083">writeStream()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r1" doxytag="JournalData::journalVec" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> std::vector&lt;<a class="el" href="structJournalData_1_1JournalRecord.html">JournalRecord</a>*&gt; <a class="el" href="classJournalData.html#r1">JournalData::journalVec</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="journalData_8h-source.html#l00159">159</a> of file <a class="el" href="journalData_8h-source.html">journalData.h</a>.
<p>
Referenced by <a class="el" href="journalData_8cpp-source.html#l00356">accountHasEntries()</a>, <a class="el" href="journalData_8cpp-source.html#l00114">clearData()</a>, <a class="el" href="journalData_8cpp-source.html#l00149">getJournalCount()</a>, <a class="el" href="journalData_8cpp-source.html#l00168">getJournalRecords()</a>, <a class="el" href="journalData_8cpp-source.html#l00053">readStream()</a>, <a class="el" href="journalData_8cpp-source.html#l00259">saveAndClear()</a>, and <a class="el" href="journalData_8cpp-source.html#l00083">writeStream()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="journalData_8h-source.html">journalData.h</a><li><a class="el" href="journalData_8cpp-source.html">journalData.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Sun Jan 16 16:23:30 2005 for General Ledger by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
