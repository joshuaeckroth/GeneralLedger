<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>General Ledger: reportsEditorDialog.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>reportsEditorDialog.cpp</h1><a href="reportsEditorDialog_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/* General Ledger, Copyright (C) 2004  Joshua Eckroth &lt;josh@eckroth.net&gt;</span>
00002 <span class="comment"> * http://www.eckroth.net/software/genledg</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
00005 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
00006 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
00007 <span class="comment"> * (at your option) any later version.</span>
00008 <span class="comment"> * </span>
00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00012 <span class="comment"> * GNU General Public License for more details.</span>
00013 <span class="comment"> * </span>
00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
00015 <span class="comment"> * along with this program; if not, write to the Free Software</span>
00016 <span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  US</span>
00017 <span class="comment">*/</span>
00018 
00019 <span class="preprocessor">#include &lt;qdialog.h&gt;</span>
00020 <span class="preprocessor">#include &lt;qstring.h&gt;</span>
00021 <span class="preprocessor">#include &lt;qlayout.h&gt;</span>
00022 <span class="preprocessor">#include &lt;qradiobutton.h&gt;</span>
00023 <span class="preprocessor">#include &lt;qlineedit.h&gt;</span>
00024 <span class="preprocessor">#include &lt;qcombobox.h&gt;</span>
00025 <span class="preprocessor">#include &lt;qpushbutton.h&gt;</span>
00026 <span class="preprocessor">#include &lt;qlabel.h&gt;</span>
00027 
00028 <span class="preprocessor">#include "<a class="code" href="reportsEditorDialog_8h.html">reportsEditorDialog.h</a>"</span>
00029 <span class="preprocessor">#include "<a class="code" href="accountsData_8h.html">accountsData.h</a>"</span>
00030 <span class="preprocessor">#include "config.h"</span>
00031 
<a name="l00032"></a><a class="code" href="classReportsEditorDialog.html#a0">00032</a> <a class="code" href="classReportsEditorDialog.html#a0">ReportsEditorDialog::ReportsEditorDialog</a>(<a class="codeRef" doxygen="doxy-qt.tag:" href="qwidget.html">QWidget</a> *parent, <span class="keyword">const</span> <span class="keywordtype">char</span> *name,
00033                 <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> section)
00034     : <a class="codeRef" doxygen="doxy-qt.tag:" href="qdialog.html">QDialog</a>(parent,name)
00035 {
00036     accountsData = <a class="code" href="classAccountsData.html#e0">AccountsData::instance</a>();
00037     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstringlist.html">QStringList</a> accounts = accountsData-&gt;<a class="code" href="classAccountsData.html#a13">getFormattedList</a>(<span class="keyword">true</span>);
00038 
00039     setCaption(<span class="stringliteral">"Add to "</span> + section);
00040     
00041     vBoxLayout = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qvboxlayout.html">QVBoxLayout</a>(<span class="keyword">this</span>, 0, 5,
00042                     <span class="stringliteral">"reportsEditorDialog::vBoxLayout"</span>);
00043     vBoxLayout-&gt;setMargin(5);
00044     vBoxLayout-&gt;setSpacing(5);
00045 
00046     <a class="code" href="classReportsEditorDialog.html#r2">oneAccountRadio</a> = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qradiobutton.html">QRadioButton</a>(<span class="stringliteral">"One Account"</span>, <span class="keyword">this</span>,
00047                     <span class="stringliteral">"reportsEditorDialog::oneAccount"</span>);
00048     connect(<a class="code" href="classReportsEditorDialog.html#r2">oneAccountRadio</a>, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classReportsEditorDialog.html#k0">oneAccountToggled</a>()));
00049     vBoxLayout-&gt;addWidget(<a class="code" href="classReportsEditorDialog.html#r2">oneAccountRadio</a>);
00050 
00051     <a class="code" href="classReportsEditorDialog.html#r3">oneAccountHBoxLayout</a> = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qhboxlayout.html">QHBoxLayout</a>(vBoxLayout, 5,
00052                     <span class="stringliteral">"reportsEditorDialog::oneAccountHBoxLayout"</span>);
00053 
00054     <a class="code" href="classReportsEditorDialog.html#r3">oneAccountHBoxLayout</a>-&gt;addSpacing(5);
00055     <a class="code" href="classReportsEditorDialog.html#r4">oneAccountLabel</a> = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qlabel.html">QLabel</a>(<span class="stringliteral">"Account:"</span>, <span class="keyword">this</span>,
00056                     <span class="stringliteral">"reportsEditorDialog::oneAccountLabel"</span>);
00057     <a class="code" href="classReportsEditorDialog.html#r3">oneAccountHBoxLayout</a>-&gt;addWidget(<a class="code" href="classReportsEditorDialog.html#r4">oneAccountLabel</a>);
00058 
00059     <a class="code" href="classReportsEditorDialog.html#r5">oneAccountList</a> = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qcombobox.html">QComboBox</a>(<span class="keyword">this</span>,
00060                     <span class="stringliteral">"reportsEditorDialog::oneAccountList"</span>);
00061     <a class="code" href="classReportsEditorDialog.html#r5">oneAccountList</a>-&gt;insertStringList(accounts);
00062     <a class="code" href="classReportsEditorDialog.html#r3">oneAccountHBoxLayout</a>-&gt;addWidget(<a class="code" href="classReportsEditorDialog.html#r5">oneAccountList</a>);
00063     <a class="code" href="classReportsEditorDialog.html#r3">oneAccountHBoxLayout</a>-&gt;addStretch();
00064 
00065     <a class="code" href="classReportsEditorDialog.html#r6">rangeAccountRadio</a> = <span class="keyword">new</span> QRadioButton(<span class="stringliteral">"Range of Accounts"</span>, <span class="keyword">this</span>,
00066                     <span class="stringliteral">"reportsEditorDialog::rangeAccountRadio"</span>);
00067     connect(<a class="code" href="classReportsEditorDialog.html#r6">rangeAccountRadio</a>, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classReportsEditorDialog.html#k1">rangeAccountToggled</a>()));
00068     vBoxLayout-&gt;addWidget(<a class="code" href="classReportsEditorDialog.html#r6">rangeAccountRadio</a>);
00069 
00070     <a class="code" href="classReportsEditorDialog.html#r7">rangeAccountHBoxLayout</a> = <span class="keyword">new</span> QHBoxLayout(vBoxLayout, -1,
00071                     <span class="stringliteral">"reportsEditorDialog::rangeAccountHBoxLayout"</span>);
00072     <a class="code" href="classReportsEditorDialog.html#r7">rangeAccountHBoxLayout</a>-&gt;addSpacing(5);
00073 
00074     <a class="code" href="classReportsEditorDialog.html#r8">rangeAccountListVBoxLayout</a> = <span class="keyword">new</span> QVBoxLayout(<a class="code" href="classReportsEditorDialog.html#r7">rangeAccountHBoxLayout</a>, 5,
00075                     <span class="stringliteral">"reportsEditorDialog::rangeAccountListVBoxLayout"</span>);
00076 
00077     <a class="code" href="classReportsEditorDialog.html#r9">rangeBeginEndHBoxLayout</a> = <span class="keyword">new</span> QHBoxLayout(<a class="code" href="classReportsEditorDialog.html#r8">rangeAccountListVBoxLayout</a>, 5,
00078                     <span class="stringliteral">"reportsEditorDialog::rangeBeginEndHBoxLayout"</span>);
00079 
00080     <a class="code" href="classReportsEditorDialog.html#r10">rangeBeginLabel</a> = <span class="keyword">new</span> QLabel(<span class="stringliteral">"Begin:"</span>, <span class="keyword">this</span>,
00081                     <span class="stringliteral">"reportsEditorDialog::rangeBeginLabel"</span>);
00082     <a class="code" href="classReportsEditorDialog.html#r9">rangeBeginEndHBoxLayout</a>-&gt;addWidget(<a class="code" href="classReportsEditorDialog.html#r10">rangeBeginLabel</a>);
00083 
00084     <a class="code" href="classReportsEditorDialog.html#r11">rangeBeginList</a> = <span class="keyword">new</span> QComboBox(<span class="keyword">this</span>,
00085                     <span class="stringliteral">"reportsEditorDialog::rangeBeginList"</span>);
00086     <a class="code" href="classReportsEditorDialog.html#r11">rangeBeginList</a>-&gt;insertStringList(accounts);
00087     <a class="code" href="classReportsEditorDialog.html#r9">rangeBeginEndHBoxLayout</a>-&gt;addWidget(<a class="code" href="classReportsEditorDialog.html#r11">rangeBeginList</a>);
00088 
00089     <a class="code" href="classReportsEditorDialog.html#r12">rangeBetweenLabel</a> = <span class="keyword">new</span> QLabel(<span class="stringliteral">" to "</span>, <span class="keyword">this</span>,
00090                     <span class="stringliteral">"reportsEditorDialog::rangeBetweenLabel"</span>);
00091     <a class="code" href="classReportsEditorDialog.html#r9">rangeBeginEndHBoxLayout</a>-&gt;addWidget(<a class="code" href="classReportsEditorDialog.html#r12">rangeBetweenLabel</a>);
00092 
00093     <a class="code" href="classReportsEditorDialog.html#r13">rangeEndList</a> = <span class="keyword">new</span> QComboBox(<span class="keyword">this</span>,
00094                     <span class="stringliteral">"reportsEditorDialog::rangeEndList"</span>);
00095     <a class="code" href="classReportsEditorDialog.html#r13">rangeEndList</a>-&gt;insertStringList(accounts);
00096     <a class="code" href="classReportsEditorDialog.html#r9">rangeBeginEndHBoxLayout</a>-&gt;addWidget(<a class="code" href="classReportsEditorDialog.html#r13">rangeEndList</a>);
00097     
00098     <a class="code" href="classReportsEditorDialog.html#r9">rangeBeginEndHBoxLayout</a>-&gt;addStretch();
00099 
00100     <a class="code" href="classReportsEditorDialog.html#r14">rangeDescHBoxLayout</a> = <span class="keyword">new</span> QHBoxLayout(vBoxLayout, 5,
00101                     <span class="stringliteral">"reportsEditorDialog::rangeDescHBoxLayout"</span>);
00102 
00103     <a class="code" href="classReportsEditorDialog.html#r15">rangeDescLabel</a> = <span class="keyword">new</span> QLabel(<span class="stringliteral">"Description:"</span>, <span class="keyword">this</span>,
00104                     <span class="stringliteral">"reportsEditorDialog::rangeDescLabel"</span>);
00105     <a class="code" href="classReportsEditorDialog.html#r14">rangeDescHBoxLayout</a>-&gt;addWidget(<a class="code" href="classReportsEditorDialog.html#r15">rangeDescLabel</a>);
00106 
00107     <a class="code" href="classReportsEditorDialog.html#r16">rangeDescEdit</a> = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a>(<span class="keyword">this</span>,
00108                     <span class="stringliteral">"reportsEditorDialog::rangeDescEdit"</span>);
00109     <a class="code" href="classReportsEditorDialog.html#r14">rangeDescHBoxLayout</a>-&gt;addWidget(<a class="code" href="classReportsEditorDialog.html#r16">rangeDescEdit</a>);
00110 
00111     
00112     vBoxLayout-&gt;addSpacing(10);
00113 
00114 
00115     <a class="code" href="classReportsEditorDialog.html#r17">buttonHBoxLayout</a> = <span class="keyword">new</span> QHBoxLayout(vBoxLayout, 5,
00116                     <span class="stringliteral">"reportsEditorDialog::buttonHBoxLayout"</span>);
00117     <a class="code" href="classReportsEditorDialog.html#r17">buttonHBoxLayout</a>-&gt;addStretch();
00118 
00119     <a class="code" href="classReportsEditorDialog.html#r18">buttonOK</a> = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(<a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>(
00120                     QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/addEntity.png"</span>)),
00121                     <span class="stringliteral">"Add"</span>, <span class="keyword">this</span>);
00122     connect(<a class="code" href="classReportsEditorDialog.html#r18">buttonOK</a>, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(accept()));
00123     <a class="code" href="classReportsEditorDialog.html#r17">buttonHBoxLayout</a>-&gt;addWidget(<a class="code" href="classReportsEditorDialog.html#r18">buttonOK</a>);
00124 
00125     <a class="code" href="classReportsEditorDialog.html#r19">buttonCancel</a> = <span class="keyword">new</span> QPushButton(<a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>(
00126                     QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/cancelButton.png"</span>)),
00127                     <span class="stringliteral">"Cancel"</span>, <span class="keyword">this</span>);
00128     connect(<a class="code" href="classReportsEditorDialog.html#r19">buttonCancel</a>, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(reject()));
00129     <a class="code" href="classReportsEditorDialog.html#r17">buttonHBoxLayout</a>-&gt;addWidget(<a class="code" href="classReportsEditorDialog.html#r19">buttonCancel</a>);
00130 
00131     <a class="code" href="classReportsEditorDialog.html#r2">oneAccountRadio</a>-&gt;setChecked(<span class="keyword">true</span>);
00132     <a class="code" href="classReportsEditorDialog.html#k0">oneAccountToggled</a>();
00133     
00134 }
00135 
<a name="l00136"></a><a class="code" href="classReportsEditorDialog.html#a1">00136</a> <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> <a class="code" href="classReportsEditorDialog.html#a1">ReportsEditorDialog::getAccountBegin</a>()<span class="keyword"> const</span>
00137 <span class="keyword"></span>{
00138     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> accountBegin;
00139     
00140     <span class="keywordflow">if</span>(<a class="code" href="classReportsEditorDialog.html#r2">oneAccountRadio</a>-&gt;isChecked())
00141     {
00142         accountBegin = <a class="code" href="classReportsEditorDialog.html#r5">oneAccountList</a>-&gt;currentText();
00143     }
00144     <span class="keywordflow">else</span>
00145     {
00146         accountBegin = <a class="code" href="classReportsEditorDialog.html#r11">rangeBeginList</a>-&gt;currentText();
00147     }
00148 
00149     accountBegin = accountBegin.left(accountBegin.find(<span class="stringliteral">" - "</span>));
00150 
00151     <span class="keywordflow">return</span> accountBegin;
00152 }
00153 
<a name="l00154"></a><a class="code" href="classReportsEditorDialog.html#a2">00154</a> <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> <a class="code" href="classReportsEditorDialog.html#a2">ReportsEditorDialog::getAccountEnd</a>()<span class="keyword"> const</span>
00155 <span class="keyword"></span>{
00156     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> accountEnd;
00157 
00158     <span class="keywordflow">if</span>(<a class="code" href="classReportsEditorDialog.html#r6">rangeAccountRadio</a>-&gt;isChecked())
00159     {
00160         accountEnd = <a class="code" href="classReportsEditorDialog.html#r13">rangeEndList</a>-&gt;currentText();
00161         accountEnd = accountEnd.left(accountEnd.find(<span class="stringliteral">" - "</span>));
00162     }
00163     <span class="keywordflow">else</span>
00164     {
00165         accountEnd = <span class="stringliteral">""</span>;
00166     }
00167 
00168     <span class="keywordflow">return</span> accountEnd;
00169 }
00170 
<a name="l00171"></a><a class="code" href="classReportsEditorDialog.html#a3">00171</a> <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> <a class="code" href="classReportsEditorDialog.html#a3">ReportsEditorDialog::getDesc</a>()<span class="keyword"> const</span>
00172 <span class="keyword"></span>{
00173     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> desc;
00174     
00175     <span class="keywordflow">if</span>(<a class="code" href="classReportsEditorDialog.html#r2">oneAccountRadio</a>-&gt;isChecked())
00176     {
00177         desc = accountsData-&gt;<a class="code" href="classAccountsData.html#a14">getDescription</a>(<a class="code" href="classReportsEditorDialog.html#a1">getAccountBegin</a>());
00178     }
00179     <span class="keywordflow">else</span>
00180     {
00181         desc = <a class="code" href="classReportsEditorDialog.html#r16">rangeDescEdit</a>-&gt;text();
00182     }
00183 
00184     <span class="keywordflow">return</span> desc;
00185 }
00186 
<a name="l00187"></a><a class="code" href="classReportsEditorDialog.html#k0">00187</a> <span class="keywordtype">void</span> <a class="code" href="classReportsEditorDialog.html#k0">ReportsEditorDialog::oneAccountToggled</a>()
00188 {
00189     <a class="code" href="classReportsEditorDialog.html#r6">rangeAccountRadio</a>-&gt;setChecked(<span class="keyword">false</span>);
00190     <a class="code" href="classReportsEditorDialog.html#r10">rangeBeginLabel</a>-&gt;setEnabled(<span class="keyword">false</span>);
00191     <a class="code" href="classReportsEditorDialog.html#r11">rangeBeginList</a>-&gt;setEnabled(<span class="keyword">false</span>);
00192     <a class="code" href="classReportsEditorDialog.html#r12">rangeBetweenLabel</a>-&gt;setEnabled(<span class="keyword">false</span>);
00193     <a class="code" href="classReportsEditorDialog.html#r13">rangeEndList</a>-&gt;setEnabled(<span class="keyword">false</span>);
00194     <a class="code" href="classReportsEditorDialog.html#r15">rangeDescLabel</a>-&gt;setEnabled(<span class="keyword">false</span>);
00195     <a class="code" href="classReportsEditorDialog.html#r16">rangeDescEdit</a>-&gt;setEnabled(<span class="keyword">false</span>);
00196 
00197     <a class="code" href="classReportsEditorDialog.html#r4">oneAccountLabel</a>-&gt;setEnabled(<span class="keyword">true</span>);
00198     <a class="code" href="classReportsEditorDialog.html#r5">oneAccountList</a>-&gt;setEnabled(<span class="keyword">true</span>);
00199 }
00200 
<a name="l00201"></a><a class="code" href="classReportsEditorDialog.html#k1">00201</a> <span class="keywordtype">void</span> <a class="code" href="classReportsEditorDialog.html#k1">ReportsEditorDialog::rangeAccountToggled</a>()
00202 {
00203     <a class="code" href="classReportsEditorDialog.html#r10">rangeBeginLabel</a>-&gt;setEnabled(<span class="keyword">true</span>);
00204     <a class="code" href="classReportsEditorDialog.html#r11">rangeBeginList</a>-&gt;setEnabled(<span class="keyword">true</span>);
00205     <a class="code" href="classReportsEditorDialog.html#r12">rangeBetweenLabel</a>-&gt;setEnabled(<span class="keyword">true</span>);
00206     <a class="code" href="classReportsEditorDialog.html#r13">rangeEndList</a>-&gt;setEnabled(<span class="keyword">true</span>);
00207     <a class="code" href="classReportsEditorDialog.html#r15">rangeDescLabel</a>-&gt;setEnabled(<span class="keyword">true</span>);
00208     <a class="code" href="classReportsEditorDialog.html#r16">rangeDescEdit</a>-&gt;setEnabled(<span class="keyword">true</span>);
00209 
00210     <a class="code" href="classReportsEditorDialog.html#r2">oneAccountRadio</a>-&gt;setChecked(<span class="keyword">false</span>);
00211     <a class="code" href="classReportsEditorDialog.html#r4">oneAccountLabel</a>-&gt;setEnabled(<span class="keyword">false</span>);
00212     <a class="code" href="classReportsEditorDialog.html#r5">oneAccountList</a>-&gt;setEnabled(<span class="keyword">false</span>);
00213 }
00214 
00215 
00216 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Jan 16 16:23:28 2005 for General Ledger by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
