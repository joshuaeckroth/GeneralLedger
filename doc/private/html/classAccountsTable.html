<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>General Ledger: AccountsTable class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>AccountsTable Class Reference</h1>Accounts Table.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="accountsTable_8h-source.html">accountsTable.h</a>&gt;</code>
<p>
Inherits <a class="elRef" doxygen="doxy-qt.tag:" href="qtable.html">QTable</a>.
<p>
<a href="classAccountsTable-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Slots</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAccountsTable.html#i0">populate</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAccountsTable.html#i1">unpopulate</a> ()</td></tr>

<tr><td colspan=2><br><h2>Signals</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAccountsTable.html#l0">switchToHome</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAccountsTable.html#l1">switchToJournal</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAccountsTable.html#l2">switchToReports</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAccountsTable.html#l3">switchToHelp</a> ()</td></tr>

<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAccountsTable.html#a0">AccountsTable</a> (<a class="elRef" doxygen="doxy-qt.tag:" href="qwidget.html">QWidget</a> *parent, const char *name)</td></tr>

<tr><td colspan=2><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAccountsTable.html#d0">keyPressEvent</a> (<a class="elRef" doxygen="doxy-qt.tag:" href="qkeyevent.html">QKeyEvent</a> *event)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAccountsTable.html#d1">insert</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAccountsTable.html#d2">remove</a> (int row)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAccountsTable.html#d3">updateDb</a> ()</td></tr>

<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classAccountsData.html">AccountsData</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAccountsTable.html#r0">accountsData</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classClient.html">Client</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAccountsTable.html#r1">client</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAccountsTable.html#r2">editing</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classAccountsTable.html#r3">inserting</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Accounts Table. 
<p>

<p>
Definition at line <a class="el" href="accountsTable_8h-source.html#l00030">30</a> of file <a class="el" href="accountsTable_8h-source.html">accountsTable.h</a>.<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="AccountsTable::AccountsTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> AccountsTable::AccountsTable </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="doxy-qt.tag:" href="qwidget.html">QWidget</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor. 
<p>

<p>
Definition at line <a class="el" href="accountsTable_8cpp-source.html#l00038">38</a> of file <a class="el" href="accountsTable_8cpp-source.html">accountsTable.cpp</a>.
<p>
References <a class="el" href="accountsTable_8h-source.html#l00061">client</a>, <a class="el" href="accountsTable_8h-source.html#l00063">editing</a>, <a class="el" href="accountsTable_8h-source.html#l00064">inserting</a>, <a class="el" href="client_8cpp-source.html#l00034">Client::instance()</a>, <a class="el" href="accountsData_8cpp-source.html#l00035">AccountsData::instance()</a>, <a class="el" href="accountsTable_8cpp-source.html#l00064">populate()</a>, and <a class="el" href="accountsTable_8cpp-source.html#l00096">unpopulate()</a>.
<p>
<div class="fragment"><pre>00039     : <a class="codeRef" doxygen="doxy-qt.tag:" href="qtable.html">QTable</a>(parent,name)  
00040 {
00041     <a class="code" href="classAccountsTable.html#r0">accountsData</a> = <a class="code" href="classAccountsData.html#e0">AccountsData::instance</a>();
00042     <a class="code" href="classAccountsTable.html#r1">client</a> = <a class="code" href="classClient.html#e0">Client::instance</a>();
00043 
00044     connect(client, SIGNAL(clientOpened(<a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a>)), <span class="keyword">this</span>, SLOT(<a class="code" href="classAccountsTable.html#i0">populate</a>()));
00045     connect(client, SIGNAL(clientClosed(<a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a>)), <span class="keyword">this</span>, SLOT(<a class="code" href="classAccountsTable.html#i1">unpopulate</a>()));
00046 
00047     setLeftMargin(0);
00048     setVScrollBarMode(QScrollView::AlwaysOn);
00049     setSelectionMode(QTable::NoSelection);
00050     setFocusStyle(QTable::SpreadSheet);
00051     
00052     insertColumns(0,2);
00053     
00054     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstringlist.html">QStringList</a> labels;
00055     labels &lt;&lt; <span class="stringliteral">"Account ID"</span> &lt;&lt; <span class="stringliteral">"Account Description"</span>;
00056     setColumnLabels(labels);
00057     
00058     setColumnStretchable(1, <span class="keyword">true</span>);
00059     
00060     <a class="code" href="classAccountsTable.html#r3">inserting</a> = <span class="keyword">false</span>;
00061     <a class="code" href="classAccountsTable.html#r2">editing</a> = <span class="keyword">false</span>;
00062 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="l0" doxytag="AccountsTable::switchToHome" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AccountsTable::switchToHome </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [signal]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Go to Home tab. 
<p>

<p>
Referenced by <a class="el" href="accountsTable_8cpp-source.html#l00233">keyPressEvent()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="l1" doxytag="AccountsTable::switchToJournal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AccountsTable::switchToJournal </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [signal]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Go to Journal tab. 
<p>

<p>
Referenced by <a class="el" href="accountsTable_8cpp-source.html#l00233">keyPressEvent()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="l2" doxytag="AccountsTable::switchToReports" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AccountsTable::switchToReports </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [signal]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Go to Reports tab. 
<p>

<p>
Referenced by <a class="el" href="accountsTable_8cpp-source.html#l00233">keyPressEvent()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="l3" doxytag="AccountsTable::switchToHelp" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AccountsTable::switchToHelp </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [signal]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Go to Help tab. 
<p>

<p>
Referenced by <a class="el" href="accountsTable_8cpp-source.html#l00233">keyPressEvent()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="i0" doxytag="AccountsTable::populate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AccountsTable::populate </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [slot]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="accountsTable_8cpp-source.html#l00064">64</a> of file <a class="el" href="accountsTable_8cpp-source.html">accountsTable.cpp</a>.
<p>
References <a class="el" href="accountsData_8cpp-source.html#l00111">AccountsData::getAccounts()</a>, <a class="el" href="accountsData_8cpp-source.html#l00260">AccountsData::getREAccountDesc()</a>, <a class="el" href="accountsData_8cpp-source.html#l00255">AccountsData::getREAccountId()</a>, and <a class="el" href="accountsTable_8cpp-source.html#l00096">unpopulate()</a>.
<p>
Referenced by <a class="el" href="accountsTable_8cpp-source.html#l00038">AccountsTable()</a>.
<p>
<div class="fragment"><pre>00065 {
00066     <a class="code" href="classAccountsTable.html#i1">unpopulate</a>();
00067     
00068     vector&lt;AccountsData::Account*&gt; accountsVec = <a class="code" href="classAccountsTable.html#r0">accountsData</a>-&gt;<a class="code" href="classAccountsData.html#a5">getAccounts</a>();
00069     Q_UINT16 key = 0;
00070     <span class="keywordflow">for</span>(vector&lt;AccountsData::Account*&gt;::const_iterator it = accountsVec.begin();
00071                     it != accountsVec.end(); ++it)
00072     {
00073         key++;
00074         <span class="keywordflow">if</span>((*it) != 0)
00075         {
00076             insertRows(0);
00077             setItem(0, 0, <span class="keyword">new</span> <a class="code" href="classAccountsEditId.html">AccountsEditId</a>(<span class="keyword">this</span>, (*it)-&gt;id, key));
00078             setItem(0, 1, <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qtableitem.html">QTableItem</a>(<span class="keyword">this</span>, QTableItem::OnTyping,
00079                 (*it)-&gt;desc));
00080         }
00081     }
00082 
00083     insertRows(0);
00084     setItem(0, 0, <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qtableitem.html">QTableItem</a>(<span class="keyword">this</span>, QTableItem::Never,
00085         <a class="code" href="classAccountsTable.html#r0">accountsData</a>-&gt;<a class="code" href="classAccountsData.html#a11">getREAccountId</a>()));
00086     setItem(0, 1, <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qtableitem.html">QTableItem</a>(<span class="keyword">this</span>, QTableItem::OnTyping,
00087         <a class="code" href="classAccountsTable.html#r0">accountsData</a>-&gt;<a class="code" href="classAccountsData.html#a12">getREAccountDesc</a>()));
00088 
00089     setColumnReadOnly(0, <span class="keyword">true</span>);
00090     
00091     sortColumn(0, <span class="keyword">true</span>, <span class="keyword">true</span>);
00092 
00093     setCurrentCell(0,1);
00094 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="i1" doxytag="AccountsTable::unpopulate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AccountsTable::unpopulate </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [slot]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="accountsTable_8cpp-source.html#l00096">96</a> of file <a class="el" href="accountsTable_8cpp-source.html">accountsTable.cpp</a>.
<p>
Referenced by <a class="el" href="accountsTable_8cpp-source.html#l00038">AccountsTable()</a>, and <a class="el" href="accountsTable_8cpp-source.html#l00064">populate()</a>.
<p>
<div class="fragment"><pre>00097 {
00098     <span class="keywordtype">int</span> rows = numRows();
00099     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> row = 0; row &lt; rows; row++)
00100         removeRow(0);
00101 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d0" doxytag="AccountsTable::keyPressEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AccountsTable::keyPressEvent </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="doxy-qt.tag:" href="qkeyevent.html">QKeyEvent</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>event</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="accountsTable_8cpp-source.html#l00233">233</a> of file <a class="el" href="accountsTable_8cpp-source.html">accountsTable.cpp</a>.
<p>
References <a class="el" href="accountsData_8cpp-source.html#l00184">AccountsData::accountIdExists()</a>, <a class="el" href="accountsTable_8h-source.html#l00063">editing</a>, <a class="el" href="accountsTable_8cpp-source.html#l00103">insert()</a>, <a class="el" href="accountsTable_8h-source.html#l00064">inserting</a>, <a class="el" href="accountsTable_8cpp-source.html#l00122">remove()</a>, <a class="el" href="classAccountsTable.html#l3">switchToHelp()</a>, <a class="el" href="classAccountsTable.html#l0">switchToHome()</a>, <a class="el" href="classAccountsTable.html#l1">switchToJournal()</a>, <a class="el" href="classAccountsTable.html#l2">switchToReports()</a>, and <a class="el" href="accountsTable_8cpp-source.html#l00209">updateDb()</a>.
<p>
<div class="fragment"><pre>00234 {
00235     <span class="keywordflow">switch</span>(event-&gt;key())
00236     {
00237         <span class="keywordflow">case</span> Key_Insert:
00238             <span class="keywordflow">if</span>(!<a class="code" href="classAccountsTable.html#r3">inserting</a>)
00239                 <a class="code" href="classAccountsTable.html#d1">insert</a>();
00240             <span class="keywordflow">break</span>;
00241         <span class="keywordflow">case</span> Key_Delete:
00242             <span class="keywordflow">if</span>(!<a class="code" href="classAccountsTable.html#r2">editing</a>)
00243                 <a class="code" href="classAccountsTable.html#d2">remove</a>(currentRow());
00244             <span class="keywordflow">else</span>
00245                 ((<a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a>*)cellWidget(currentRow(), currentColumn()))-&gt;del();
00246             <span class="keywordflow">break</span>;
00247         <span class="keywordflow">case</span> Key_Tab:
00248             <span class="keywordflow">break</span>;
00249         <span class="keywordflow">case</span> Key_Enter:
00250         <span class="keywordflow">case</span> Key_Return:
00251             <span class="keywordflow">if</span>(<a class="code" href="classAccountsTable.html#r3">inserting</a>)
00252             {
00253                 <span class="keywordflow">if</span>(currentColumn() == 0)
00254                 {
00255                     endEdit(currentRow(), 0, <span class="keyword">true</span>, <span class="keyword">true</span>);
00256 
00257                     <span class="keywordflow">if</span>(<a class="code" href="classAccountsTable.html#r0">accountsData</a>-&gt;<a class="code" href="classAccountsData.html#a16">accountIdExists</a>(text(currentRow(), 0)))
00258                     {
00259                         beginEdit(currentRow(), 0, <span class="keyword">true</span>);
00260                         <span class="keywordflow">break</span>;
00261                     }
00262                     <span class="keywordflow">else</span>
00263                     {
00264                         setCurrentCell(currentRow(), 1);
00265                         beginEdit(currentRow(), 1, <span class="keyword">true</span>);
00266                         <span class="keywordflow">break</span>;
00267                     }
00268                 }
00269                 <span class="keywordflow">else</span>
00270                 {
00271                     <a class="code" href="classAccountsTable.html#r2">editing</a> = <span class="keyword">false</span>;
00272                     <a class="code" href="classAccountsTable.html#r3">inserting</a> = <span class="keyword">false</span>;
00273                     endEdit(currentRow(), 1, <span class="keyword">true</span>, <span class="keyword">true</span>);
00274                     <a class="code" href="classAccountsTable.html#d3">updateDb</a>();
00275                     sortColumn(0, <span class="keyword">true</span>, <span class="keyword">true</span>);
00276                     <span class="keywordflow">break</span>;
00277                 }
00278             }
00279             <span class="keywordflow">else</span>
00280             {
00281                 <span class="keywordflow">if</span>(<a class="code" href="classAccountsTable.html#r2">editing</a>)
00282                 {
00283                     <a class="code" href="classAccountsTable.html#r2">editing</a> = <span class="keyword">false</span>;
00284                     endEdit(currentRow(), 1, <span class="keyword">true</span>, <span class="keyword">true</span>);
00285                     <a class="code" href="classAccountsTable.html#d3">updateDb</a>();
00286                     setCurrentCell(currentRow(), 1);
00287                     sortColumn(0, <span class="keyword">true</span>, <span class="keyword">true</span>);
00288                     <span class="keywordflow">break</span>;
00289                 }
00290                 <span class="keywordflow">else</span>
00291                 {
00292                     <a class="code" href="classAccountsTable.html#r2">editing</a> = <span class="keyword">true</span>;
00293                     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> oldText = text(currentRow(), 1);
00294                     <a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a> *editor = (<a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a>*)beginEdit(currentRow(), 1, <span class="keyword">true</span>);
00295                     editor-&gt;insert(oldText);
00296                     editor-&gt;selectAll();
00297                     <span class="keywordflow">break</span>;
00298                 }
00299             }
00300         <span class="keywordflow">case</span> Key_Escape:
00301             <span class="keywordflow">if</span>(<a class="code" href="classAccountsTable.html#r3">inserting</a>)
00302             {
00303                 <a class="code" href="classAccountsTable.html#r2">editing</a> = <span class="keyword">false</span>;
00304                 <a class="code" href="classAccountsTable.html#r3">inserting</a> = <span class="keyword">false</span>;
00305                 endEdit(currentRow(), currentColumn(), <span class="keyword">false</span>, <span class="keyword">false</span>);
00306                 removeRow(currentRow());
00307                 setCurrentCell(numRows(), 1);
00308                 <span class="keywordflow">break</span>;
00309             }
00310             <span class="keywordflow">if</span>(<a class="code" href="classAccountsTable.html#r2">editing</a>)
00311             {
00312                 <a class="code" href="classAccountsTable.html#r2">editing</a> = <span class="keyword">false</span>;
00313                 endEdit(currentRow(), currentColumn(), <span class="keyword">false</span>, <span class="keyword">false</span>);
00314                 <span class="keywordflow">break</span>;
00315             }
00316 
00317             emit <a class="code" href="classAccountsTable.html#l0">switchToHome</a>();
00318             <span class="keywordflow">break</span>;
00319         <span class="keywordflow">case</span> Key_Up:
00320         <span class="keywordflow">case</span> Key_Left:
00321         <span class="keywordflow">case</span> Key_Down:
00322         <span class="keywordflow">case</span> Key_Right:
00323         <span class="keywordflow">case</span> Key_Home:
00324         <span class="keywordflow">case</span> Key_End:
00325         <span class="keywordflow">case</span> Key_PageUp:
00326         <span class="keywordflow">case</span> Key_PageDown:
00327             <span class="keywordflow">if</span>(<a class="code" href="classAccountsTable.html#r2">editing</a>)
00328             {
00329                 <span class="keywordtype">int</span> curRow = currentRow();
00330                 <span class="keywordtype">int</span> curCol = currentColumn();
00331 
00332                 <span class="keywordflow">switch</span>(event-&gt;key())
00333                 {
00334                     <span class="keywordflow">case</span> Key_Right:
00335                         ((<a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a>*)cellWidget(curRow, curCol))-&gt;cursorForward(<span class="keyword">false</span>);
00336                         <span class="keywordflow">break</span>;
00337                     <span class="keywordflow">case</span> Key_Left:
00338                         ((<a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a>*)cellWidget(curRow, curCol))-&gt;cursorBackward(<span class="keyword">false</span>);
00339                         <span class="keywordflow">break</span>;
00340                     <span class="keywordflow">case</span> Key_Home:
00341                         ((<a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a>*)cellWidget(curRow, curCol))-&gt;home(<span class="keyword">false</span>);
00342                         <span class="keywordflow">break</span>;
00343                     <span class="keywordflow">case</span> Key_End:
00344                         ((<a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a>*)cellWidget(curRow, curCol))-&gt;end(<span class="keyword">false</span>);
00345                         <span class="keywordflow">break</span>;
00346                     <span class="keywordflow">default</span>:
00347                         <span class="keywordflow">break</span>;
00348                 }
00349             }
00350             <span class="keywordflow">else</span>
00351             {
00352                 <span class="keywordflow">if</span>(event-&gt;key() == Key_Left)
00353                     <span class="keywordflow">break</span>;
00354                 
00355                 QTable::keyPressEvent(event);
00356                 <span class="keywordflow">break</span>;
00357             }
00358         <span class="keywordflow">case</span> Key_F1:
00359             emit <a class="code" href="classAccountsTable.html#l0">switchToHome</a>();
00360             <span class="keywordflow">break</span>;
00361         <span class="keywordflow">case</span> Key_F2:
00362             <span class="keywordflow">break</span>;
00363         <span class="keywordflow">case</span> Key_F3:
00364             emit <a class="code" href="classAccountsTable.html#l1">switchToJournal</a>();
00365             <span class="keywordflow">break</span>;
00366         <span class="keywordflow">case</span> Key_F4:
00367             emit <a class="code" href="classAccountsTable.html#l2">switchToReports</a>();
00368             <span class="keywordflow">break</span>;
00369         <span class="keywordflow">case</span> Key_F5:
00370             emit <a class="code" href="classAccountsTable.html#l3">switchToHelp</a>();
00371             <span class="keywordflow">break</span>;
00372         <span class="keywordflow">default</span>:
00373             <span class="keywordflow">break</span>;
00374     }
00375 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="AccountsTable::insert" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AccountsTable::insert </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="accountsTable_8cpp-source.html#l00103">103</a> of file <a class="el" href="accountsTable_8cpp-source.html">accountsTable.cpp</a>.
<p>
References <a class="el" href="accountsTable_8h-source.html#l00063">editing</a>, <a class="el" href="accountsData_8cpp-source.html#l00234">AccountsData::getNextAccountKey()</a>, and <a class="el" href="accountsTable_8h-source.html#l00064">inserting</a>.
<p>
Referenced by <a class="el" href="accountsTable_8cpp-source.html#l00233">keyPressEvent()</a>.
<p>
<div class="fragment"><pre>00104 {
00105     <a class="code" href="classAccountsTable.html#r3">inserting</a> = <span class="keyword">true</span>;
00106 
00107     <span class="keywordtype">int</span> newRow = numRows();
00108     insertRows(newRow);
00109 
00110     <a class="code" href="classAccountsTable.html#r2">editing</a> = <span class="keyword">true</span>;
00111 
00112     ensureCellVisible(newRow, 0);
00113     setItem(newRow, 0, <span class="keyword">new</span> <a class="code" href="classAccountsEditId.html">AccountsEditId</a>(<span class="keyword">this</span>, <span class="stringliteral">""</span>,
00114                             <a class="code" href="classAccountsTable.html#r0">accountsData</a>-&gt;<a class="code" href="classAccountsData.html#a8">getNextAccountKey</a>()));
00115     setColumnReadOnly(0, <span class="keyword">false</span>);
00116     setItem(newRow, 1, <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qtableitem.html">QTableItem</a>(<span class="keyword">this</span>, QTableItem::Never, <span class="stringliteral">""</span>));
00117     setCurrentCell(newRow,0);
00118 
00119     beginEdit(newRow, 0, <span class="keyword">false</span>);
00120 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d2" doxytag="AccountsTable::remove" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AccountsTable::remove </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>row</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="accountsTable_8cpp-source.html#l00122">122</a> of file <a class="el" href="accountsTable_8cpp-source.html">accountsTable.cpp</a>.
<p>
References <a class="el" href="accountsData_8cpp-source.html#l00179">AccountsData::accountHasEntries()</a>, <a class="el" href="accountsData_8cpp-source.html#l00224">AccountsData::deleteAccount()</a>, and <a class="el" href="accountsData_8cpp-source.html#l00255">AccountsData::getREAccountId()</a>.
<p>
Referenced by <a class="el" href="accountsTable_8cpp-source.html#l00233">keyPressEvent()</a>.
<p>
<div class="fragment"><pre>00123 {
00124     <span class="keywordflow">if</span>(text(row, 0) == <a class="code" href="classAccountsTable.html#r0">accountsData</a>-&gt;<a class="code" href="classAccountsData.html#a11">getREAccountId</a>())
00125         <span class="keywordflow">return</span>;
00126 
00127     Q_UINT16 key = ((<a class="code" href="classAccountsEditId.html">AccountsEditId</a>*)(item(row, 0)))-&gt;getKey();
00128 
00129     <span class="keywordflow">if</span>(<a class="code" href="classAccountsTable.html#r0">accountsData</a>-&gt;<a class="code" href="classAccountsData.html#a15">accountHasEntries</a>(text(row, 0)))
00130     {
00131         <a class="codeRef" doxygen="doxy-qt.tag:" href="qdialog.html">QDialog</a> *dialog = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qdialog.html">QDialog</a>;
00132         dialog-&gt;setCaption(<span class="stringliteral">"Delete Record"</span>);
00133 
00134         <a class="codeRef" doxygen="doxy-qt.tag:" href="qvboxlayout.html">QVBoxLayout</a> *vBoxLayout = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qvboxlayout.html">QVBoxLayout</a>(dialog);
00135         vBoxLayout-&gt;setMargin(5);
00136         vBoxLayout-&gt;setSpacing(5);
00137 
00138         <a class="codeRef" doxygen="doxy-qt.tag:" href="qlabel.html">QLabel</a> *label = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qlabel.html">QLabel</a>(<span class="stringliteral">"&lt;nobr&gt;Cannot delete account "</span> + text(row, 0)
00139                 + <span class="stringliteral">"&lt;/nobr&gt;;&lt;br&gt;"</span>
00140                 <span class="stringliteral">"&lt;nobr&gt;there is data associated with this account.&lt;/nobr&gt;"</span>,
00141                 dialog);
00142         
00143         vBoxLayout-&gt;addWidget(label);
00144 
00145         vBoxLayout-&gt;addSpacing(10);
00146 
00147         <a class="codeRef" doxygen="doxy-qt.tag:" href="qhboxlayout.html">QHBoxLayout</a> *hBoxLayout = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qhboxlayout.html">QHBoxLayout</a>(vBoxLayout);
00148         hBoxLayout-&gt;setSpacing(5);
00149 
00150         <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a> *okButton = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(<a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>(
00151                                 QPixmap::fromMimeSource(ICON_PATH
00152                                 + <span class="stringliteral">"/okButton.png"</span>)), <span class="stringliteral">"OK"</span>, dialog);
00153         connect(okButton, SIGNAL(clicked()), dialog, SLOT(accept()));
00154 
00155         hBoxLayout-&gt;addStretch();
00156         hBoxLayout-&gt;addWidget(okButton);
00157 
00158         dialog-&gt;exec();
00159 
00160         <span class="keyword">delete</span> dialog;
00161     }
00162     <span class="keywordflow">else</span>
00163     {    
00164         QDialog *dialog = <span class="keyword">new</span> QDialog;
00165         dialog-&gt;setCaption(<span class="stringliteral">"Delete Record"</span>);
00166 
00167         QVBoxLayout *vBoxLayout = <span class="keyword">new</span> QVBoxLayout(dialog);
00168         vBoxLayout-&gt;setMargin(5);
00169         vBoxLayout-&gt;setSpacing(5);
00170 
00171         QLabel *label = <span class="keyword">new</span> QLabel(<span class="stringliteral">"&lt;nobr&gt;Are you sure you want to delete the selected record?&lt;/nobr&gt;"</span>, dialog);
00172 
00173         vBoxLayout-&gt;addWidget(label);
00174 
00175         vBoxLayout-&gt;addSpacing(10);
00176 
00177         QHBoxLayout *hBoxLayout = <span class="keyword">new</span> QHBoxLayout(vBoxLayout);
00178         hBoxLayout-&gt;setSpacing(5);
00179 
00180         QPushButton *buttonDelete = <span class="keyword">new</span> QPushButton(<a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>(QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/deleteButton.png"</span>)),
00181                                  <span class="stringliteral">"Delete"</span>, dialog);
00182         connect(buttonDelete, SIGNAL(clicked()), dialog, SLOT(accept()));
00183 
00184         QPushButton *buttonDontDelete = <span class="keyword">new</span> QPushButton(<a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>(QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/okButton.png"</span>)),
00185                                      <span class="stringliteral">"Don't Delete"</span>, dialog);
00186         connect(buttonDontDelete, SIGNAL(clicked()), dialog, SLOT(reject()));
00187 
00188         buttonDontDelete-&gt;setDefault(<span class="keyword">true</span>);
00189 
00190         hBoxLayout-&gt;addStretch();
00191         hBoxLayout-&gt;addWidget(buttonDelete);
00192         hBoxLayout-&gt;addWidget(buttonDontDelete);
00193 
00194         <span class="keywordflow">if</span>(dialog-&gt;exec())
00195         {
00196             <a class="code" href="classAccountsTable.html#r0">accountsData</a>-&gt;<a class="code" href="classAccountsData.html#a7">deleteAccount</a>(key);
00197             removeRow(row);
00198 
00199             <span class="keywordflow">if</span>(row &gt; 0)
00200                 setCurrentCell(row - 1, 1);
00201             <span class="keywordflow">else</span>
00202                 setCurrentCell(0, 1);
00203         }
00204 
00205         <span class="keyword">delete</span> dialog;
00206     }
00207 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d3" doxytag="AccountsTable::updateDb" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AccountsTable::updateDb </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="accountsTable_8cpp-source.html#l00209">209</a> of file <a class="el" href="accountsTable_8cpp-source.html">accountsTable.cpp</a>.
<p>
References <a class="el" href="accountsData_8cpp-source.html#l00255">AccountsData::getREAccountId()</a>, <a class="el" href="accountsData_8cpp-source.html#l00244">AccountsData::setREAccountDesc()</a>, and <a class="el" href="accountsData_8cpp-source.html#l00202">AccountsData::updateAccount()</a>.
<p>
Referenced by <a class="el" href="accountsTable_8cpp-source.html#l00233">keyPressEvent()</a>.
<p>
<div class="fragment"><pre>00210 {
00211     <span class="keywordtype">int</span> row = currentRow();
00212 
00213     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> <span class="keywordtype">id</span> = text(row, 0);
00214 
00215     <span class="keywordflow">if</span>(<span class="keywordtype">id</span> == <a class="code" href="classAccountsTable.html#r0">accountsData</a>-&gt;<a class="code" href="classAccountsData.html#a11">getREAccountId</a>())
00216     {
00217         <a class="code" href="classAccountsTable.html#r0">accountsData</a>-&gt;<a class="code" href="classAccountsData.html#a10">setREAccountDesc</a>(text(row,1));
00218         <span class="keywordflow">return</span>;
00219     }
00220 
00221     Q_UINT16 key = ((<a class="code" href="classAccountsEditId.html">AccountsEditId</a>*)(item(row, 0)))-&gt;getKey();
00222     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> desc = text(row, 1);
00223     
00224     <span class="keywordflow">if</span>(desc == <span class="stringliteral">""</span>)
00225     {
00226         desc = <span class="stringliteral">"No Description"</span>;
00227         setText(currentRow(), 1, desc);
00228     }
00229 
00230     <a class="code" href="classAccountsTable.html#r0">accountsData</a>-&gt;<a class="code" href="classAccountsData.html#a6">updateAccount</a>(key, <span class="keywordtype">id</span>, desc);
00231 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r0" doxytag="AccountsTable::accountsData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classAccountsData.html">AccountsData</a>* <a class="el" href="classAccountsTable.html#r0">AccountsTable::accountsData</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="accountsTable_8h-source.html#l00060">60</a> of file <a class="el" href="accountsTable_8h-source.html">accountsTable.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r1" doxytag="AccountsTable::client" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classClient.html">Client</a>* <a class="el" href="classAccountsTable.html#r1">AccountsTable::client</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="accountsTable_8h-source.html#l00061">61</a> of file <a class="el" href="accountsTable_8h-source.html">accountsTable.h</a>.
<p>
Referenced by <a class="el" href="accountsTable_8cpp-source.html#l00038">AccountsTable()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r2" doxytag="AccountsTable::editing" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool <a class="el" href="classAccountsTable.html#r2">AccountsTable::editing</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="accountsTable_8h-source.html#l00063">63</a> of file <a class="el" href="accountsTable_8h-source.html">accountsTable.h</a>.
<p>
Referenced by <a class="el" href="accountsTable_8cpp-source.html#l00038">AccountsTable()</a>, <a class="el" href="accountsTable_8cpp-source.html#l00103">insert()</a>, and <a class="el" href="accountsTable_8cpp-source.html#l00233">keyPressEvent()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r3" doxytag="AccountsTable::inserting" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool <a class="el" href="classAccountsTable.html#r3">AccountsTable::inserting</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="accountsTable_8h-source.html#l00064">64</a> of file <a class="el" href="accountsTable_8h-source.html">accountsTable.h</a>.
<p>
Referenced by <a class="el" href="accountsTable_8cpp-source.html#l00038">AccountsTable()</a>, <a class="el" href="accountsTable_8cpp-source.html#l00103">insert()</a>, and <a class="el" href="accountsTable_8cpp-source.html#l00233">keyPressEvent()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="accountsTable_8h-source.html">accountsTable.h</a><li><a class="el" href="accountsTable_8cpp-source.html">accountsTable.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Sun Jan 16 16:23:29 2005 for General Ledger by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
