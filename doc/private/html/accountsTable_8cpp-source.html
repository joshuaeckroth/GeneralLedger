<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>General Ledger: accountsTable.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>accountsTable.cpp</h1><a href="accountsTable_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/* General Ledger, Copyright (C) 2004  Joshua Eckroth &lt;josh@eckroth.net&gt;</span>
00002 <span class="comment"> * http://www.eckroth.net/software/genledg</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
00005 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
00006 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
00007 <span class="comment"> * (at your option) any later version.</span>
00008 <span class="comment"> * </span>
00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00012 <span class="comment"> * GNU General Public License for more details.</span>
00013 <span class="comment"> * </span>
00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
00015 <span class="comment"> * along with this program; if not, write to the Free Software</span>
00016 <span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  US</span>
00017 <span class="comment">*/</span>
00018 
00019 <span class="preprocessor">#include &lt;vector&gt;</span>
00020 <span class="keyword">using</span> std::vector;
00021 
00022 <span class="preprocessor">#include &lt;qtable.h&gt;</span>
00023 <span class="preprocessor">#include &lt;qptrlist.h&gt;</span>
00024 <span class="preprocessor">#include &lt;qstringlist.h&gt;</span>
00025 <span class="preprocessor">#include &lt;qevent.h&gt;</span>
00026 <span class="preprocessor">#include &lt;qdialog.h&gt;</span>
00027 <span class="preprocessor">#include &lt;qlayout.h&gt;</span>
00028 <span class="preprocessor">#include &lt;qlabel.h&gt;</span>
00029 <span class="preprocessor">#include &lt;qlineedit.h&gt;</span>
00030 <span class="preprocessor">#include &lt;qpushbutton.h&gt;</span>
00031 
00032 <span class="preprocessor">#include "config.h"</span>
00033 <span class="preprocessor">#include "<a class="code" href="accountsTable_8h.html">accountsTable.h</a>"</span>
00034 <span class="preprocessor">#include "<a class="code" href="accountsEditId_8h.html">accountsEditId.h</a>"</span>
00035 <span class="preprocessor">#include "<a class="code" href="accountsData_8h.html">accountsData.h</a>"</span>
00036 <span class="preprocessor">#include "<a class="code" href="client_8h.html">client.h</a>"</span>
00037 
<a name="l00038"></a><a class="code" href="classAccountsTable.html#a0">00038</a> <a class="code" href="classAccountsTable.html#a0">AccountsTable::AccountsTable</a>(<a class="codeRef" doxygen="doxy-qt.tag:" href="qwidget.html">QWidget</a> *parent, <span class="keyword">const</span> <span class="keywordtype">char</span> *name)
00039     : <a class="codeRef" doxygen="doxy-qt.tag:" href="qtable.html">QTable</a>(parent,name)  
00040 {
00041     accountsData = <a class="code" href="classAccountsData.html#e0">AccountsData::instance</a>();
00042     <a class="code" href="classAccountsTable.html#r1">client</a> = <a class="code" href="classClient.html#e0">Client::instance</a>();
00043 
00044     connect(<a class="code" href="classAccountsTable.html#r1">client</a>, SIGNAL(clientOpened(<a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a>)), <span class="keyword">this</span>, SLOT(<a class="code" href="classAccountsTable.html#i0">populate</a>()));
00045     connect(<a class="code" href="classAccountsTable.html#r1">client</a>, SIGNAL(clientClosed(<a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a>)), <span class="keyword">this</span>, SLOT(<a class="code" href="classAccountsTable.html#i1">unpopulate</a>()));
00046 
00047     setLeftMargin(0);
00048     setVScrollBarMode(QScrollView::AlwaysOn);
00049     setSelectionMode(QTable::NoSelection);
00050     setFocusStyle(QTable::SpreadSheet);
00051     
00052     insertColumns(0,2);
00053     
00054     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstringlist.html">QStringList</a> labels;
00055     labels &lt;&lt; <span class="stringliteral">"Account ID"</span> &lt;&lt; <span class="stringliteral">"Account Description"</span>;
00056     setColumnLabels(labels);
00057     
00058     setColumnStretchable(1, <span class="keyword">true</span>);
00059     
00060     <a class="code" href="classAccountsTable.html#r3">inserting</a> = <span class="keyword">false</span>;
00061     <a class="code" href="classAccountsTable.html#r2">editing</a> = <span class="keyword">false</span>;
00062 }
00063 
<a name="l00064"></a><a class="code" href="classAccountsTable.html#i0">00064</a> <span class="keywordtype">void</span> <a class="code" href="classAccountsTable.html#i0">AccountsTable::populate</a>()
00065 {
00066     <a class="code" href="classAccountsTable.html#i1">unpopulate</a>();
00067     
00068     vector&lt;AccountsData::Account*&gt; accountsVec = accountsData-&gt;<a class="code" href="classAccountsData.html#a5">getAccounts</a>();
00069     Q_UINT16 key = 0;
00070     <span class="keywordflow">for</span>(vector&lt;AccountsData::Account*&gt;::const_iterator it = accountsVec.begin();
00071                     it != accountsVec.end(); ++it)
00072     {
00073         key++;
00074         <span class="keywordflow">if</span>((*it) != 0)
00075         {
00076             insertRows(0);
00077             setItem(0, 0, <span class="keyword">new</span> <a class="code" href="classAccountsEditId.html">AccountsEditId</a>(<span class="keyword">this</span>, (*it)-&gt;id, key));
00078             setItem(0, 1, <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qtableitem.html">QTableItem</a>(<span class="keyword">this</span>, QTableItem::OnTyping,
00079                 (*it)-&gt;desc));
00080         }
00081     }
00082 
00083     insertRows(0);
00084     setItem(0, 0, <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qtableitem.html">QTableItem</a>(<span class="keyword">this</span>, QTableItem::Never,
00085         accountsData-&gt;<a class="code" href="classAccountsData.html#a11">getREAccountId</a>()));
00086     setItem(0, 1, <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qtableitem.html">QTableItem</a>(<span class="keyword">this</span>, QTableItem::OnTyping,
00087         accountsData-&gt;<a class="code" href="classAccountsData.html#a12">getREAccountDesc</a>()));
00088 
00089     setColumnReadOnly(0, <span class="keyword">true</span>);
00090     
00091     sortColumn(0, <span class="keyword">true</span>, <span class="keyword">true</span>);
00092 
00093     setCurrentCell(0,1);
00094 }
00095 
<a name="l00096"></a><a class="code" href="classAccountsTable.html#i1">00096</a> <span class="keywordtype">void</span> <a class="code" href="classAccountsTable.html#i1">AccountsTable::unpopulate</a>()
00097 {
00098     <span class="keywordtype">int</span> rows = numRows();
00099     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> row = 0; row &lt; rows; row++)
00100         removeRow(0);
00101 }
00102 
<a name="l00103"></a><a class="code" href="classAccountsTable.html#d1">00103</a> <span class="keywordtype">void</span> <a class="code" href="classAccountsTable.html#d1">AccountsTable::insert</a>()
00104 {
00105     <a class="code" href="classAccountsTable.html#r3">inserting</a> = <span class="keyword">true</span>;
00106 
00107     <span class="keywordtype">int</span> newRow = numRows();
00108     insertRows(newRow);
00109 
00110     <a class="code" href="classAccountsTable.html#r2">editing</a> = <span class="keyword">true</span>;
00111 
00112     ensureCellVisible(newRow, 0);
00113     setItem(newRow, 0, <span class="keyword">new</span> <a class="code" href="classAccountsEditId.html">AccountsEditId</a>(<span class="keyword">this</span>, <span class="stringliteral">""</span>,
00114                             accountsData-&gt;<a class="code" href="classAccountsData.html#a8">getNextAccountKey</a>()));
00115     setColumnReadOnly(0, <span class="keyword">false</span>);
00116     setItem(newRow, 1, <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qtableitem.html">QTableItem</a>(<span class="keyword">this</span>, QTableItem::Never, <span class="stringliteral">""</span>));
00117     setCurrentCell(newRow,0);
00118 
00119     beginEdit(newRow, 0, <span class="keyword">false</span>);
00120 }
00121 
<a name="l00122"></a><a class="code" href="classAccountsTable.html#d2">00122</a> <span class="keywordtype">void</span> <a class="code" href="classAccountsTable.html#d2">AccountsTable::remove</a>(<span class="keywordtype">int</span> row)
00123 {
00124     <span class="keywordflow">if</span>(text(row, 0) == accountsData-&gt;<a class="code" href="classAccountsData.html#a11">getREAccountId</a>())
00125         <span class="keywordflow">return</span>;
00126 
00127     Q_UINT16 key = ((<a class="code" href="classAccountsEditId.html">AccountsEditId</a>*)(item(row, 0)))-&gt;getKey();
00128 
00129     <span class="keywordflow">if</span>(accountsData-&gt;<a class="code" href="classAccountsData.html#a15">accountHasEntries</a>(text(row, 0)))
00130     {
00131         <a class="codeRef" doxygen="doxy-qt.tag:" href="qdialog.html">QDialog</a> *dialog = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qdialog.html">QDialog</a>;
00132         dialog-&gt;setCaption(<span class="stringliteral">"Delete Record"</span>);
00133 
00134         <a class="codeRef" doxygen="doxy-qt.tag:" href="qvboxlayout.html">QVBoxLayout</a> *vBoxLayout = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qvboxlayout.html">QVBoxLayout</a>(dialog);
00135         vBoxLayout-&gt;setMargin(5);
00136         vBoxLayout-&gt;setSpacing(5);
00137 
00138         <a class="codeRef" doxygen="doxy-qt.tag:" href="qlabel.html">QLabel</a> *label = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qlabel.html">QLabel</a>(<span class="stringliteral">"&lt;nobr&gt;Cannot delete account "</span> + text(row, 0)
00139                 + <span class="stringliteral">"&lt;/nobr&gt;;&lt;br&gt;"</span>
00140                 <span class="stringliteral">"&lt;nobr&gt;there is data associated with this account.&lt;/nobr&gt;"</span>,
00141                 dialog);
00142         
00143         vBoxLayout-&gt;addWidget(label);
00144 
00145         vBoxLayout-&gt;addSpacing(10);
00146 
00147         <a class="codeRef" doxygen="doxy-qt.tag:" href="qhboxlayout.html">QHBoxLayout</a> *hBoxLayout = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qhboxlayout.html">QHBoxLayout</a>(vBoxLayout);
00148         hBoxLayout-&gt;setSpacing(5);
00149 
00150         <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a> *okButton = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(<a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>(
00151                                 QPixmap::fromMimeSource(ICON_PATH
00152                                 + <span class="stringliteral">"/okButton.png"</span>)), <span class="stringliteral">"OK"</span>, dialog);
00153         connect(okButton, SIGNAL(clicked()), dialog, SLOT(accept()));
00154 
00155         hBoxLayout-&gt;addStretch();
00156         hBoxLayout-&gt;addWidget(okButton);
00157 
00158         dialog-&gt;exec();
00159 
00160         <span class="keyword">delete</span> dialog;
00161     }
00162     <span class="keywordflow">else</span>
00163     {    
00164         <a class="codeRef" doxygen="doxy-qt.tag:" href="qdialog.html">QDialog</a> *dialog = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qdialog.html">QDialog</a>;
00165         dialog-&gt;setCaption(<span class="stringliteral">"Delete Record"</span>);
00166 
00167         <a class="codeRef" doxygen="doxy-qt.tag:" href="qvboxlayout.html">QVBoxLayout</a> *vBoxLayout = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qvboxlayout.html">QVBoxLayout</a>(dialog);
00168         vBoxLayout-&gt;setMargin(5);
00169         vBoxLayout-&gt;setSpacing(5);
00170 
00171         <a class="codeRef" doxygen="doxy-qt.tag:" href="qlabel.html">QLabel</a> *label = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qlabel.html">QLabel</a>(<span class="stringliteral">"&lt;nobr&gt;Are you sure you want to delete the selected record?&lt;/nobr&gt;"</span>, dialog);
00172 
00173         vBoxLayout-&gt;addWidget(label);
00174 
00175         vBoxLayout-&gt;addSpacing(10);
00176 
00177         <a class="codeRef" doxygen="doxy-qt.tag:" href="qhboxlayout.html">QHBoxLayout</a> *hBoxLayout = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qhboxlayout.html">QHBoxLayout</a>(vBoxLayout);
00178         hBoxLayout-&gt;setSpacing(5);
00179 
00180         <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a> *buttonDelete = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(<a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>(QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/deleteButton.png"</span>)),
00181                                  <span class="stringliteral">"Delete"</span>, dialog);
00182         connect(buttonDelete, SIGNAL(clicked()), dialog, SLOT(accept()));
00183 
00184         QPushButton *buttonDontDelete = <span class="keyword">new</span> QPushButton(<a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>(QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/okButton.png"</span>)),
00185                                      <span class="stringliteral">"Don't Delete"</span>, dialog);
00186         connect(buttonDontDelete, SIGNAL(clicked()), dialog, SLOT(reject()));
00187 
00188         buttonDontDelete-&gt;setDefault(<span class="keyword">true</span>);
00189 
00190         hBoxLayout-&gt;addStretch();
00191         hBoxLayout-&gt;addWidget(buttonDelete);
00192         hBoxLayout-&gt;addWidget(buttonDontDelete);
00193 
00194         <span class="keywordflow">if</span>(dialog-&gt;exec())
00195         {
00196             accountsData-&gt;<a class="code" href="classAccountsData.html#a7">deleteAccount</a>(key);
00197             removeRow(row);
00198 
00199             <span class="keywordflow">if</span>(row &gt; 0)
00200                 setCurrentCell(row - 1, 1);
00201             <span class="keywordflow">else</span>
00202                 setCurrentCell(0, 1);
00203         }
00204 
00205         <span class="keyword">delete</span> dialog;
00206     }
00207 }
00208 
<a name="l00209"></a><a class="code" href="classAccountsTable.html#d3">00209</a> <span class="keywordtype">void</span> <a class="code" href="classAccountsTable.html#d3">AccountsTable::updateDb</a>()
00210 {
00211     <span class="keywordtype">int</span> row = currentRow();
00212 
00213     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> <span class="keywordtype">id</span> = text(row, 0);
00214 
00215     <span class="keywordflow">if</span>(<span class="keywordtype">id</span> == accountsData-&gt;<a class="code" href="classAccountsData.html#a11">getREAccountId</a>())
00216     {
00217         accountsData-&gt;<a class="code" href="classAccountsData.html#a10">setREAccountDesc</a>(text(row,1));
00218         <span class="keywordflow">return</span>;
00219     }
00220 
00221     Q_UINT16 key = ((<a class="code" href="classAccountsEditId.html">AccountsEditId</a>*)(item(row, 0)))-&gt;getKey();
00222     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> desc = text(row, 1);
00223     
00224     <span class="keywordflow">if</span>(desc == <span class="stringliteral">""</span>)
00225     {
00226         desc = <span class="stringliteral">"No Description"</span>;
00227         setText(currentRow(), 1, desc);
00228     }
00229 
00230     accountsData-&gt;<a class="code" href="classAccountsData.html#a6">updateAccount</a>(key, <span class="keywordtype">id</span>, desc);
00231 }
00232 
<a name="l00233"></a><a class="code" href="classAccountsTable.html#d0">00233</a> <span class="keywordtype">void</span> <a class="code" href="classAccountsTable.html#d0">AccountsTable::keyPressEvent</a>(<a class="codeRef" doxygen="doxy-qt.tag:" href="qkeyevent.html">QKeyEvent</a> *event)
00234 {
00235     <span class="keywordflow">switch</span>(event-&gt;key())
00236     {
00237         <span class="keywordflow">case</span> Key_Insert:
00238             <span class="keywordflow">if</span>(!<a class="code" href="classAccountsTable.html#r3">inserting</a>)
00239                 <a class="code" href="classAccountsTable.html#d1">insert</a>();
00240             <span class="keywordflow">break</span>;
00241         <span class="keywordflow">case</span> Key_Delete:
00242             <span class="keywordflow">if</span>(!<a class="code" href="classAccountsTable.html#r2">editing</a>)
00243                 <a class="code" href="classAccountsTable.html#d2">remove</a>(currentRow());
00244             <span class="keywordflow">else</span>
00245                 ((<a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a>*)cellWidget(currentRow(), currentColumn()))-&gt;del();
00246             <span class="keywordflow">break</span>;
00247         <span class="keywordflow">case</span> Key_Tab:
00248             <span class="keywordflow">break</span>;
00249         <span class="keywordflow">case</span> Key_Enter:
00250         <span class="keywordflow">case</span> Key_Return:
00251             <span class="keywordflow">if</span>(<a class="code" href="classAccountsTable.html#r3">inserting</a>)
00252             {
00253                 <span class="keywordflow">if</span>(currentColumn() == 0)
00254                 {
00255                     endEdit(currentRow(), 0, <span class="keyword">true</span>, <span class="keyword">true</span>);
00256 
00257                     <span class="keywordflow">if</span>(accountsData-&gt;<a class="code" href="classAccountsData.html#a16">accountIdExists</a>(text(currentRow(), 0)))
00258                     {
00259                         beginEdit(currentRow(), 0, <span class="keyword">true</span>);
00260                         <span class="keywordflow">break</span>;
00261                     }
00262                     <span class="keywordflow">else</span>
00263                     {
00264                         setCurrentCell(currentRow(), 1);
00265                         beginEdit(currentRow(), 1, <span class="keyword">true</span>);
00266                         <span class="keywordflow">break</span>;
00267                     }
00268                 }
00269                 <span class="keywordflow">else</span>
00270                 {
00271                     <a class="code" href="classAccountsTable.html#r2">editing</a> = <span class="keyword">false</span>;
00272                     <a class="code" href="classAccountsTable.html#r3">inserting</a> = <span class="keyword">false</span>;
00273                     endEdit(currentRow(), 1, <span class="keyword">true</span>, <span class="keyword">true</span>);
00274                     <a class="code" href="classAccountsTable.html#d3">updateDb</a>();
00275                     sortColumn(0, <span class="keyword">true</span>, <span class="keyword">true</span>);
00276                     <span class="keywordflow">break</span>;
00277                 }
00278             }
00279             <span class="keywordflow">else</span>
00280             {
00281                 <span class="keywordflow">if</span>(<a class="code" href="classAccountsTable.html#r2">editing</a>)
00282                 {
00283                     <a class="code" href="classAccountsTable.html#r2">editing</a> = <span class="keyword">false</span>;
00284                     endEdit(currentRow(), 1, <span class="keyword">true</span>, <span class="keyword">true</span>);
00285                     <a class="code" href="classAccountsTable.html#d3">updateDb</a>();
00286                     setCurrentCell(currentRow(), 1);
00287                     sortColumn(0, <span class="keyword">true</span>, <span class="keyword">true</span>);
00288                     <span class="keywordflow">break</span>;
00289                 }
00290                 <span class="keywordflow">else</span>
00291                 {
00292                     <a class="code" href="classAccountsTable.html#r2">editing</a> = <span class="keyword">true</span>;
00293                     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> oldText = text(currentRow(), 1);
00294                     <a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a> *editor = (<a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a>*)beginEdit(currentRow(), 1, <span class="keyword">true</span>);
00295                     editor-&gt;insert(oldText);
00296                     editor-&gt;selectAll();
00297                     <span class="keywordflow">break</span>;
00298                 }
00299             }
00300         <span class="keywordflow">case</span> Key_Escape:
00301             <span class="keywordflow">if</span>(<a class="code" href="classAccountsTable.html#r3">inserting</a>)
00302             {
00303                 <a class="code" href="classAccountsTable.html#r2">editing</a> = <span class="keyword">false</span>;
00304                 <a class="code" href="classAccountsTable.html#r3">inserting</a> = <span class="keyword">false</span>;
00305                 endEdit(currentRow(), currentColumn(), <span class="keyword">false</span>, <span class="keyword">false</span>);
00306                 removeRow(currentRow());
00307                 setCurrentCell(numRows(), 1);
00308                 <span class="keywordflow">break</span>;
00309             }
00310             <span class="keywordflow">if</span>(<a class="code" href="classAccountsTable.html#r2">editing</a>)
00311             {
00312                 <a class="code" href="classAccountsTable.html#r2">editing</a> = <span class="keyword">false</span>;
00313                 endEdit(currentRow(), currentColumn(), <span class="keyword">false</span>, <span class="keyword">false</span>);
00314                 <span class="keywordflow">break</span>;
00315             }
00316 
00317             emit <a class="code" href="classAccountsTable.html#l0">switchToHome</a>();
00318             <span class="keywordflow">break</span>;
00319         <span class="keywordflow">case</span> Key_Up:
00320         <span class="keywordflow">case</span> Key_Left:
00321         <span class="keywordflow">case</span> Key_Down:
00322         <span class="keywordflow">case</span> Key_Right:
00323         <span class="keywordflow">case</span> Key_Home:
00324         <span class="keywordflow">case</span> Key_End:
00325         <span class="keywordflow">case</span> Key_PageUp:
00326         <span class="keywordflow">case</span> Key_PageDown:
00327             <span class="keywordflow">if</span>(<a class="code" href="classAccountsTable.html#r2">editing</a>)
00328             {
00329                 <span class="keywordtype">int</span> curRow = currentRow();
00330                 <span class="keywordtype">int</span> curCol = currentColumn();
00331 
00332                 <span class="keywordflow">switch</span>(event-&gt;key())
00333                 {
00334                     <span class="keywordflow">case</span> Key_Right:
00335                         ((<a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a>*)cellWidget(curRow, curCol))-&gt;cursorForward(<span class="keyword">false</span>);
00336                         <span class="keywordflow">break</span>;
00337                     <span class="keywordflow">case</span> Key_Left:
00338                         ((<a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a>*)cellWidget(curRow, curCol))-&gt;cursorBackward(<span class="keyword">false</span>);
00339                         <span class="keywordflow">break</span>;
00340                     <span class="keywordflow">case</span> Key_Home:
00341                         ((<a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a>*)cellWidget(curRow, curCol))-&gt;home(<span class="keyword">false</span>);
00342                         <span class="keywordflow">break</span>;
00343                     <span class="keywordflow">case</span> Key_End:
00344                         ((<a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a>*)cellWidget(curRow, curCol))-&gt;end(<span class="keyword">false</span>);
00345                         <span class="keywordflow">break</span>;
00346                     <span class="keywordflow">default</span>:
00347                         <span class="keywordflow">break</span>;
00348                 }
00349             }
00350             <span class="keywordflow">else</span>
00351             {
00352                 <span class="keywordflow">if</span>(event-&gt;key() == Key_Left)
00353                     <span class="keywordflow">break</span>;
00354                 
00355                 QTable::keyPressEvent(event);
00356                 <span class="keywordflow">break</span>;
00357             }
00358         <span class="keywordflow">case</span> Key_F1:
00359             emit <a class="code" href="classAccountsTable.html#l0">switchToHome</a>();
00360             <span class="keywordflow">break</span>;
00361         <span class="keywordflow">case</span> Key_F2:
00362             <span class="keywordflow">break</span>;
00363         <span class="keywordflow">case</span> Key_F3:
00364             emit <a class="code" href="classAccountsTable.html#l1">switchToJournal</a>();
00365             <span class="keywordflow">break</span>;
00366         <span class="keywordflow">case</span> Key_F4:
00367             emit <a class="code" href="classAccountsTable.html#l2">switchToReports</a>();
00368             <span class="keywordflow">break</span>;
00369         <span class="keywordflow">case</span> Key_F5:
00370             emit <a class="code" href="classAccountsTable.html#l3">switchToHelp</a>();
00371             <span class="keywordflow">break</span>;
00372         <span class="keywordflow">default</span>:
00373             <span class="keywordflow">break</span>;
00374     }
00375 }
00376 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Jan 16 16:23:27 2005 for General Ledger by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
