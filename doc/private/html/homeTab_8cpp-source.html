<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>General Ledger: homeTab.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>homeTab.cpp</h1><a href="homeTab_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/* General Ledger, Copyright (C) 2004  Joshua Eckroth &lt;josh@eckroth.net&gt;</span>
00002 <span class="comment"> * http://www.eckroth.net/software/genledg</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
00005 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
00006 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
00007 <span class="comment"> * (at your option) any later version.</span>
00008 <span class="comment"> * </span>
00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00012 <span class="comment"> * GNU General Public License for more details.</span>
00013 <span class="comment"> * </span>
00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
00015 <span class="comment"> * along with this program; if not, write to the Free Software</span>
00016 <span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  US</span>
00017 <span class="comment">*/</span>
00018 
00019 <span class="preprocessor">#include &lt;qwidgetstack.h&gt;</span>
00020 <span class="preprocessor">#include &lt;qlayout.h&gt;</span>
00021 <span class="preprocessor">#include &lt;qvgroupbox.h&gt;</span>
00022 <span class="preprocessor">#include &lt;qpushbutton.h&gt;</span>
00023 <span class="preprocessor">#include &lt;qiconset.h&gt;</span>
00024 <span class="preprocessor">#include &lt;qpixmap.h&gt;</span>
00025 <span class="preprocessor">#include &lt;qdialog.h&gt;</span>
00026 <span class="preprocessor">#include &lt;qlineedit.h&gt;</span>
00027 <span class="preprocessor">#include &lt;qlabel.h&gt;</span>
00028 <span class="preprocessor">#include &lt;qlistbox.h&gt;</span>
00029 <span class="preprocessor">#include &lt;qcombobox.h&gt;</span>
00030 <span class="preprocessor">#include &lt;qfiledialog.h&gt;</span>
00031 <span class="preprocessor">#include &lt;qevent.h&gt;</span>
00032 <span class="preprocessor">#include &lt;qregexp.h&gt;</span>
00033 <span class="preprocessor">#include &lt;qfile.h&gt;</span>
00034 <span class="preprocessor">#include &lt;qregexp.h&gt;</span>
00035 <span class="preprocessor">#include &lt;qvalidator.h&gt;</span>
00036 
00037 <span class="preprocessor">#include "<a class="code" href="homeTab_8h.html">homeTab.h</a>"</span>
00038 <span class="preprocessor">#include "config.h"</span>
00039 <span class="preprocessor">#include "<a class="code" href="client_8h.html">client.h</a>"</span>
00040 <span class="preprocessor">#include "<a class="code" href="settings_8h.html">settings.h</a>"</span>
00041 <span class="preprocessor">#include "<a class="code" href="journalData_8h.html">journalData.h</a>"</span>
00042 <span class="preprocessor">#include "<a class="code" href="globalCloseDialog_8h.html">globalCloseDialog.h</a>"</span>
00043 
<a name="l00044"></a><a class="code" href="classHomeTab.html#a0">00044</a> <a class="code" href="classHomeTab.html#a0">HomeTab::HomeTab</a>(<a class="codeRef" doxygen="doxy-qt.tag:" href="qwidget.html">QWidget</a> *parent, <span class="keyword">const</span> <span class="keywordtype">char</span> *name)
00045     : <a class="codeRef" doxygen="doxy-qt.tag:" href="qwidgetstack.html">QWidgetStack</a>(parent,name)
00046 {
00047     client = <a class="code" href="classClient.html#e0">Client::instance</a>();
00048     connect(client, SIGNAL(<a class="code" href="classHomeTab.html#k0">clientOpened</a>(<a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a>)), <span class="keyword">this</span>, SLOT(<a class="code" href="classHomeTab.html#k0">clientOpened</a>(<a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a>)));
00049 
00050     settings = <a class="code" href="classSettings.html#e0">Settings::instance</a>();
00051 
00052     journalData = <a class="code" href="classJournalData.html#e0">JournalData::instance</a>();
00053 
00054     main.widget = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qwidget.html">QWidget</a>(<span class="keyword">this</span>, <span class="stringliteral">"homeTab::main.widget"</span>);
00055     
00056     main.hBoxLayout = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qhboxlayout.html">QHBoxLayout</a>(main.widget, 0, -1, <span class="stringliteral">"homeTab::main.hBoxLayout"</span>);
00057     
00058     main.hBoxLayout-&gt;addStretch();
00059     
00060     main.vBoxLayout = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qvboxlayout.html">QVBoxLayout</a>(main.hBoxLayout, -1, <span class="stringliteral">"homeTab::main.vBoxLayout"</span>);
00061     
00062     main.vBoxLayout-&gt;addStretch();
00063     
00064     main.mainGroup = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qvgroupbox.html">QVGroupBox</a>(<span class="stringliteral">"Main Options"</span>, main.widget, <span class="stringliteral">"homeTab::main.mainGroup"</span>);
00065     main.mainGroup-&gt;setInsideMargin(30);
00066     main.mainGroup-&gt;setInsideSpacing(20);
00067     
00068     main.vBoxLayout-&gt;add(main.mainGroup);
00069 
00070     <span class="keywordtype">bool</span> openDefaultReady = (client-&gt;<a class="code" href="classClient.html#a7">getClientName</a>() != <span class="stringliteral">""</span> &amp;&amp; client-&gt;<a class="code" href="classClient.html#a10">defaultClientExists</a>());
00071     
00072     <span class="keywordflow">if</span>(openDefaultReady)
00073     {
00074         main.openDefaultButton = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(
00075                 <a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>( QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/openDefButton.png"</span>) ),
00076                 <span class="stringliteral">"Open "</span> + client-&gt;<a class="code" href="classClient.html#a7">getClientName</a>(), main.mainGroup, <span class="stringliteral">"homeTab::main.openDefaultButton"</span>);
00077         connect(main.openDefaultButton, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classHomeTab.html#k1">openDefault</a>()));
00078         main.openDefaultButton-&gt;installEventFilter(<span class="keyword">this</span>);
00079     }
00080     <span class="keywordflow">else</span>
00081     {
00082         main.openDefaultButton = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(
00083                 <a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>( QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/openDefButton.png"</span>) ),
00084                 <span class="stringliteral">"Open ..."</span>, main.mainGroup, <span class="stringliteral">"homeTab::main.openDefaultButton"</span>);
00085         main.openDefaultButton-&gt;setEnabled(<span class="keyword">false</span>);
00086     }
00087     
00088     main.openNewButton = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(
00089             <a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>( QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/openNewButton.png"</span>) ),
00090             <span class="stringliteral">"Open a Different Client"</span>, main.mainGroup, <span class="stringliteral">"homeTab::main.openNewButton"</span>);
00091     connect(main.openNewButton, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classHomeTab.html#k2">openNewDialog</a>()));
00092     main.openNewButton-&gt;installEventFilter(<span class="keyword">this</span>);
00093     
00094     main.createNewButton = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(
00095             <a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>( QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/createNewButton.png"</span>) ),
00096             <span class="stringliteral">"Create a New Client"</span>, main.mainGroup, <span class="stringliteral">"homeTab::main.createNewButton"</span>);
00097     connect(main.createNewButton, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classHomeTab.html#k3">createNewDialog</a>()));
00098     main.createNewButton-&gt;installEventFilter(<span class="keyword">this</span>);
00099     
00100     main.vBoxLayout-&gt;addSpacing(30);
00101     
00102     main.otherGroup = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qvgroupbox.html">QVGroupBox</a>(<span class="stringliteral">"Other Options"</span>, main.widget, <span class="stringliteral">"homeTab::main.otherGroup"</span>);
00103     main.otherGroup-&gt;setInsideMargin(30);
00104     main.otherGroup-&gt;setInsideSpacing(20);
00105     
00106     main.vBoxLayout-&gt;add(main.otherGroup);
00107     
00108     main.pathButton = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(
00109             <a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>( QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/pathButton.png"</span>) ),
00110             <span class="stringliteral">"Change Client Folder"</span>, main.otherGroup, <span class="stringliteral">"homeTab::main.pathButton"</span>);
00111     connect(main.pathButton, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classHomeTab.html#k5">changePath</a>()));
00112     main.pathButton-&gt;installEventFilter(<span class="keyword">this</span>);
00113 
00114     main.quitButton = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(
00115             <a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>( QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/quitButton.png"</span>) ),
00116             <span class="stringliteral">"Quit General Ledger"</span>, main.otherGroup, <span class="stringliteral">"homeTab::main.quitButton"</span>);
00117     connect(main.quitButton, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classHomeTab.html#k6">prepareQuit</a>()));
00118     main.quitButton-&gt;installEventFilter(<span class="keyword">this</span>);
00119     
00120     main.vBoxLayout-&gt;addStretch();
00121     
00122     main.hBoxLayout-&gt;addStretch();
00123     
00124     addWidget(main.widget, 0);
00125 
00126     <span class="keywordflow">if</span>(openDefaultReady)
00127         main.openDefaultButton-&gt;setDefault(<span class="keyword">true</span>);
00128     <span class="keywordflow">else</span>
00129         main.openNewButton-&gt;setDefault(<span class="keyword">true</span>);
00130  
00131     <a class="code" href="classHomeTab.html#r3">active</a> = 0;
00132 }
00133 
<a name="l00134"></a><a class="code" href="classHomeTab.html#k0">00134</a> <span class="keywordtype">void</span> <a class="code" href="classHomeTab.html#k0">HomeTab::clientOpened</a>(<a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> clientName)
00135 {
00136     main.openDefaultButton-&gt;setText(<span class="stringliteral">"Open "</span> + clientName);
00137     main.openDefaultButton-&gt;setEnabled(<span class="keyword">true</span>);
00138     main.openDefaultButton-&gt;installEventFilter(<span class="keyword">this</span>);
00139     disconnect(main.openDefaultButton, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classHomeTab.html#k1">openDefault</a>()));
00140     connect(main.openDefaultButton, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classHomeTab.html#k1">openDefault</a>()));
00141     
00142     <a class="code" href="classHomeTab.html#r3">active</a> = 0;
00143 
00144     <span class="keywordflow">if</span>(<a class="code" href="classHomeTab.html#r4">widget</a>(1))
00145     {
00146         removeWidget(<a class="code" href="classHomeTab.html#r28">tasks</a>.widget);
00147         <span class="comment">//delete tasks.cryptButton;</span>
00148         <span class="keyword">delete</span> <a class="code" href="classHomeTab.html#r28">tasks</a>.editNameButton;
00149         <span class="keyword">delete</span> <a class="code" href="classHomeTab.html#r28">tasks</a>.adminGroup;
00150         <span class="keyword">delete</span> <a class="code" href="classHomeTab.html#r28">tasks</a>.reportButton;
00151         <span class="keyword">delete</span> <a class="code" href="classHomeTab.html#r28">tasks</a>.journalButton;
00152         <span class="keyword">delete</span> <a class="code" href="classHomeTab.html#r28">tasks</a>.accountsButton;
00153         <span class="keyword">delete</span> <a class="code" href="classHomeTab.html#r28">tasks</a>.clientGroup;
00154         <span class="keyword">delete</span> <a class="code" href="classHomeTab.html#r28">tasks</a>.vBoxLayout;
00155         <span class="keyword">delete</span> <a class="code" href="classHomeTab.html#r28">tasks</a>.hBoxLayout;
00156         <span class="keyword">delete</span> <a class="code" href="classHomeTab.html#r28">tasks</a>.closeButton;
00157         <span class="keyword">delete</span> <a class="code" href="classHomeTab.html#r28">tasks</a>.hBoxLabel;
00158         <span class="keyword">delete</span> <a class="code" href="classHomeTab.html#r28">tasks</a>.vBoxLabel;
00159         <span class="keyword">delete</span> <a class="code" href="classHomeTab.html#r28">tasks</a>.widget;
00160     }
00161     
00162     <a class="code" href="classHomeTab.html#r28">tasks</a>.widget = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qwidget.html">QWidget</a>(<span class="keyword">this</span>, <span class="stringliteral">"homeTab::tasks.widget"</span>);
00163     
00164     <a class="code" href="classHomeTab.html#r28">tasks</a>.vBoxLabel = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qvboxlayout.html">QVBoxLayout</a>(<a class="code" href="classHomeTab.html#r28">tasks</a>.widget, 0, -1, <span class="stringliteral">"homeTab::tasks.vBoxLabel"</span>);
00165     
00166     <a class="code" href="classHomeTab.html#r28">tasks</a>.hBoxLabel = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qhboxlayout.html">QHBoxLayout</a>(<a class="code" href="classHomeTab.html#r28">tasks</a>.vBoxLabel, -1, <span class="stringliteral">"homeTab::tasks.hBoxLabel"</span>);
00167     <a class="code" href="classHomeTab.html#r28">tasks</a>.hBoxLabel-&gt;setMargin(5);
00168     
00169     <a class="code" href="classHomeTab.html#r28">tasks</a>.closeButton = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(
00170             <a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>( QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/closeClient.png"</span>) ),
00171             <span class="stringliteral">"Close Client (F8)"</span>, <a class="code" href="classHomeTab.html#r28">tasks</a>.widget, <span class="stringliteral">"homeTab::tasks.closeButton"</span>);
00172     <a class="code" href="classHomeTab.html#r28">tasks</a>.closeButton-&gt;setFocusPolicy(QWidget::NoFocus);
00173     connect(<a class="code" href="classHomeTab.html#r28">tasks</a>.closeButton, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classHomeTab.html#i0">closeClient</a>()));
00174     
00175     <a class="code" href="classHomeTab.html#r28">tasks</a>.hBoxLabel-&gt;addStretch();
00176     <a class="code" href="classHomeTab.html#r28">tasks</a>.hBoxLabel-&gt;addWidget(<a class="code" href="classHomeTab.html#r28">tasks</a>.closeButton);
00177     
00178     <a class="code" href="classHomeTab.html#r28">tasks</a>.hBoxLayout = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qhboxlayout.html">QHBoxLayout</a>(<a class="code" href="classHomeTab.html#r28">tasks</a>.vBoxLabel, -1, <span class="stringliteral">"homeTab::tasks.hBoxLayout"</span>);
00179     
00180     <a class="code" href="classHomeTab.html#r28">tasks</a>.hBoxLayout-&gt;addStretch();
00181     
00182     <a class="code" href="classHomeTab.html#r28">tasks</a>.vBoxLayout = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qvboxlayout.html">QVBoxLayout</a>(<a class="code" href="classHomeTab.html#r28">tasks</a>.hBoxLayout, -1, <span class="stringliteral">"homeTab::tasks.vBoxLayout"</span>);
00183     
00184     <a class="code" href="classHomeTab.html#r28">tasks</a>.vBoxLayout-&gt;addStretch();
00185     
00186     <a class="code" href="classHomeTab.html#r28">tasks</a>.clientGroup = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qvgroupbox.html">QVGroupBox</a>(<span class="stringliteral">"Client Tasks"</span>, <a class="code" href="classHomeTab.html#r28">tasks</a>.widget, <span class="stringliteral">"homeTab::tasks.clientGroup"</span>);
00187     <a class="code" href="classHomeTab.html#r28">tasks</a>.clientGroup-&gt;setInsideMargin(30);
00188     <a class="code" href="classHomeTab.html#r28">tasks</a>.clientGroup-&gt;setInsideSpacing(20);
00189     
00190     <a class="code" href="classHomeTab.html#r28">tasks</a>.vBoxLayout-&gt;add(<a class="code" href="classHomeTab.html#r28">tasks</a>.clientGroup);
00191     
00192     <a class="code" href="classHomeTab.html#r28">tasks</a>.accountsButton = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(
00193             <a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>( QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/accountsTab.png"</span>) ),
00194             <span class="stringliteral">"Accounts"</span>, <a class="code" href="classHomeTab.html#r28">tasks</a>.clientGroup, <span class="stringliteral">"homeTab::tasks.accountsButton"</span>);
00195     connect(<a class="code" href="classHomeTab.html#r28">tasks</a>.accountsButton, SIGNAL(clicked()), <span class="keyword">this</span>, SIGNAL(<a class="code" href="classHomeTab.html#l0">switchToAccounts</a>()));
00196     <a class="code" href="classHomeTab.html#r28">tasks</a>.accountsButton-&gt;setDefault(<span class="keyword">true</span>);
00197     <a class="code" href="classHomeTab.html#r28">tasks</a>.accountsButton-&gt;setFocus();
00198     <a class="code" href="classHomeTab.html#r28">tasks</a>.focusedButton = <a class="code" href="classHomeTab.html#r28">tasks</a>.accountsButton;
00199     <a class="code" href="classHomeTab.html#r28">tasks</a>.accountsButton-&gt;installEventFilter(<span class="keyword">this</span>);
00200     
00201     <a class="code" href="classHomeTab.html#r28">tasks</a>.journalButton = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(
00202             <a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>( QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/journalTab.png"</span>) ),
00203             <span class="stringliteral">"Journal Entry"</span>, <a class="code" href="classHomeTab.html#r28">tasks</a>.clientGroup, <span class="stringliteral">"homeTab::tasks.journalButton"</span>);
00204     connect(<a class="code" href="classHomeTab.html#r28">tasks</a>.journalButton, SIGNAL(clicked()), <span class="keyword">this</span>, SIGNAL(<a class="code" href="classHomeTab.html#l1">switchToJournal</a>()));
00205     <a class="code" href="classHomeTab.html#r28">tasks</a>.journalButton-&gt;installEventFilter(<span class="keyword">this</span>);
00206     
00207     <a class="code" href="classHomeTab.html#r28">tasks</a>.reportButton = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(
00208             <a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>( QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/reportsTab.png"</span>) ),
00209             <span class="stringliteral">"Reports"</span>, <a class="code" href="classHomeTab.html#r28">tasks</a>.clientGroup, <span class="stringliteral">"homeTab::tasks.reportButton"</span>);
00210     connect(<a class="code" href="classHomeTab.html#r28">tasks</a>.reportButton, SIGNAL(clicked()), <span class="keyword">this</span>, SIGNAL(<a class="code" href="classHomeTab.html#l2">switchToReports</a>()));
00211     <a class="code" href="classHomeTab.html#r28">tasks</a>.reportButton-&gt;installEventFilter(<span class="keyword">this</span>);
00212     
00213     <a class="code" href="classHomeTab.html#r28">tasks</a>.vBoxLayout-&gt;addSpacing(30);
00214     
00215     <a class="code" href="classHomeTab.html#r28">tasks</a>.adminGroup = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qvgroupbox.html">QVGroupBox</a>(<span class="stringliteral">"Administrative Options"</span>, <a class="code" href="classHomeTab.html#r28">tasks</a>.widget, <span class="stringliteral">"homeTab::tasks.adminGroup"</span>);
00216     <a class="code" href="classHomeTab.html#r28">tasks</a>.adminGroup-&gt;setInsideMargin(30);
00217     <a class="code" href="classHomeTab.html#r28">tasks</a>.adminGroup-&gt;setInsideSpacing(20);
00218     
00219     <a class="code" href="classHomeTab.html#r28">tasks</a>.vBoxLayout-&gt;add(<a class="code" href="classHomeTab.html#r28">tasks</a>.adminGroup);
00220     
00221     <a class="code" href="classHomeTab.html#r28">tasks</a>.editNameButton = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(
00222             <a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>( QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/editNameButton.png"</span>) ),
00223             <span class="stringliteral">"Edit Client Name"</span>, <a class="code" href="classHomeTab.html#r28">tasks</a>.adminGroup, <span class="stringliteral">"homeTab::tasks.editNameButton"</span>);
00224     connect(<a class="code" href="classHomeTab.html#r28">tasks</a>.editNameButton, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(<a class="code" href="classHomeTab.html#k4">editName</a>()));
00225     <a class="code" href="classHomeTab.html#r28">tasks</a>.editNameButton-&gt;installEventFilter(<span class="keyword">this</span>);
00226     
00227     <span class="comment">/*</span>
00228 <span class="comment">    if(db-&gt;isEncrypted())</span>
00229 <span class="comment">    {</span>
00230 <span class="comment">        tasks.cryptButton = new QPushButton(</span>
00231 <span class="comment">                QIconSet( QPixmap::fromMimeSource(ICON_PATH + "/decryptButton.png") ),</span>
00232 <span class="comment">                "Decrypt Database", tasks.adminGroup, "homeTab::tasks.cryptButton");</span>
00233 <span class="comment">        connect(tasks.cryptButton, SIGNAL(clicked()), this, SLOT(decrypt()));</span>
00234 <span class="comment">    }</span>
00235 <span class="comment">    else</span>
00236 <span class="comment">    {</span>
00237 <span class="comment">        tasks.cryptButton = new QPushButton(</span>
00238 <span class="comment">                QIconSet( QPixmap::fromMimeSource(ICON_PATH + "/encryptButton.png") ),</span>
00239 <span class="comment">                "Encrypt Database with Password", tasks.adminGroup, "homeTab::tasks.cryptButton");</span>
00240 <span class="comment">        connect(tasks.cryptButton, SIGNAL(clicked()), this, SLOT(encrypt()));</span>
00241 <span class="comment">    }</span>
00242 <span class="comment">    tasks.cryptButton-&gt;installEventFilter(this);</span>
00243 <span class="comment">    */</span>
00244     
00245     <a class="code" href="classHomeTab.html#r28">tasks</a>.vBoxLayout-&gt;addStretch();
00246     
00247     <a class="code" href="classHomeTab.html#r28">tasks</a>.hBoxLayout-&gt;addStretch();
00248     
00249     addWidget(<a class="code" href="classHomeTab.html#r28">tasks</a>.widget, 1);
00250         
00251     <a class="code" href="classHomeTab.html#d0">switchWidget</a>();
00252 }
00253 
<a name="l00254"></a><a class="code" href="classHomeTab.html#d0">00254</a> <span class="keywordtype">void</span> <a class="code" href="classHomeTab.html#d0">HomeTab::switchWidget</a>()
00255 {
00256     <span class="keywordflow">if</span>(<a class="code" href="classHomeTab.html#r3">active</a> == 0)
00257     {
00258         raiseWidget(1);
00259         <a class="code" href="classHomeTab.html#r3">active</a> = 1;
00260         <a class="code" href="classHomeTab.html#r28">tasks</a>.focusedButton-&gt;setFocus();
00261     }
00262     <span class="keywordflow">else</span>
00263     {
00264         raiseWidget(0);
00265         <a class="code" href="classHomeTab.html#r3">active</a> = 0;
00266         main.openDefaultButton-&gt;setFocus();
00267     }
00268 }
00269 
<a name="l00270"></a><a class="code" href="classHomeTab.html#d1">00270</a> <span class="keywordtype">bool</span> <a class="code" href="classHomeTab.html#d1">HomeTab::eventFilter</a>(<a class="codeRef" doxygen="doxy-qt.tag:" href="qobject.html">QObject</a> *target, <a class="codeRef" doxygen="doxy-qt.tag:" href="qevent.html">QEvent</a> *event)
00271 {
00272     <span class="keywordflow">if</span>(event-&gt;type() == QEvent::KeyPress)
00273     {
00274         <a class="codeRef" doxygen="doxy-qt.tag:" href="qkeyevent.html">QKeyEvent</a> *keyEvent = (<a class="codeRef" doxygen="doxy-qt.tag:" href="qkeyevent.html">QKeyEvent</a> *)event;
00275         <span class="keywordflow">if</span>(keyEvent-&gt;key() == Key_F8 &amp;&amp; <a class="code" href="classHomeTab.html#r3">active</a> == 1)
00276         {
00277             <a class="code" href="classHomeTab.html#i0">closeClient</a>();
00278             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00279         }
00280     }
00281     <span class="keywordflow">if</span>(event-&gt;type() == QEvent::FocusIn)
00282     {
00283         ((<a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>*)target)-&gt;setDefault(<span class="keyword">true</span>);
00284         <span class="keywordflow">if</span>(<a class="code" href="classHomeTab.html#r3">active</a> == 1)
00285             <a class="code" href="classHomeTab.html#r28">tasks</a>.focusedButton = (<a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>*)target;
00286     }
00287     <span class="keywordflow">if</span>(event-&gt;type() == QEvent::FocusOut)
00288         ((<a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>*)target)-&gt;setDefault(<span class="keyword">false</span>);
00289     
00290     <span class="keywordflow">if</span>(event-&gt;type() == QEvent::Show)
00291     {
00292         <span class="keywordflow">if</span>(<a class="code" href="classHomeTab.html#r3">active</a> == 1)
00293             <a class="code" href="classHomeTab.html#r28">tasks</a>.focusedButton-&gt;setFocus();
00294         <span class="keywordflow">else</span>
00295         {
00296             <span class="keywordflow">if</span>(client-&gt;<a class="code" href="classClient.html#a7">getClientName</a>() != <span class="stringliteral">""</span> &amp;&amp; client-&gt;<a class="code" href="classClient.html#a10">defaultClientExists</a>())
00297                 main.openDefaultButton-&gt;setFocus();
00298             <span class="keywordflow">else</span>
00299                 main.openNewButton-&gt;setFocus();
00300         }
00301     }
00302     
00303     <span class="keywordflow">return</span> QWidgetStack::eventFilter(target,event);
00304 }
00305 
<a name="l00306"></a><a class="code" href="classHomeTab.html#k1">00306</a> <span class="keywordtype">void</span> <a class="code" href="classHomeTab.html#k1">HomeTab::openDefault</a>()
00307 {
00308     client-&gt;<a class="code" href="classClient.html#a3">open</a>(client-&gt;<a class="code" href="classClient.html#a9">defaultClientId</a>());
00309 }
00310 
<a name="l00311"></a><a class="code" href="classHomeTab.html#k2">00311</a> <span class="keywordtype">void</span> <a class="code" href="classHomeTab.html#k2">HomeTab::openNewDialog</a>()
00312 {
00313     <a class="codeRef" doxygen="doxy-qt.tag:" href="qdialog.html">QDialog</a> *dialog = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qdialog.html">QDialog</a>;
00314     dialog-&gt;setCaption(<span class="stringliteral">"Open Client"</span>);
00315     
00316     <a class="codeRef" doxygen="doxy-qt.tag:" href="qvboxlayout.html">QVBoxLayout</a> *vBoxLayout = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qvboxlayout.html">QVBoxLayout</a>(dialog);
00317     vBoxLayout-&gt;setMargin(5);
00318     vBoxLayout-&gt;setSpacing(5);
00319     
00320     <a class="codeRef" doxygen="doxy-qt.tag:" href="qlabel.html">QLabel</a> *label = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qlabel.html">QLabel</a>(<span class="stringliteral">"Choose a Client:"</span>, dialog);
00321     vBoxLayout-&gt;addWidget(label);
00322     
00323     <a class="codeRef" doxygen="doxy-qt.tag:" href="qlistbox.html">QListBox</a> *listBox = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qlistbox.html">QListBox</a>(dialog);
00324     listBox-&gt;setFocus();
00325     listBox-&gt;insertStringList(client-&gt;<a class="code" href="classClient.html#a8">getAllClients</a>());
00326     listBox-&gt;setSelected(0, <span class="keyword">true</span>);
00327     connect(listBox, SIGNAL(selected(<a class="codeRef" doxygen="doxy-qt.tag:" href="qlistboxitem.html">QListBoxItem</a>*)), dialog, SLOT(accept()));
00328     
00329     vBoxLayout-&gt;addWidget(listBox);
00330     vBoxLayout-&gt;addSpacing(10);
00331     
00332     <a class="codeRef" doxygen="doxy-qt.tag:" href="qhboxlayout.html">QHBoxLayout</a> *hBoxLayout = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qhboxlayout.html">QHBoxLayout</a>(vBoxLayout);
00333     hBoxLayout-&gt;setSpacing(5);
00334    
00335     <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a> *okButton = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(<a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>(
00336                     QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/openNewButton.png"</span>)),
00337                     <span class="stringliteral">"Open"</span>, dialog, <span class="stringliteral">"homeTab::openNewDialog()::okButton"</span>);
00338     okButton-&gt;setDefault(<span class="keyword">true</span>);
00339     connect(okButton, SIGNAL(clicked()), dialog, SLOT(accept()));
00340     
00341     QPushButton *cancelButton = <span class="keyword">new</span> QPushButton(<a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>(
00342                     QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/cancelButton.png"</span>)),
00343                     <span class="stringliteral">"Cancel"</span>, dialog);
00344     connect(cancelButton, SIGNAL(clicked()), dialog, SLOT(reject()));
00345     
00346     hBoxLayout-&gt;addWidget(okButton);
00347     hBoxLayout-&gt;addWidget(cancelButton);
00348 
00349     <span class="keywordflow">if</span>(dialog-&gt;exec() &amp;&amp; listBox-&gt;count())
00350     {
00351         <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> <span class="keywordtype">id</span> = listBox-&gt;selectedItem()-&gt;text();
00352         <span class="keywordtype">id</span>.remove(<a class="codeRef" doxygen="doxy-qt.tag:" href="qregexp.html">QRegExp</a>(<span class="stringliteral">".+\\("</span>));
00353         <span class="keywordtype">id</span>.remove(<a class="codeRef" doxygen="doxy-qt.tag:" href="qregexp.html">QRegExp</a>(<span class="stringliteral">"\\)$"</span>));
00354 
00355         client-&gt;<a class="code" href="classClient.html#a3">open</a>(<span class="keywordtype">id</span>);
00356     }
00357 
00358     <span class="keyword">delete</span> dialog;
00359 }
00360 
<a name="l00361"></a><a class="code" href="classHomeTab.html#k3">00361</a> <span class="keywordtype">void</span> <a class="code" href="classHomeTab.html#k3">HomeTab::createNewDialog</a>()
00362 {
00363     <a class="codeRef" doxygen="doxy-qt.tag:" href="qdialog.html">QDialog</a> *dialog = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qdialog.html">QDialog</a>;
00364     dialog-&gt;setCaption(<span class="stringliteral">"Create a New Client"</span>);
00365     
00366     <a class="codeRef" doxygen="doxy-qt.tag:" href="qvboxlayout.html">QVBoxLayout</a> *vBoxLayout = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qvboxlayout.html">QVBoxLayout</a>(dialog);
00367     vBoxLayout-&gt;setMargin(5);
00368     vBoxLayout-&gt;setSpacing(5);
00369     
00370     <a class="codeRef" doxygen="doxy-qt.tag:" href="qlabel.html">QLabel</a> *labelName = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qlabel.html">QLabel</a>(<span class="stringliteral">"Input the Client's Name:"</span>, dialog);
00371     vBoxLayout-&gt;addWidget(labelName);
00372     
00373     <a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a> *clientNameLineEdit = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a>(dialog);
00374     clientNameLineEdit-&gt;setMaxLength(50);
00375     clientNameLineEdit-&gt;setFocus();
00376     vBoxLayout-&gt;addWidget(clientNameLineEdit);
00377     
00378     <a class="codeRef" doxygen="doxy-qt.tag:" href="qhboxlayout.html">QHBoxLayout</a> *hBoxYearEnd = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qhboxlayout.html">QHBoxLayout</a>(vBoxLayout);
00379     hBoxYearEnd-&gt;setSpacing(5);
00380 
00381     QLabel *yearEndLabel = <span class="keyword">new</span> QLabel(<span class="stringliteral">"Year-End Date:"</span>, dialog);
00382     <a class="codeRef" doxygen="doxy-qt.tag:" href="qcombobox.html">QComboBox</a> *yearEndList = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qcombobox.html">QComboBox</a>(<span class="keyword">false</span>, dialog);
00383     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstringlist.html">QStringList</a> yearEndStrings;
00384     yearEndStrings &lt;&lt; <span class="stringliteral">"January 31"</span> &lt;&lt; <span class="stringliteral">"February 28"</span> &lt;&lt; <span class="stringliteral">"March 31"</span> &lt;&lt; <span class="stringliteral">"April 30"</span>
00385             &lt;&lt; <span class="stringliteral">"May 31"</span> &lt;&lt; <span class="stringliteral">"June 30"</span> &lt;&lt; <span class="stringliteral">"July 31"</span> &lt;&lt; <span class="stringliteral">"August 31"</span> &lt;&lt; <span class="stringliteral">"September 30"</span>
00386             &lt;&lt; <span class="stringliteral">"October 31"</span> &lt;&lt; <span class="stringliteral">"November 30"</span> &lt;&lt; <span class="stringliteral">"December 31"</span>;
00387     yearEndList-&gt;insertStringList(yearEndStrings);
00388     
00389     hBoxYearEnd-&gt;addWidget(yearEndLabel);
00390     hBoxYearEnd-&gt;addWidget(yearEndList);
00391 
00392     QHBoxLayout *hBoxREAccount = <span class="keyword">new</span> QHBoxLayout(vBoxLayout);
00393     hBoxREAccount-&gt;setSpacing(5);
00394 
00395     QLabel *REAccountLabel = <span class="keyword">new</span> QLabel(<span class="stringliteral">"Retained Earnings Account Id:"</span>, dialog);
00396     QLineEdit *REAccountLineEdit = <span class="keyword">new</span> QLineEdit(dialog);
00397     REAccountLineEdit-&gt;setMaxLength(50);
00398     REAccountLineEdit-&gt;setValidator(<span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qregexpvalidator.html">QRegExpValidator</a>(<a class="codeRef" doxygen="doxy-qt.tag:" href="qregexp.html">QRegExp</a>(<span class="stringliteral">"\\d+-?\\d*"</span>),
00399                             REAccountLineEdit));
00400     
00401     hBoxREAccount-&gt;addWidget(REAccountLabel);
00402     hBoxREAccount-&gt;addWidget(REAccountLineEdit);
00403 
00404     vBoxLayout-&gt;addSpacing(10);
00405     
00406     QHBoxLayout *hBoxButtons = <span class="keyword">new</span> QHBoxLayout(vBoxLayout);
00407     hBoxButtons-&gt;setSpacing(5);
00408     
00409     <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a> *createButton = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(<a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>(
00410                     QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/createNewButton.png"</span>)),
00411                     <span class="stringliteral">"Create"</span>, dialog);
00412     createButton-&gt;setDefault(<span class="keyword">true</span>);
00413     connect(createButton, SIGNAL(clicked()), dialog, SLOT(accept()));
00414     
00415     QPushButton *cancelButton = <span class="keyword">new</span> QPushButton(<a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>(
00416                     QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/cancelButton.png"</span>)),
00417                     <span class="stringliteral">"Cancel"</span>, dialog);
00418     connect(cancelButton, SIGNAL(clicked()), dialog, SLOT(reject()));
00419     
00420     hBoxButtons-&gt;addStretch();
00421     hBoxButtons-&gt;addWidget(createButton);
00422     hBoxButtons-&gt;addWidget(cancelButton);
00423    
00425     <span class="keywordflow">if</span>(dialog-&gt;exec() &amp;&amp; !clientNameLineEdit-&gt;text().isEmpty()
00426                       &amp;&amp; !REAccountLineEdit-&gt;text().isEmpty())
00427     {
00428         client-&gt;<a class="code" href="classClient.html#a2">create</a>(clientNameLineEdit-&gt;text(), 
00429                        (yearEndList-&gt;currentItem() + 1),
00430                        REAccountLineEdit-&gt;text());
00431     }
00432 
00433     <span class="keyword">delete</span> dialog;
00434 }
00435 
<a name="l00436"></a><a class="code" href="classHomeTab.html#k4">00436</a> <span class="keywordtype">void</span> <a class="code" href="classHomeTab.html#k4">HomeTab::editName</a>()
00437 {
00438     <a class="codeRef" doxygen="doxy-qt.tag:" href="qdialog.html">QDialog</a> *dialog = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qdialog.html">QDialog</a>;
00439     dialog-&gt;setCaption(<span class="stringliteral">"Edit Client Name"</span>);
00440 
00441     <a class="codeRef" doxygen="doxy-qt.tag:" href="qvboxlayout.html">QVBoxLayout</a> *vBoxLayout = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qvboxlayout.html">QVBoxLayout</a>(dialog);
00442     vBoxLayout-&gt;setMargin(5);
00443     vBoxLayout-&gt;setSpacing(5);
00444 
00445     <a class="codeRef" doxygen="doxy-qt.tag:" href="qlabel.html">QLabel</a> *label = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qlabel.html">QLabel</a>(<span class="stringliteral">"Input a new client name:"</span>, dialog);
00446 
00447     vBoxLayout-&gt;addWidget(label);
00448 
00449     <a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a> *lineEdit = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qlineedit.html">QLineEdit</a>(client-&gt;<a class="code" href="classClient.html#a7">getClientName</a>(), dialog);
00450     lineEdit-&gt;setMaxLength(50);
00451     lineEdit-&gt;setFocus();
00452 
00453     vBoxLayout-&gt;addWidget(lineEdit);
00454     vBoxLayout-&gt;addSpacing(10);
00455 
00456     <a class="codeRef" doxygen="doxy-qt.tag:" href="qhboxlayout.html">QHBoxLayout</a> *hBoxLayout = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qhboxlayout.html">QHBoxLayout</a>(vBoxLayout);
00457 
00458     <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a> *okButton = <span class="keyword">new</span> <a class="codeRef" doxygen="doxy-qt.tag:" href="qpushbutton.html">QPushButton</a>(<a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>(
00459                          QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/editNameButton.png"</span>)),
00460                          <span class="stringliteral">"Change Name"</span>, dialog);
00461     connect(okButton, SIGNAL(clicked()), dialog, SLOT(accept()));
00462 
00463     QPushButton *cancelButton = <span class="keyword">new</span> QPushButton(<a class="codeRef" doxygen="doxy-qt.tag:" href="qiconset.html">QIconSet</a>(
00464                              QPixmap::fromMimeSource(ICON_PATH + <span class="stringliteral">"/cancelButton.png"</span>)),
00465                              <span class="stringliteral">"Cancel"</span>, dialog);
00466     connect(cancelButton, SIGNAL(clicked()), dialog, SLOT(reject()));
00467 
00468     cancelButton-&gt;setDefault(<span class="keyword">false</span>);
00469     okButton-&gt;setDefault(<span class="keyword">true</span>);
00470 
00471     hBoxLayout-&gt;addStretch();
00472     hBoxLayout-&gt;addWidget(okButton);
00473     hBoxLayout-&gt;addWidget(cancelButton);
00474 
00475     <span class="keywordflow">if</span>(dialog-&gt;exec() &amp;&amp; !(lineEdit-&gt;text().isEmpty()))
00476     {
00477         client-&gt;<a class="code" href="classClient.html#a6">setClientName</a>(lineEdit-&gt;text());
00478         main.openDefaultButton-&gt;setText(<span class="stringliteral">"Open "</span> + lineEdit-&gt;text());
00479     }
00480 
00481     <span class="keyword">delete</span> dialog;
00482 }
00483 
<a name="l00484"></a><a class="code" href="classHomeTab.html#k5">00484</a> <span class="keywordtype">void</span> <a class="code" href="classHomeTab.html#k5">HomeTab::changePath</a>()
00485 {
00486     <a class="codeRef" doxygen="doxy-qt.tag:" href="qstring.html">QString</a> path = QFileDialog::getExistingDirectory(
00487             settings-&gt;<a class="code" href="classSettings.html#a1">getClientPath</a>(),
00488             <span class="keyword">this</span>,
00489             0,
00490             <span class="stringliteral">"Choose Client Database Folder"</span>);
00491 
00492     <span class="keywordflow">if</span>(!path.isEmpty())
00493     {
00494         settings-&gt;<a class="code" href="classSettings.html#a2">setClientPath</a>(path);
00495         main.openDefaultButton-&gt;setText(<span class="stringliteral">"Open..."</span>);
00496         main.openDefaultButton-&gt;setEnabled(<span class="keyword">false</span>);
00497         main.openDefaultButton-&gt;removeEventFilter(<span class="keyword">this</span>);
00498     }
00499 }
00500 
00501 <span class="comment">/*</span>
00502 <span class="comment">void HomeTab::encrypt()</span>
00503 <span class="comment">{</span>
00504 <span class="comment">    QDialog dialog;</span>
00505 <span class="comment">    dialog.setCaption("Encrypt Database");</span>
00506 <span class="comment">    </span>
00507 <span class="comment">    QVBoxLayout vBoxLayout(&amp;dialog);</span>
00508 <span class="comment">    vBoxLayout.setMargin(5);</span>
00509 <span class="comment">    vBoxLayout.setSpacing(5);</span>
00510 <span class="comment">    </span>
00511 <span class="comment">    QHBoxLayout hBoxTop(&amp;vBoxLayout);</span>
00512 <span class="comment">    hBoxTop.setSpacing(5);</span>
00513 <span class="comment">    </span>
00514 <span class="comment">    QLabel label1("Input a password:", &amp;dialog);</span>
00515 <span class="comment">    QLineEdit password1(&amp;dialog);</span>
00516 <span class="comment">    password1.setMaxLength(20);</span>
00517 <span class="comment">    password1.setEchoMode(QLineEdit::Password);</span>
00518 <span class="comment">    hBoxTop.addStretch();</span>
00519 <span class="comment">    hBoxTop.addWidget(&amp;label1);</span>
00520 <span class="comment">    hBoxTop.addWidget(&amp;password1);</span>
00521 <span class="comment">    </span>
00522 <span class="comment">    QHBoxLayout hBoxMiddle(&amp;vBoxLayout);</span>
00523 <span class="comment">    hBoxMiddle.setSpacing(5);</span>
00524 <span class="comment"></span>
00525 <span class="comment">    vBoxLayout.addSpacing(10);</span>
00526 <span class="comment">    </span>
00527 <span class="comment">    QLabel label2("Repeat:", &amp;dialog);</span>
00528 <span class="comment">    QLineEdit password2(&amp;dialog);</span>
00529 <span class="comment">    password2.setMaxLength(20);</span>
00530 <span class="comment">    password2.setEchoMode(QLineEdit::Password);</span>
00531 <span class="comment">    hBoxMiddle.addStretch();</span>
00532 <span class="comment">    hBoxMiddle.addWidget(&amp;label2);</span>
00533 <span class="comment">    hBoxMiddle.addWidget(&amp;password2);</span>
00534 <span class="comment">    </span>
00535 <span class="comment">    QHBoxLayout hBoxBottom(&amp;vBoxLayout);</span>
00536 <span class="comment">    hBoxBottom.setSpacing(5);</span>
00537 <span class="comment">    </span>
00538 <span class="comment">    QPushButton encryptButton(QIconSet( QPixmap::fromMimeSource(ICON_PATH + "/encryptButton.png") ),</span>
00539 <span class="comment">                              "Encrypt", &amp;dialog);</span>
00540 <span class="comment">    connect(&amp;encryptButton, SIGNAL(clicked()), &amp;dialog, SLOT(accept()));</span>
00541 <span class="comment">    </span>
00542 <span class="comment">    QPushButton cancelButton(QIconSet( QPixmap::fromMimeSource(ICON_PATH + "/cancelButton.png") ),</span>
00543 <span class="comment">                             "Cancel", &amp;dialog);</span>
00544 <span class="comment">    connect(&amp;cancelButton, SIGNAL(clicked()), &amp;dialog, SLOT(reject()));</span>
00545 <span class="comment">    </span>
00546 <span class="comment">    hBoxBottom.addStretch();</span>
00547 <span class="comment">    hBoxBottom.addWidget(&amp;encryptButton);</span>
00548 <span class="comment">    hBoxBottom.addWidget(&amp;cancelButton);</span>
00549 <span class="comment">    </span>
00550 <span class="comment">    while(dialog.exec())</span>
00551 <span class="comment">    {</span>
00552 <span class="comment">        if(password1.text() == password2.text())</span>
00553 <span class="comment">        {</span>
00554 <span class="comment">            db-&gt;encryptDb(password1.text());</span>
00555 <span class="comment">            clientOpened();</span>
00556 <span class="comment">            break;</span>
00557 <span class="comment">        }</span>
00558 <span class="comment">    }</span>
00559 <span class="comment">}</span>
00560 <span class="comment"></span>
00561 <span class="comment">void HomeTab::decrypt()</span>
00562 <span class="comment">{</span>
00563 <span class="comment">    QDialog dialog;</span>
00564 <span class="comment">    dialog.setCaption("Decrypt Database");</span>
00565 <span class="comment"></span>
00566 <span class="comment">    QVBoxLayout vBoxLayout(&amp;dialog);</span>
00567 <span class="comment">    vBoxLayout.setMargin(5);</span>
00568 <span class="comment">    vBoxLayout.setSpacing(5);</span>
00569 <span class="comment"></span>
00570 <span class="comment">    QLabel label("&lt;nobr&gt;Are you sure you want to decrypt the database?&lt;/nobr&gt;", &amp;dialog);</span>
00571 <span class="comment"></span>
00572 <span class="comment">    vBoxLayout.addWidget(&amp;label);</span>
00573 <span class="comment">    vBoxLayout.addSpacing(10);</span>
00574 <span class="comment"></span>
00575 <span class="comment">    QHBoxLayout hBoxLayout(&amp;vBoxLayout);</span>
00576 <span class="comment">    hBoxLayout.setSpacing(5);</span>
00577 <span class="comment"></span>
00578 <span class="comment">    QPushButton decryptButton(QIconSet(QPixmap::fromMimeSource(ICON_PATH + "/decryptButton.png")),</span>
00579 <span class="comment">                              "Decrypt", &amp;dialog);</span>
00580 <span class="comment">    connect(&amp;decryptButton, SIGNAL(clicked()), &amp;dialog, SLOT(accept()));</span>
00581 <span class="comment">    decryptButton.setDefault(false);</span>
00582 <span class="comment"></span>
00583 <span class="comment">    QPushButton cancelButton(QIconSet(QPixmap::fromMimeSource(QString(ICON_PATH + "/cancelButton.png"))),</span>
00584 <span class="comment">                             "Cancel", &amp;dialog);</span>
00585 <span class="comment">    connect(&amp;cancelButton, SIGNAL(clicked()), &amp;dialog, SLOT(reject()));</span>
00586 <span class="comment">    cancelButton.setDefault(true);</span>
00587 <span class="comment"></span>
00588 <span class="comment">    hBoxLayout.addStretch();</span>
00589 <span class="comment">    hBoxLayout.addWidget(&amp;decryptButton);</span>
00590 <span class="comment">    hBoxLayout.addWidget(&amp;cancelButton);</span>
00591 <span class="comment"></span>
00592 <span class="comment">    if(dialog.exec())</span>
00593 <span class="comment">    {</span>
00594 <span class="comment">        db-&gt;decryptDb();</span>
00595 <span class="comment">        clientOpened();</span>
00596 <span class="comment">    }</span>
00597 <span class="comment">}</span>
00598 <span class="comment"></span>
00599 <span class="comment">*/</span>
00600 
<a name="l00601"></a><a class="code" href="classHomeTab.html#i0">00601</a> <span class="keywordtype">void</span> <a class="code" href="classHomeTab.html#i0">HomeTab::closeClient</a>()
00602 {
00603     <span class="keywordflow">if</span>(<a class="code" href="classHomeTab.html#r3">active</a> == 0)
00604         <span class="keywordflow">return</span>;
00605 
00606     <span class="keywordflow">if</span>(!(journalData-&gt;<a class="code" href="classJournalData.html#a14">journalTmpEmpty</a>()))
00607     {
00608         <a class="code" href="classGlobalCloseDialog.html">GlobalCloseDialog</a> dialog(<span class="keyword">this</span>, <span class="stringliteral">"homeTab::closeClient()::dialog"</span>);
00609         dialog.exec();
00610 
00611         <span class="keywordflow">switch</span>(dialog.result())
00612         {
00613             <span class="keywordflow">case</span> 0:
00614                 journalData-&gt;<a class="code" href="classJournalData.html#a10">saveAndClear</a>();
00615                 <span class="keywordflow">break</span>;
00616             <span class="keywordflow">case</span> 1:
00617                 <span class="keywordflow">break</span>;
00618             <span class="keywordflow">case</span> 2:
00619                 topLevelWidget()-&gt;showNormal();
00620                 emit <a class="code" href="classHomeTab.html#l1">switchToJournal</a>();
00621                 <span class="keywordflow">return</span>;
00622                 <span class="keywordflow">break</span>;
00623             <span class="keywordflow">default</span>:
00624                 <span class="keywordflow">break</span>;
00625         }
00626     }
00627 
00628     client-&gt;<a class="code" href="classClient.html#a5">close</a>();
00629     <a class="code" href="classHomeTab.html#d0">switchWidget</a>();
00630 
00631     <span class="keywordflow">return</span>;
00632 }
00633 
<a name="l00634"></a><a class="code" href="classHomeTab.html#k6">00634</a> <span class="keywordtype">void</span> <a class="code" href="classHomeTab.html#k6">HomeTab::prepareQuit</a>()
00635 {
00636     <span class="keywordflow">if</span>(<a class="code" href="classHomeTab.html#r3">active</a> == 1)
00637         <a class="code" href="classHomeTab.html#i0">closeClient</a>();
00638     emit <a class="code" href="classHomeTab.html#l3">quit</a>();
00639 }
00640 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Jan 16 16:23:28 2005 for General Ledger by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
